"use strict";
exports.__esModule = true;
var migrate_1 = require("../manifest/migrate");
var __1 = require("..");
module.exports = function migrate(_a) {
    var manifest = _a.manifest;
    var migrated = migrate_1.toCurrent(manifest);
    var result = __1.current.parse(migrated);
    if (result.type === 'invalid') {
        throw new Error('Migration of manifest caused invalid template:\n' +
            result.errors
                .map(function (error) { return (error.path.join(' â†’ ') || '<root>') + ": " + error.message; })
                .join('\n'));
    }
    return migrated;
};
