"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("picosanity")),r=e(require("@sanity/image-url")),n=require("react"),o=e(n),i=require("use-deep-compare-effect"),a=e(require("@sanity/block-content-to-react")),u=e(require("groq"));function c(){return"undefined"==typeof AbortController?{signal:void 0,abort:s}:new AbortController}function s(){}function l(e,t){return fetch("https://"+e+".api.sanity.io/v1/users/me",{credentials:"include",signal:null==t?void 0:t.signal}).then(e=>e.json()).then(e=>(null==e?void 0:e.id)?e:null).catch(e=>"AbortError"===e.name?null:Promise.reject(e))}exports.groq=u,exports.createClient=function(e){return t(e)},exports.createCurrentUserHook=function(e){let t=e.projectId;return()=>function(e){const t=n.useState(),r=t[0],o=t[1],i=n.useState(),a=i[0],u=i[1];return n.useEffect(()=>{const t=c();return l(e,t).then(o).catch(u),()=>t.abort()},[e]),{data:r,error:a,loading:null!==r||!a}}(t)},exports.createImageUrlBuilder=function(e){return r({projectId:e.projectId,dataset:e.dataset})},exports.createPortableTextComponent=function(e){let t=e.projectId,r=e.dataset,n=e.serializers;return function(e){return o.createElement(a,Object.assign({projectId:t,dataset:r,serializers:n},e))}},exports.createPreviewSubscriptionHook=function(e){let t,r=e.projectId,o=e.dataset,a=e.documentLimit,u=void 0===a?3e3:a;return function(e,t){void 0===t&&(t={});const o=t.params;return function(e){const t=e.getStore,r=e.projectId,o=e.query,a=e.params,u=e.initialData,s=e.enabled,d=void 0!==s&&s,f=n.useState(),p=f[0],b=f[1],v=n.useState(!1),h=v[0],m=v[1],g=n.useState(),j=g[0],y=g[1];return i.useDeepCompareEffectNoCheck(()=>{if(!d)return()=>{};m(!0);const e=c();let n;return l(r,e).then(e=>{if(!e)throw console.warn("Not authenticated - preview not available"),new Error("Not authenticated - preview not available")}).then(t).then(e=>{n=e.subscribe(o,a,(e,t)=>{e?b(e):y(t)})}).catch(b).finally(()=>m(!1)),()=>{n&&n.unsubscribe(),e.abort()}},[t,o,a,d]),{data:void 0===j?u:j,loading:h,error:p}}({getStore:s,projectId:r,query:e,params:void 0===o?{}:o,initialData:t.initialData,enabled:!!t.enabled&&"undefined"!=typeof window})};function s(){return t||(t=new Promise((function(e){e(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t.default=e,t}(require("@sanity/groq-store")))})).then(e=>(0,e.groqStore)({projectId:r,dataset:o,documentLimit:u,listen:!0,overlayDrafts:!0,subscriptionThrottleMs:10}))),t}};
//# sourceMappingURL=next-sanity.cjs.production.min.js.map
