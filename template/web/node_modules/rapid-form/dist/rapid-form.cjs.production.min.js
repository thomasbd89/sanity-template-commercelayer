"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("react"),t=(e=require("lodash"))&&"object"==typeof e&&"default"in e?e.default:e;function a(){return(a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var n=function(e,r){var t;return"change"===r.type&&(r.name&&null!=(t=e.errors)&&t.hasOwnProperty(r.name)&&delete e.errors[r.name],e=a({},e,{data:a({},e.data,r.data),errors:a({},e.errors,r.errors)})),"setRef"===r.type&&(e=a({},e,{refs:a({},e.refs,r.data)})),"error"===r.type&&(e=a({},e,{data:a({},e.data,r.data),errors:a({},e.errors,r.errors)})),"reset"===r.type&&(e=a({},e,{data:{},errors:{}})),e},o=/\w+/,u=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/,s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/,c=function(e,r){var t,n,c,i,d,l,f=function(e){return e.required?(n=(r=e).value,("checkbox"===r.type?r.checked:(Array.isArray(n)&&(n=null==(t=n.find((function(e){return""!==e})))?void 0:t.length),n))?(c=e.value,d=e.pattern,l={error:!1,message:""},f={error:!0,message:"please enter a valid format",code:"VALIDATION_ERROR"},"email"!==(i=e.type)||c.match(d||u)||(l=a({},l,f)),"password"!==i||c.match(d||s)||(l=a({},l,f)),"text"!==i||c.match(d||o)||(l=a({},l,f)),l):{error:!0,message:e.name+" is required",code:"EMPTY_ERROR"}):{error:!1,message:""};var r,t,n,c,i,d,l,f}(e),m=f.error,p=f.message,v=f.code;return m?(r({type:"error",name:e.name,data:(c={},c[e.name]=a({},e),c),errors:(i={},i[e.name]={error:m,message:p,code:v},i)}),{data:(d={},d[e.name]=a({},e),d),errors:(l={},l[e.name]={message:p,code:v},l)}):(r({type:"change",name:e.name,data:(t={},t[e.name]=a({},e),t)}),{data:(n={},n[e.name]=a({},e),n)})},i=function(e,r){var t,a=null!=e&&e.currentTarget?e.currentTarget:e,n=a.multiple?Array.from(null==a?void 0:a.options).filter((function(e){return e.selected})).map((function(e){return e.value})).join(","):a.value,o=a.name,u=((t={})[o]={checked:null==a?void 0:a.checked,name:o,pattern:null==a?void 0:a.pattern,required:a.required,type:a.type,value:n},t);return c(u[o],r)};exports.default=function(){var e=r.useReducer(n,{data:{},errors:{},refs:{}}),o=e[0],u=e[1],s=function(e){return r.useCallback((function(r){if(r){var t,a=r.value;e({type:"setRef",data:(t={},t[r.name]=r,t)}),a&&i(r,e),r.oninput=function(r){return i(r,e)}}}),[e])}(u),d=function(e){return r.useCallback((function(r){r&&(r.onsubmit=function(r){t.map(r.currentTarget.elements,(function(r){var t;null!=(t=r.currentTarget)&&t.name&&i(r,e)}))})}),[e])}(u);return{handleSubmit:function(e){return function(r){var n={data:{},errors:{}};r.preventDefault(),t.map(r.currentTarget.elements,(function(e){if(e.name){var r=i(e,u);n={data:a({},n.data,r.data),errors:a({},n.errors,r.errors)}}}));var s={data:t.isEmpty(o.data)?n.data:o.data,errors:t.isEmpty(o.errors)?n.errors:o.errors};return e(s.data,s.errors,r)}},errors:o.errors,validation:s,submitValidation:d,reset:function(e){e.currentTarget?e.currentTarget.reset():t.has(e.target,"reset")&&e.target.reset(),function(e){e({type:"reset"})}(u)},values:o.data,setValue:function(e,r){var t=o.refs[e];t&&(t.value=r,c({checked:t.checked,name:e,pattern:t.pattern,required:t.required,type:t.type,value:r},u))},setError:function(e){var r,t=e.name,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r.indexOf(t=o[a])>=0||(n[t]=e[t]);return n}(e,["name"]);u({type:"error",name:t,errors:(r={},r[t]=a({},n,{error:!0}),r)})}}};
//# sourceMappingURL=rapid-form.cjs.production.min.js.map
