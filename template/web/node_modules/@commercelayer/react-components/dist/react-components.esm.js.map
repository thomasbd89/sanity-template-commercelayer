{"version":3,"file":"react-components.esm.js","sources":["../src/components/utils/Parent.tsx","../node_modules/regenerator-runtime/runtime.js","../src/utils/baseReducer.ts","../src/utils/getErrorsByCollection.ts","../src/reducers/OrderReducer.ts","../src/context/OrderContext.ts","../src/context/ItemContext.ts","../src/utils/getCurrentItemKey.ts","../src/utils/childrenTypes.ts","../src/typings/index.ts","../src/typings/errors.ts","../src/config/components.ts","../src/reducers/SkuListsReducer.ts","../src/context/SkuListsContext.ts","../src/context/ExternalFunctionContext.ts","../src/components/AddToCartButton.tsx","../src/context/AddressChildrenContext.ts","../src/reducers/CustomerReducer.ts","../src/context/CustomerContext.ts","../src/context/BillingAddressContext.ts","../src/context/ShippingAddressContext.ts","../src/reducers/AddressReducer.ts","../src/context/AddressContext.ts","../src/components/Address.tsx","../src/components/utils/BaseSelect.tsx","../src/context/BillingAddressFormContext.ts","../src/context/ShippingAddressFormContext.ts","../src/components/AddressCountrySelector.tsx","../src/components/AddressField.tsx","../src/components/utils/BaseInput.tsx","../src/components/AddressInput.tsx","../src/context/CommerceLayerContext.ts","../src/components/AddressesContainer.tsx","../src/reducers/AvailabilityReducer.ts","../src/context/AvailabilityContext.ts","../src/components/AvailabilityContainer.tsx","../src/components/AvailabilityTemplate.tsx","../src/reducers/BillingAddressReducer.ts","../src/components/BillingAddressContainer.tsx","../src/components/BillingAddressForm.tsx","../src/components/CheckoutLink.tsx","../src/components/CommerceLayer.tsx","../src/components/CustomerContainer.tsx","../src/components/CustomerInput.tsx","../src/utils/getAmount.ts","../src/components/utils/BaseOrderPrice.tsx","../src/components/DiscountAmount.tsx","../src/reducers/GiftCardReducer.ts","../src/context/GiftCardContext.ts","../src/utils/customMessages.ts","../src/components/utils/getAllErrors.tsx","../src/context/LineItemContext.ts","../src/context/LineItemChildrenContext.ts","../src/components/Errors.tsx","../src/components/ExternalFunction.tsx","../src/utils/validateFormFields.ts","../src/components/GiftCard.tsx","../src/components/GiftCardAmount.tsx","../src/components/GiftCardContainer.tsx","../src/components/GiftCardCurrencySelector.tsx","../src/components/GiftCardInput.tsx","../src/reducers/ItemReducer.ts","../src/components/ItemContainer.tsx","../src/context/ShipmentChildrenContext.ts","../src/components/LineItem.tsx","../src/components/LineItemAmount.tsx","../src/components/LineItemImage.tsx","../src/components/LineItemName.tsx","../src/context/LineItemOptionChildrenContext.ts","../src/components/LineItemOption.tsx","../src/components/LineItemOptions.tsx","../src/components/LineItemQuantity.tsx","../src/components/LineItemRemoveLink.tsx","../src/reducers/LineItemReducer.ts","../src/components/LineItemsContainer.tsx","../src/utils/getLineItemsCount.ts","../src/components/LineItemsCount.tsx","../src/components/MetadataInput.tsx","../src/utils/localStorage.ts","../src/context/OrderStorageContext.ts","../src/components/OrderContainer.tsx","../src/components/OrderStorage.tsx","../src/components/utils/PriceTemplate.tsx","../src/utils/getPrices.tsx","../src/reducers/PriceReducer.ts","../src/context/PricesContext.ts","../src/components/Price.tsx","../src/components/PricesContainer.tsx","../src/components/QuantitySelector.tsx","../src/utils/addressesManager.ts","../src/components/SaveAddressesButton.tsx","../src/components/SaveCustomerButton.tsx","../src/reducers/ShippingAddressReducer.ts","../src/components/ShippingAddressContainer.tsx","../src/components/ShippingAddressForm.tsx","../src/components/ShippingAmount.tsx","../src/components/SkuList.tsx","../src/components/SkuListsContainer.tsx","../src/context/SkuOptionChildrenContext.ts","../src/reducers/SkuOptionsReducer.ts","../src/context/SkuOptionsContext.ts","../src/components/SkuOption.tsx","../src/components/SkuOptionInput.tsx","../src/components/SkuOptionsContainer.tsx","../src/components/SubTotalAmount.tsx","../src/components/SubmitButton.tsx","../src/components/TaxesAmount.tsx","../src/components/TotalAmount.tsx","../src/components/utils/VariantTemplate.tsx","../src/utils/getSkus.ts","../src/reducers/VariantReducer.ts","../src/context/VariantsContext.ts","../src/components/VariantSelector.tsx","../src/components/VariantsContainer.tsx","../src/reducers/ShipmentReducer.ts","../src/context/ShipmentContext.ts","../src/components/ShipmentsContainer.tsx","../src/components/Shipment.tsx","../src/context/ShippingMethodChildrenContext.ts","../src/components/ShippingMethod.tsx","../src/components/ShippingMethodName.tsx","../src/components/ShippingMethodRadioButton.tsx","../src/components/ShippingMethodPrice.tsx","../src/context/StockTransferChildrenContext.ts","../src/components/StockTransfer.tsx","../src/components/StockTransferField.tsx","../src/components/DeliveryLeadTime.tsx"],"sourcesContent":["import PropTypes, { InferProps } from 'prop-types'\nimport React, { FunctionComponent } from 'react'\n\nconst PProps = {\n  children: PropTypes.func,\n}\n\nexport type ParentProps = InferProps<typeof PProps>\n\nconst Parent: FunctionComponent<ParentProps> = (props) => {\n  const Child = props.children\n  return Child ? <Child {...props} /> : null\n}\n\nParent.propTypes = PProps\n\nexport default Parent\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { BaseReducer } from '#typings'\n\nconst baseReducer: BaseReducer = (state, action, actionTypes) => {\n  const actions = actionTypes\n  if (actions.indexOf(action.type) !== -1) {\n    const data = action.payload\n    state = { ...state, ...data }\n  }\n  return state\n}\n\nexport default baseReducer\n","import { CodeErrorType, ResourceErrorType, BaseError } from '#typings/errors'\nimport BaseClass from '@commercelayer/js-sdk/dist/utils/BaseClass'\nimport _ from 'lodash'\n\nconst ERROR_CODES: CodeErrorType[] = [\n  'RECORD_NOT_FOUND',\n  'UNAUTHORIZED',\n  'INVALID_TOKEN',\n  'VALIDATION_ERROR',\n  'INVALID_RESOURCE',\n  'FILTER_NOT_ALLOWED',\n  'INVALID_FIELD_VALUE',\n  'INVALID_FIELD',\n  'PARAM_NOT_ALLOWED',\n  'PARAM_MISSING',\n  'INVALID_FILTER_VALUE',\n  'KEY_ORDER_MISMATCH',\n  'KEY_NOT_INCLUDED_IN_URL',\n  'INVALID_INCLUDE',\n  'RELATION_EXISTS',\n  'INVALID_SORT_CRITERIA',\n  'INVALID_LINKS_OBJECT',\n  'TYPE_MISMATCH',\n  'INVALID_PAGE_OBJECT',\n  'INVALID_PAGE_VALUE',\n  'INVALID_FIELD_FORMAT',\n  'INVALID_FILTERS_SYNTAX',\n  'SAVE_FAILED',\n  'INVALID_DATA_FORMAT',\n  'FORBIDDEN',\n  'RECORD_NOT_FOUND',\n  'NOT_ACCEPTABLE',\n  'UNSUPPORTED_MEDIA_TYPE',\n  'LOCKED',\n  'INTERNAL_SERVER_ERROR',\n]\n\nexport type GetErrorsByCollection = <C extends BaseClass>(\n  collection: C,\n  resourceType: ResourceErrorType\n) => BaseError[]\n\nexport interface TransformCode {\n  (code: string): CodeErrorType\n}\n\nconst transformCode: TransformCode = (code) => {\n  let newCode = '' as CodeErrorType\n  ERROR_CODES.map((c) => {\n    const checkCode: string[] = []\n    const words = c.split('_')\n    words.map((w) => {\n      const rgx = new RegExp(`(?:s|${w})`, 'g')\n      const m = code.match(rgx)\n      if (m && m?.length > 0) {\n        checkCode.push(m[0])\n      }\n    })\n    if (checkCode.length === words.length) {\n      newCode = c\n    }\n  })\n  return newCode\n}\n\nconst getErrorsByCollection: GetErrorsByCollection = (\n  collection,\n  resourceType\n) => {\n  const errors: BaseError[] = []\n  if (_.has(collection, 'errors') && !collection.errors().empty()) {\n    collection\n      .errors()\n      .toArray()\n      .map((error) => {\n        // TODO Add function to correct different field\n        if (error['field'] === 'recipientEmail') error['field'] = 'email'\n        errors.push({\n          id: collection['id'],\n          code: transformCode(error['code']),\n          field: error['field'] === 'recipientEmail' ? 'email' : error['field'],\n          resource: resourceType,\n          message: error['message'],\n        })\n      })\n  } else if (_.isArray(collection)) {\n    collection.map((error) => {\n      errors.push({\n        // id: collection['id'],\n        code: transformCode(error['code']),\n        field: error['field'] === 'recipientEmail' ? 'email' : error['field'],\n        resource: resourceType,\n        message: error['message'],\n      })\n    })\n  }\n  return errors\n}\n\nexport default getErrorsByCollection\n","import CLayer, { Order, OrderCollection } from '@commercelayer/js-sdk'\nimport { Dispatch } from 'react'\nimport { SetLocalOrder, DeleteLocalOrder } from '#utils/localStorage'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport baseReducer from '#utils/baseReducer'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\nimport { ItemOption, CustomLineItem } from './ItemReducer'\nimport _ from 'lodash'\nimport { BaseMetadataObject } from '#typings/index'\nimport { BaseError } from '#typings/errors'\n\nexport interface GetOrderParams {\n  clearWhenPlaced?: boolean\n  config: CommerceLayerConfig\n  deleteLocalOrder?: DeleteLocalOrder\n  dispatch: Dispatch<OrderActions>\n  id: string\n  persistKey?: string\n}\n\nexport interface GetOrder {\n  (params: GetOrderParams): void\n}\n\nexport interface SetOrderErrors {\n  (params: { dispatch: Dispatch<OrderActions>; collection: any }): {\n    success: boolean\n  }\n}\n\ntype CreateOrderParams = Pick<\n  AddToCartParams,\n  | 'config'\n  | 'dispatch'\n  | 'persistKey'\n  | 'state'\n  | 'orderMetadata'\n  | 'orderAttributes'\n  | 'setLocalOrder'\n>\n\nexport interface CreateOrder {\n  (params: CreateOrderParams): Promise<string>\n}\n\nexport interface AddToCartParams {\n  skuCode: string\n  persistKey: string\n  config: CommerceLayerConfig\n  dispatch: Dispatch<OrderActions>\n  state: Partial<OrderState>\n  skuId?: string\n  quantity?: number\n  option?: ItemOption\n  lineItem?: CustomLineItem\n  orderMetadata?: BaseMetadataObject\n  orderAttributes?: Record<string, any>\n  errors?: BaseError[]\n  setLocalOrder?: SetLocalOrder\n}\n\nexport interface AddToCartImportParams\n  extends Omit<\n    AddToCartParams,\n    'skuCode' | 'skuId' | 'quantity' | 'option' | 'lineItem'\n  > {\n  lineItems: CustomLineItem[]\n}\n\nexport type AddToCartReturn = Promise<{\n  success: boolean\n}>\n\nexport interface AddToCart {\n  (params: AddToCartParams): AddToCartReturn\n}\n\nexport interface AddToCartImport {\n  (params: AddToCartImportParams): AddToCartReturn\n}\n\nexport interface UnsetOrderState {\n  (dispatch: Dispatch<OrderActions>): void\n}\n\nexport interface OrderPayload {\n  loading?: boolean\n  orderId?: string\n  order?: OrderCollection\n  errors?: BaseError[]\n}\n\nexport type AddToCartValues = {\n  skuCode: string\n  skuId?: string\n  quantity?: number\n  option?: ItemOption\n  lineItem?: CustomLineItem\n}\n\nexport type AddToCartImportValues = Pick<AddToCartImportParams, 'lineItems'>\n\nexport type getOrderContext = (id: string) => void\n\nexport interface OrderState extends OrderPayload {\n  loading: boolean\n  orderId: string\n  order: OrderCollection | undefined\n  saveBillingAddressToCustomerBook: boolean\n  saveShippingAddressToCustomerBook: boolean\n  getOrder?: getOrderContext\n  createOrder?: () => Promise<string>\n  addToCart: (values: AddToCartValues) => AddToCartReturn\n  setOrderErrors: (collection: any) => { success: boolean }\n  saveAddressToCustomerBook: (\n    type: 'BillingAddress' | 'ShippingAddress',\n    value: boolean\n  ) => void\n}\n\nexport interface OrderActions {\n  type: OrderActionType\n  payload: OrderPayload\n}\n\nexport type OrderActionType =\n  | 'setLoading'\n  | 'setOrderId'\n  | 'setOrder'\n  | 'setSingleQuantity'\n  | 'setCurrentSkuCodes'\n  | 'setCurrentSkuPrices'\n  | 'setCurrentItem'\n  | 'setErrors'\n  | 'setSaveAddressToCustomerBook'\n\nconst actionType: OrderActionType[] = [\n  'setLoading',\n  'setOrderId',\n  'setOrder',\n  'setSingleQuantity',\n  'setCurrentSkuCodes',\n  'setCurrentSkuPrices',\n  'setErrors',\n  'setCurrentItem',\n  'setSaveAddressToCustomerBook',\n]\n\nexport const createOrder: CreateOrder = async (params) => {\n  const {\n    persistKey,\n    state,\n    dispatch,\n    config,\n    orderMetadata: metadata,\n    orderAttributes = {},\n    setLocalOrder,\n  } = params\n  if (state.orderId) return state.orderId\n  const o = await CLayer.Order.withCredentials(config).create({\n    metadata,\n    ...orderAttributes,\n  })\n  if (!o.id) return ''\n  dispatch({\n    type: 'setOrderId',\n    payload: {\n      orderId: o.id,\n    },\n  })\n  dispatch({\n    type: 'setOrder',\n    payload: {\n      order: o,\n    },\n  })\n  persistKey && setLocalOrder && setLocalOrder(persistKey, o.id)\n  return o.id\n}\n\nexport const getApiOrder: GetOrder = async (params) => {\n  const {\n    id,\n    dispatch,\n    config,\n    clearWhenPlaced,\n    persistKey,\n    deleteLocalOrder,\n  } = params\n  try {\n    const o = await Order.withCredentials(config)\n      .includes('billingAddress', 'shippingAddress')\n      .find(id)\n    if (o)\n      if (\n        (clearWhenPlaced && o.status === 'placed') ||\n        o.status === 'approved' ||\n        o.status === 'cancelled'\n      ) {\n        persistKey && deleteLocalOrder && deleteLocalOrder(persistKey)\n        dispatch({\n          type: 'setOrder',\n          payload: {\n            order: undefined,\n            orderId: '',\n          },\n        })\n      } else {\n        dispatch({\n          type: 'setOrder',\n          payload: {\n            order: o,\n          },\n        })\n      }\n  } catch (col) {\n    persistKey && deleteLocalOrder && deleteLocalOrder(persistKey)\n    dispatch({\n      type: 'setOrder',\n      payload: {\n        order: undefined,\n        orderId: '',\n      },\n    })\n  }\n}\n\nexport const addToCart: AddToCart = async (params) => {\n  const {\n    skuCode,\n    skuId,\n    quantity,\n    option,\n    config,\n    dispatch,\n    lineItem,\n    errors,\n  } = params\n  try {\n    const id = await createOrder(params)\n    const order = CLayer.Order.build({ id })\n    const name = lineItem?.name\n    const imageUrl = lineItem?.imageUrl\n    const attrs: Record<string, any> = {\n      order,\n      skuCode,\n      name,\n      imageUrl,\n      quantity: quantity || 1,\n      _updateQuantity: 1,\n    }\n    if (skuId) {\n      attrs['item'] = CLayer.Sku.build({ id: skuId })\n    }\n    const lineItemResource = await CLayer.LineItem.withCredentials(\n      config\n    ).create(attrs)\n    if (!_.isEmpty(option)) {\n      let c = 0\n      _.map(option, async (opt) => {\n        const { options, skuOptionId } = opt\n        const skuOption = CLayer.SkuOption.build({ id: skuOptionId })\n        await CLayer.LineItemOption.withCredentials(config).create({\n          quantity: 1,\n          options,\n          lineItem: lineItemResource,\n          skuOption,\n        })\n        c += 1\n        if (c === _.size(option)) {\n          await getApiOrder({ id, ...params })\n        }\n      })\n    } else {\n      await getApiOrder({ id, ...params })\n    }\n    if (!_.isEmpty(errors)) {\n      dispatch({\n        type: 'setErrors',\n        payload: {\n          errors: [],\n        },\n      })\n    }\n    return { success: true }\n  } catch (col) {\n    const errors = getErrorsByCollection(col, 'order')\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n    return { success: false }\n  }\n}\n\nexport const unsetOrderState: UnsetOrderState = (dispatch) => {\n  dispatch({\n    type: 'setOrderId',\n    payload: {\n      orderId: '',\n    },\n  })\n  dispatch({\n    type: 'setOrder',\n    payload: {\n      order: undefined,\n    },\n  })\n}\n\nexport const setOrderErrors: SetOrderErrors = ({ dispatch, collection }) => {\n  const errors = getErrorsByCollection(collection, 'order')\n  dispatch({\n    type: 'setErrors',\n    payload: {\n      errors,\n    },\n  })\n  return { success: false }\n}\n\ntype SaveAddressToCustomerBook = (params: {\n  dispatch: Dispatch<OrderActions>\n  type: 'BillingAddress' | 'ShippingAddress'\n  value: boolean\n}) => void\n\nexport const saveAddressToCustomerBook: SaveAddressToCustomerBook = ({\n  type,\n  value,\n  dispatch,\n}) => {\n  dispatch({\n    type: 'setSaveAddressToCustomerBook',\n    payload: {\n      [`save${type}ToCustomerBook`]: value,\n    },\n  })\n}\n\nexport const orderInitialState: Partial<OrderState> = {\n  loading: false,\n  orderId: '',\n  order: undefined,\n  errors: [],\n}\n\nconst orderReducer = (\n  state: Partial<OrderState>,\n  reducer: OrderActions\n): Partial<OrderState> =>\n  baseReducer<Partial<OrderState>, OrderActions, OrderActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default orderReducer\n","import { createContext } from 'react'\nimport { orderInitialState, OrderState } from '#reducers/OrderReducer'\n\nconst OrderContext = createContext<OrderState>(orderInitialState as OrderState)\n\nexport default OrderContext\n","import { createContext } from 'react'\nimport {\n  ItemState,\n  Items,\n  ItemQuantity,\n  ItemOptions,\n  ItemPrices,\n  CustomLineItems,\n} from '#reducers/ItemReducer'\n\nexport interface InitItemContext extends Partial<ItemState> {\n  item: Items\n  items: Items\n  quantity: ItemQuantity\n  option: ItemOptions\n  prices: ItemPrices\n  lineItems: CustomLineItems\n}\n\nexport const initialItemContext: InitItemContext = {\n  item: {},\n  items: {},\n  quantity: {},\n  option: {},\n  prices: {},\n  lineItems: {},\n}\n\nconst ItemContext = createContext<InitItemContext>(initialItemContext)\n\nexport default ItemContext\n","import _ from 'lodash'\nimport { Items } from '#reducers/ItemReducer'\n\nexport interface GetCurrentItemKey {\n  (item: Items): string\n}\n\nconst getCurrentItemKey: GetCurrentItemKey = (item) => {\n  return _.first(_.keys(item)) || ''\n}\n\nexport default getCurrentItemKey\n","import { isValidElement, Children, ReactNode } from 'react'\nimport _ from 'lodash'\nimport { Requireable } from 'prop-types'\nimport components from '#config/components'\n\nexport interface CheckChildrenTypes {\n  (\n    props: { [key: string]: any },\n    propName: string,\n    componentName: string,\n    location: string,\n    propFullName: string\n  ): Error | null\n}\n\nconst checkChildrenTypes: CheckChildrenTypes = (\n  props,\n  propName,\n  componentName\n) => {\n  let error: Error | null = null\n  const children = props[propName]\n  const cpName = componentName.replace('CL', '')\n  if (_.isEmpty(children) && props['isRequired'])\n    error = new Error(\n      `The prop '${propName}' is marked as required in '${cpName}', but its value is '${children}'.`\n    )\n  Children.map(children, (c): any => {\n    if (error) return error\n    const type = c.type\n    const itemTypes = components[cpName].permittedChildren\n    const errorMsg = `Invalid prop '${propName}' supplied to ${cpName}. Only components ${itemTypes.join(\n      ', '\n    )} are allowed.`\n    if (_.isFunction(type) && _.has(type, 'displayName')) {\n      const displayName: string = type['displayName']\n      const childComponentName = type.name\n      if (displayName && displayName === `${childComponentName}`) {\n        if (!itemTypes.includes(childComponentName)) {\n          error = new Error(errorMsg)\n        }\n      }\n    }\n    if (!isValidElement(c)) {\n      error = new Error(errorMsg)\n    }\n  })\n  return error\n}\n\nconst childrenTypes = checkChildrenTypes\nchildrenTypes['isRequired'] = (\n  props: { [key: string]: any },\n  propName: string,\n  componentName: string,\n  location: string,\n  propFullName: string\n): Error | null | Element[] =>\n  checkChildrenTypes(\n    { ...props, isRequired: true },\n    propName,\n    componentName,\n    location,\n    propFullName\n  )\n\n// NOTE change in the future (now is general for typescript)\nexport default childrenTypes as Requireable<ReactNode>\n","import { Dispatch, ReactNode, RefObject } from 'react'\nimport PropTypes, { InferProps, ReactElementLike } from 'prop-types'\nimport { BaseError } from './errors'\n\nexport const BC = {\n  id: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  name: PropTypes.string,\n}\n\nexport const PTLoader = PropTypes.oneOfType([\n  PropTypes.element,\n  PropTypes.string,\n])\n\nexport const BaseSelectComponentPropTypes = {\n  children: PropTypes.func,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        .isRequired,\n      selected: PropTypes.bool,\n    }).isRequired\n  ).isRequired,\n  placeholder: PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  }),\n  value: PropTypes.string,\n  name: PropTypes.string.isRequired,\n}\n\nexport type SelectPlaceholder = Option\n\ntype BaseSelectChildrenComponentProps = Omit<\n  BaseSelectComponentProps,\n  'children'\n>\n\ntype Option = {\n  label: string\n  value: string | number\n  disabled?: boolean\n}\n\nexport interface BaseSelectComponentProps {\n  children?: (props: BaseSelectChildrenComponentProps) => ReactNode\n  options: Option[]\n  placeholder?: Option\n  value?: string\n  name: string\n}\n\nexport const BaseInputComponentPropTypes = {\n  children: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.oneOf<BaseInputType>([\n    'text',\n    'email',\n    'number',\n    'date',\n    'checkbox',\n    'textarea',\n  ]).isRequired,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n}\n\ntype BaseInputChildrenComponentProps = Omit<\n  BaseInputComponentProps,\n  'children'\n> & {\n  handleChange: (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => void\n}\n\nexport interface BaseInputComponentProps {\n  ref?: RefObject<any>\n  children?: (props: BaseInputChildrenComponentProps) => ReactNode\n  name: string\n  onChange?: (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => void\n  placeholder?: string\n}\n\nexport type LineItemType =\n  | 'gift_cards'\n  | 'paymentMethods'\n  | 'promotions'\n  | 'shipments'\n  | 'skus'\n\nexport type GiftCardInputName =\n  | 'balanceCents'\n  | 'balanceMaxCents'\n  | 'singleUse'\n  | 'rechargeable'\n  | 'imageUrl'\n  | 'expiresAt'\n  | 'referenceOrigin'\n  | 'email'\n  | 'firstName'\n  | 'lastName'\n  | 'reference'\n\nexport type AddressInputName =\n  | 'billing_address_city'\n  | 'billing_address_company'\n  | 'billing_address_first_name'\n  | 'billing_address_email'\n  | 'billing_address_last_name'\n  | 'billing_address_line_1'\n  | 'billing_address_line_2'\n  | 'billing_address_phone'\n  | 'billing_address_state_code'\n  | 'billing_address_zip_code'\n  | 'billing_address_save_to_customer_book'\n  | 'shipping_address_city'\n  | 'shipping_address_company'\n  | 'shipping_address_email'\n  | 'shipping_address_first_name'\n  | 'shipping_address_last_name'\n  | 'shipping_address_line_1'\n  | 'shipping_address_line_2'\n  | 'shipping_address_phone'\n  | 'shipping_address_state_code'\n  | 'shipping_address_zip_code'\n  | 'shipping_address_save_to_customer_book'\n\nexport type AddressCountrySelectName =\n  | 'billing_address_country_code'\n  | 'shipping_address_country_code'\n\nexport type BaseInputType =\n  | 'checkbox'\n  | 'date'\n  | 'email'\n  | 'number'\n  | 'tel'\n  | 'text'\n  | 'textarea'\n\nexport type LoaderType = string | ReactElementLike\n\nexport const BMObject = PropTypes.objectOf(PropTypes.string)\nexport type BaseMetadataObject = {\n  [key: string]: string | undefined | null\n}\n\nexport type TimeFormat = 'days' | 'hours'\n\nexport type BaseComponent = InferProps<typeof BC>\n\nexport interface BaseAction<A = string> {\n  type: A\n  payload: Record<string, any>\n}\n\nexport interface BaseState {\n  [key: string]: any\n  errors?: BaseError[]\n}\n\nexport type BaseActionType<T = string> = T[]\n\nexport interface BFSetStateContainer<T> {\n  <P extends T>(param: P): void\n}\n\nexport interface BaseReducer {\n  <S extends BaseState, A extends BaseAction, T extends BaseActionType>(\n    state: S,\n    action: A,\n    type: T\n  ): S\n}\n\nexport interface BaseUnsetState<A> {\n  (dispatch: Dispatch<A>): void\n}\n\nexport interface BaseMetadata {\n  [key: string]: string | undefined | null\n}\n\nexport type BaseFormatPrice = 'formatted' | 'cents' | 'float'\n\nexport const baseOrderPricePropTypes = {\n  base: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  children: PropTypes.func,\n  format: PropTypes.oneOf<BaseFormatPrice>(['formatted', 'cents', 'float']),\n  ...BC,\n}\n\nexport const baseOrderComponentPricePropTypes = {\n  children: baseOrderPricePropTypes['children'],\n  format: baseOrderPricePropTypes['format'],\n  ...BC,\n}\n\nexport type BasePriceType = 'total' | 'option' | 'unit'\nexport type BaseSelectorType = 'select' | 'radio'\n\nexport type BaseAmountComponentChildren = Omit<BaseAmountComponent, 'children'>\n\nexport interface BaseAmountComponent\n  extends Partial<JSX.IntrinsicElements['span']> {\n  children?: (props: BaseAmountComponentChildren) => ReactNode\n  format?: BaseFormatPrice\n}\n\nexport interface FunctionChildren<P = Record<string, any>> {\n  (props: P): ReactNode\n}\n","import PropTypes from 'prop-types'\nimport { FunctionChildren } from './index'\n\nexport type CodeErrorType =\n  | 'EMPTY_ERROR'\n  | 'FILTER_NOT_ALLOWED'\n  | 'FORBIDDEN'\n  | 'INTERNAL_SERVER_ERROR'\n  | 'INVALID_DATA_FORMAT'\n  | 'INVALID_FIELD'\n  | 'INVALID_FIELD_FORMAT'\n  | 'INVALID_FIELD_VALUE'\n  | 'INVALID_FILTERS_SYNTAX'\n  | 'INVALID_FILTER_VALUE'\n  | 'INVALID_INCLUDE'\n  | 'INVALID_LINKS_OBJECT'\n  | 'INVALID_PAGE_OBJECT'\n  | 'INVALID_PAGE_VALUE'\n  | 'INVALID_RESOURCE'\n  | 'INVALID_SORT_CRITERIA'\n  | 'INVALID_TOKEN'\n  | 'KEY_NOT_INCLUDED_IN_URL'\n  | 'KEY_ORDER_MISMATCH'\n  | 'LOCKED'\n  | 'NOT_ACCEPTABLE'\n  | 'PARAM_MISSING'\n  | 'PARAM_NOT_ALLOWED'\n  | 'RECORD_NOT_FOUND'\n  | 'RECORD_NOT_FOUND'\n  | 'RELATION_EXISTS'\n  | 'SAVE_FAILED'\n  | 'TYPE_MISMATCH'\n  | 'UNAUTHORIZED'\n  | 'UNSUPPORTED_MEDIA_TYPE'\n  | 'VALIDATION_ERROR'\n\nexport type ResourceErrorType =\n  | 'order'\n  | 'giftCard'\n  | 'lineItem'\n  | 'variant'\n  | 'price'\n  | 'skuOption'\n  | 'billingAddress'\n  | 'shippingAddress'\n  | 'address'\n\nconst CEType: CodeErrorType[] = [\n  'EMPTY_ERROR',\n  'FILTER_NOT_ALLOWED',\n  'FORBIDDEN',\n  'INTERNAL_SERVER_ERROR',\n  'INVALID_DATA_FORMAT',\n  'INVALID_FIELD',\n  'INVALID_FIELD_FORMAT',\n  'INVALID_FIELD_VALUE',\n  'INVALID_FILTERS_SYNTAX',\n  'INVALID_FILTER_VALUE',\n  'INVALID_INCLUDE',\n  'INVALID_LINKS_OBJECT',\n  'INVALID_PAGE_OBJECT',\n  'INVALID_PAGE_VALUE',\n  'INVALID_RESOURCE',\n  'INVALID_SORT_CRITERIA',\n  'INVALID_TOKEN',\n  'KEY_NOT_INCLUDED_IN_URL',\n  'KEY_ORDER_MISMATCH',\n  'LOCKED',\n  'NOT_ACCEPTABLE',\n  'PARAM_MISSING',\n  'PARAM_NOT_ALLOWED',\n  'RECORD_NOT_FOUND',\n  'RECORD_NOT_FOUND',\n  'RELATION_EXISTS',\n  'SAVE_FAILED',\n  'TYPE_MISMATCH',\n  'UNAUTHORIZED',\n  'UNSUPPORTED_MEDIA_TYPE',\n  'VALIDATION_ERROR',\n]\n\nexport interface BaseError {\n  code: CodeErrorType\n  message: string\n  resource?: ResourceErrorType | null\n  field?: string\n  id?: string\n}\n\nexport const REType: ResourceErrorType[] = [\n  'order',\n  'giftCard',\n  'lineItem',\n  'variant',\n  'price',\n  'skuOption',\n]\n\nexport const BaseErrorObject = PropTypes.shape({\n  code: PropTypes.oneOf(CEType).isRequired,\n  message: PropTypes.string.isRequired,\n  resource: PropTypes.oneOf(REType),\n  field: PropTypes.string,\n  id: PropTypes.string,\n})\n\nexport const ErrorPropTypes = {\n  resource: PropTypes.oneOf<ResourceErrorType>([\n    'order',\n    'giftCard',\n    'lineItem',\n    'variant',\n    'price',\n    'skuOption',\n    'billingAddress',\n    'shippingAddress',\n  ]).isRequired,\n  children: PropTypes.func,\n  field: PropTypes.string,\n  // messages: PropTypes.arrayOf(BaseErrorObject.isRequired),\n}\n\ntype ErrorChildrenComponentProps = FunctionChildren<\n  Omit<ErrorComponentProps, 'children'>\n>\n\nexport interface ErrorComponentProps {\n  resource: ResourceErrorType\n  children?: ErrorChildrenComponentProps\n  field?: string\n  messages?: {\n    code: CodeErrorType\n    message: string\n    resource?: ResourceErrorType\n    field?: string\n    id?: string\n  }[]\n}\n","import PropTypes from 'prop-types'\nimport childrenTypes from '#utils/childrenTypes'\nimport {\n  TimeFormat,\n  BaseInputType,\n  GiftCardInputName,\n  baseOrderComponentPricePropTypes,\n  LineItemType,\n  BasePriceType,\n  BaseFormatPrice,\n  PTLoader,\n  BMObject,\n  BaseSelectorType,\n  AddressInputName,\n  AddressCountrySelectName,\n} from '#typings'\nimport { ErrorPropTypes } from '#typings/errors'\nimport { BaseInputComponentPropTypes } from '#typings/index'\nimport { DeliveryLeadTimeField } from '../components/DeliveryLeadTime'\nimport { StockTransferFieldType } from '#components/StockTransferField'\n\nconst components = {\n  Address: {\n    permittedChildren: ['AddressField', 'ReactNode'],\n    displayName: 'Address',\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  AddressCountrySelector: {\n    displayName: 'AddressCountrySelector',\n    propTypes: {\n      children: PropTypes.func,\n      placeholder: PropTypes.shape({\n        label: PropTypes.string.isRequired,\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n          .isRequired,\n      }),\n      value: PropTypes.string,\n      name: PropTypes.oneOf<AddressCountrySelectName>([\n        'billing_address_country_code',\n        'shipping_address_country_code',\n      ]).isRequired,\n      required: PropTypes.bool,\n    },\n    defaultProps: {\n      required: true,\n    },\n  },\n  AddressField: {\n    displayName: 'AddressField',\n    propTypes: {\n      children: PropTypes.func,\n    },\n  },\n  AddressInput: {\n    displayName: 'AddressInput',\n    propTypes: {\n      children: PropTypes.func,\n      name: PropTypes.oneOf<AddressInputName>([\n        'billing_address_city',\n        'billing_address_company',\n        'billing_address_email',\n        'billing_address_first_name',\n        'billing_address_last_name',\n        'billing_address_line_1',\n        'billing_address_line_2',\n        'billing_address_phone',\n        'billing_address_state_code',\n        'billing_address_zip_code',\n        'billing_address_save_to_customer_book',\n        'shipping_address_city',\n        'shipping_address_company',\n        'shipping_address_email',\n        'shipping_address_first_name',\n        'shipping_address_last_name',\n        'shipping_address_line_1',\n        'shipping_address_line_2',\n        'shipping_address_phone',\n        'shipping_address_state_code',\n        'shipping_address_zip_code',\n        'shipping_address_save_to_customer_book',\n      ]).isRequired,\n      type: PropTypes.oneOf<BaseInputType>([\n        'checkbox',\n        'date',\n        'email',\n        'number',\n        'tel',\n        'text',\n        'textarea',\n      ]).isRequired,\n      placeholder: PropTypes.string,\n      disabled: PropTypes.bool,\n      required: PropTypes.bool,\n    },\n    defaultProps: {\n      required: true,\n    },\n  },\n  AddToCartButton: {\n    displayName: 'AddToCartButton',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n      skuCode: PropTypes.string,\n      disabled: PropTypes.bool,\n      lineItem: PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        imageUrl: PropTypes.string,\n      }),\n    },\n    defaultProps: {\n      label: 'Add to cart',\n    },\n  },\n  AddressesContainer: {\n    displayName: 'AddressesContainer',\n    permittedChildren: [\n      'BillingAddressForm',\n      'BillingAddressContainer',\n      'ShippingAddressForm',\n      'ShippingAddressContainer',\n      'SaveAddressesButton',\n      'ReactNode',\n    ],\n    propTypes: {\n      children: childrenTypes.isRequired,\n      shipToDifferentAddress: PropTypes.bool,\n    },\n  },\n  AvailabilityContainer: {\n    displayName: 'AvailabilityContainer',\n    permittedChildren: ['AvailabilityTemplate', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n      skuCode: PropTypes.string,\n    },\n  },\n  AvailabilityTemplate: {\n    displayName: 'AvailabilityTemplate',\n    propTypes: {\n      timeFormat: PropTypes.oneOf<TimeFormat>(['days', 'hours']),\n      showShippingMethodName: PropTypes.bool,\n      children: PropTypes.func,\n    },\n    defaultProps: {\n      timeFormat: 'days',\n      showShippingMethodName: false,\n    },\n  },\n  BillingAddressContainer: {\n    permittedChildren: ['Address', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  BillingAddressForm: {\n    permittedChildren: ['AddressInput', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  CheckoutLink: {\n    displayName: 'CheckoutLink',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n    },\n    defaultProps: {\n      label: 'Checkout',\n    },\n  },\n  CommerceLayer: {\n    permittedChildren: [\n      'OrderContainer',\n      'PricesContainer',\n      'GiftCardContainer',\n      'ReactNode',\n    ],\n    propTypes: {\n      children: childrenTypes.isRequired,\n      accessToken: PropTypes.string.isRequired,\n      endpoint: PropTypes.string.isRequired,\n    },\n  },\n  CustomerContainer: {\n    displayName: 'CustomerContainer',\n    permittedChildren: [\n      'CustomerInput',\n      'SaveCustomerButton',\n      'AddressesContainer',\n      'ReactNode',\n    ],\n    propTypes: {\n      children: childrenTypes.isRequired,\n      isGuest: PropTypes.bool,\n    },\n  },\n  CustomerInput: {\n    displayName: 'CustomerInput',\n    propTypes: {\n      children: PropTypes.func,\n      name: PropTypes.oneOf(['customerEmail']),\n      type: PropTypes.oneOf(['email']),\n      placeholder: PropTypes.string,\n      disabled: PropTypes.bool,\n      required: PropTypes.bool,\n      saveOnBlur: PropTypes.bool,\n    },\n    defaultProps: {\n      required: true,\n    },\n  },\n  DeliveryLeadTime: {\n    displayName: 'DeliveryLeadTime',\n    propTypes: {\n      type: PropTypes.oneOf<DeliveryLeadTimeField>([\n        'maxDays',\n        'maxHours',\n        'minDays',\n        'minHours',\n      ]).isRequired,\n      children: PropTypes.func,\n    },\n  },\n  DiscountAmount: {\n    displayName: 'DiscountAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n    defaultProps: {\n      format: 'formatted' as BaseFormatPrice,\n    },\n  },\n  Errors: {\n    displayName: 'Errors',\n    propTypes: ErrorPropTypes,\n    defaultProps: {\n      messages: [],\n      field: 'base',\n    },\n  },\n  ExternalFunction: {\n    displayName: 'ExternalFunction',\n    permittedChildren: ['AddToCartButton', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n      url: PropTypes.string.isRequired,\n    },\n  },\n  GiftCard: {\n    permittedChildren: [\n      'GiftCardCurrencySelector',\n      'GiftCardInput',\n      'Errors',\n      'MetadataInput',\n      'SubmitButton',\n      'ReactNode',\n    ],\n    displayName: 'GiftCard',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      onSubmit: PropTypes.func,\n    },\n    defaultProps: {\n      onSubmit: undefined,\n    },\n  },\n  GiftCardAmount: {\n    displayName: 'GiftCardAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n  },\n  GiftCardContainer: {\n    permittedChildren: ['GiftCard', 'Errors', 'ReactNode'],\n    displayName: 'GiftCardContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  GiftCardCurrencySelector: {\n    displayName: 'GiftCardCurrencySelector',\n    propTypes: {\n      children: PropTypes.func,\n      placeholder: PropTypes.shape({\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n          .isRequired,\n        label: PropTypes.string.isRequired,\n      }),\n      value: PropTypes.string,\n      required: PropTypes.bool,\n    },\n    defaultProps: {\n      required: true,\n    },\n  },\n  GiftCardInput: {\n    displayName: 'GiftCardInput',\n    propTypes: {\n      type: PropTypes.oneOf<BaseInputType>([\n        'text',\n        'email',\n        'number',\n        'date',\n        'checkbox',\n      ]).isRequired,\n      name: PropTypes.oneOf<GiftCardInputName>([\n        'balanceCents',\n        'balanceMaxCents',\n        'singleUse',\n        'rechargeable',\n        'imageUrl',\n        'expiresAt',\n        'referenceOrigin',\n        'email',\n        'firstName',\n        'lastName',\n        'reference',\n      ]).isRequired,\n      children: PropTypes.func,\n      placeholder: PropTypes.string,\n    },\n  },\n  ItemContainer: {\n    permittedChildren: [\n      'PricesContainer',\n      'VariantsContainer',\n      'SkuOptionContainer',\n      'QuantitySelector',\n      'AddToCartButton',\n      'AvailabilityContainer',\n      'SkuListsContainer',\n      'ReactNode',\n    ],\n    displayName: 'ItemContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      skuCode: PropTypes.string,\n      lineItem: PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        imageUrl: PropTypes.string,\n      }),\n    },\n  },\n  LineItem: {\n    permittedChildren: [\n      'LineItemImage',\n      'LineItemName',\n      'LineItemOptions',\n      'LineItemQuantity',\n      'LineItemAmount',\n      'LineItemRemoveLink',\n      'StockTransfer',\n      'Errors',\n      'ReactNode',\n    ],\n    displayName: 'LineItem',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      type: PropTypes.oneOf<LineItemType>([\n        'skus',\n        'gift_cards',\n        'shipments',\n        'paymentMethods',\n        'promotions',\n      ]),\n    },\n    defaultProps: {\n      type: 'skus',\n    },\n  },\n  LineItemAmount: {\n    displayName: 'LineItemAmount',\n    propTypes: {\n      ...baseOrderComponentPricePropTypes,\n      type: PropTypes.oneOf<BasePriceType>(['total', 'unit', 'option']),\n    },\n    defaultProps: {\n      format: 'formatted',\n      type: 'total',\n    },\n  },\n  LineItemImage: {\n    displayName: 'LineItemImage',\n    propTypes: {\n      width: PropTypes.number,\n      children: PropTypes.func,\n    },\n  },\n  LineItemName: {\n    displayName: 'LineItemName',\n    propTypes: {\n      children: PropTypes.func,\n    },\n  },\n  LineItemOption: {\n    displayName: 'LineItemOption',\n    propTypes: {\n      name: PropTypes.string.isRequired,\n      children: PropTypes.func,\n      valueClassName: PropTypes.string,\n      keyClassName: PropTypes.string,\n      keyId: PropTypes.string,\n      keyStyle: PropTypes.object,\n    },\n  },\n  LineItemOptions: {\n    permittedChildren: ['LineItemOption', 'ReactNode'],\n    displayName: 'LineItemOptions',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      title: PropTypes.string,\n      showName: PropTypes.bool,\n      skuOptionId: PropTypes.string.isRequired,\n    },\n    defaultProps: {\n      showName: true,\n    },\n  },\n  LineItemQuantity: {\n    displayName: 'LineItemQuantity',\n    propTypes: {\n      children: PropTypes.func,\n      max: PropTypes.number,\n      disabled: PropTypes.bool,\n      readonly: PropTypes.bool,\n    },\n    defaultProps: {\n      max: 50,\n    },\n  },\n  LineItemRemoveLink: {\n    displayName: 'LineItemRemoveLink',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n    },\n    defaultProps: {\n      label: 'Remove',\n    },\n  },\n  LineItemsContainer: {\n    permittedChildren: ['LineItemsCount', 'LineItem', 'ReactNode'],\n    displayName: 'LineItemsContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      filters: PropTypes.object,\n      loader: PTLoader,\n    },\n    defaultProps: {\n      filters: {},\n      loader: 'Loading...',\n    },\n  },\n  LineItemsCount: {\n    displayName: 'LineItemsCount',\n    propTypes: {\n      children: PropTypes.func,\n      id: PropTypes.string,\n      className: PropTypes.string,\n      name: PropTypes.string,\n      style: PropTypes.object,\n    },\n  },\n  MetadataInput: {\n    displayName: 'MetadataInput',\n    propTypes: BaseInputComponentPropTypes,\n  },\n  OrderContainer: {\n    permittedChildren: [\n      'AddressesContainer',\n      'CustomerContainer',\n      'ItemContainer',\n      'LineItemsContainer',\n      'SubTotalAmount',\n      'DiscountAmount',\n      'ShippingAmount',\n      'TaxesAmount',\n      'GiftCardAmount',\n      'TotalAmount',\n      'CheckoutLink',\n      'GiftCardContainer',\n      'ShipmentsContainer',\n      'ReactNode',\n    ],\n    displayName: 'OrderContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      orderId: PropTypes.string,\n      metadata: BMObject,\n      attributes: PropTypes.object,\n    },\n    defaultProps: {\n      metadata: {},\n    },\n  },\n  OrderStorage: {\n    permittedChildren: ['OrderContainer', 'ReactNode'],\n    displayName: 'OrderStorage',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      clearWhenPlaced: PropTypes.bool,\n      persistKey: PropTypes.string.isRequired,\n    },\n  },\n  Price: {\n    displayName: 'Price',\n    propTypes: {\n      children: PropTypes.func,\n      compareClassName: PropTypes.string,\n      skuCode: PropTypes.string,\n      showCompare: PropTypes.bool,\n    },\n    defaultProps: {\n      skuCode: '',\n    },\n  },\n  PricesContainer: {\n    permittedChildren: ['Price', 'ReactNode'],\n    displayName: 'PricesContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      skuCode: PropTypes.string,\n      loader: PTLoader,\n      perPage: PropTypes.number,\n      filters: PropTypes.object,\n    },\n    defaultProps: {\n      perPage: 10,\n      filters: {},\n      loader: 'Loading...',\n      skuCode: '',\n    },\n  },\n  QuantitySelector: {\n    displayName: 'QuantitySelector',\n    propTypes: {\n      children: PropTypes.func,\n      min: PropTypes.number,\n      max: PropTypes.number,\n      value: PropTypes.string,\n      skuCode: PropTypes.string,\n      disabled: PropTypes.bool,\n    },\n    defaultProps: {\n      min: 1,\n    },\n  },\n  SaveAddressesButton: {\n    displayName: 'SaveAddressesButton',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n      onClick: PropTypes.func,\n      disabled: PropTypes.bool,\n    },\n    defaultProps: {\n      label: 'Continue to delivery',\n    },\n  },\n  Shipment: {\n    permittedChildren: [\n      'LineItemsContainer',\n      'LineItem',\n      'ShippingMethod',\n      'ReactNode',\n    ],\n    displayName: 'Shipment',\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  ShipmentsContainer: {\n    displayName: 'ShipmentsContainer',\n    permittedChildren: ['Shipment', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  ShippingAddressContainer: {\n    permittedChildren: ['Address', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  SaveCustomerButton: {\n    displayName: 'SaveCustomerButton',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n      onClick: PropTypes.func,\n    },\n    defaultProps: {\n      label: 'Save',\n    },\n  },\n  ShippingAddressForm: {\n    permittedChildren: ['AddressInput', 'ReactNode'],\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  ShippingAmount: {\n    displayName: 'ShippingAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n  },\n  ShippingMethod: {\n    permittedChildren: [\n      'ShippingMethodName',\n      'ShippingMethodPrice',\n      'ShippingMethodRadioButton',\n      'DeliveryLeadTime',\n      'ReactNode',\n    ],\n    displayName: 'ShippingMethod',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      readonly: PropTypes.bool,\n    },\n  },\n  ShippingMethodName: {\n    displayName: 'ShippingMethodName',\n    propTypes: {\n      children: PropTypes.func,\n    },\n  },\n  ShippingMethodRadioButton: {\n    displayName: 'ShippingMethodRadioButton',\n    propTypes: {\n      children: PropTypes.func,\n    },\n  },\n  ShippingMethodPrice: {\n    displayName: 'ShippingMethodPrice',\n    propTypes: {\n      ...baseOrderComponentPricePropTypes,\n      type: PropTypes.oneOf<'amount'>(['amount']),\n    },\n    defaultProps: {\n      format: 'formatted',\n      type: 'amount',\n    },\n  },\n  SkuList: {\n    permittedChildren: ['AddToCartButton', 'QuantitySelector', 'ReactNode'],\n    displayName: 'SkuList',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      id: PropTypes.string.isRequired,\n    },\n  },\n  SkuListsContainer: {\n    permittedChildren: ['SkuList', 'ReactNode'],\n    displayName: 'SkuListsContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  SkuOption: {\n    permittedChildren: ['SkuOptionInput', 'ReactNode'],\n    displayName: 'SkuOption',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      id: PropTypes.string.isRequired,\n    },\n  },\n  SkuOptionInput: {\n    displayName: 'SkuOptionInput',\n    propTypes: BaseInputComponentPropTypes,\n  },\n  SkuOptionsContainer: {\n    permittedChildren: ['SkuOption', 'ReactNode'],\n    displayName: 'SkuOptionsContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      skuCode: PropTypes.string,\n    },\n  },\n  StockTransfer: {\n    permittedChildren: ['StockTransferField', 'ReactNode'],\n    displayName: 'StockTransfer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n    },\n  },\n  StockTransferField: {\n    displayName: 'StockTransferField',\n    propTypes: {\n      children: PropTypes.func,\n      type: PropTypes.oneOf<StockTransferFieldType>(['quantity', 'skuCode'])\n        .isRequired,\n    },\n  },\n  SubmitButton: {\n    displayName: 'SubmitButton',\n    propTypes: {\n      children: PropTypes.func,\n      label: PropTypes.string,\n    },\n    defaultProps: {\n      label: 'Submit',\n    },\n  },\n  SubTotalAmount: {\n    displayName: 'SubTotalAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n    defaultProps: {\n      format: 'formatted' as BaseFormatPrice,\n    },\n  },\n  TaxesAmount: {\n    displayName: 'TaxesAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n    defaultProps: {\n      format: 'formatted' as BaseFormatPrice,\n    },\n  },\n  TotalAmount: {\n    displayName: 'TotalAmount',\n    propTypes: baseOrderComponentPricePropTypes,\n    defaultProps: {\n      format: 'formatted' as BaseFormatPrice,\n    },\n  },\n  VariantsContainer: {\n    permittedChildren: ['VariantSelector', 'ReactNode'],\n    displayName: 'VariantsContainer',\n    propTypes: {\n      children: childrenTypes.isRequired,\n      skuCode: PropTypes.string,\n      filters: PropTypes.object,\n    },\n    defaultProps: {\n      skuCode: '',\n      filters: {},\n    },\n  },\n  VariantSelector: {\n    displayName: 'VariantSelector',\n    propTypes: {\n      options: PropTypes.arrayOf(\n        PropTypes.shape({\n          label: PropTypes.string.isRequired,\n          code: PropTypes.string.isRequired,\n          lineItem: PropTypes.shape({\n            name: PropTypes.string.isRequired,\n            imageUrl: PropTypes.string,\n          }),\n        }).isRequired\n      ).isRequired,\n      name: PropTypes.string,\n      children: PropTypes.func,\n      type: PropTypes.oneOf<BaseSelectorType>(['select', 'radio']),\n      loader: PropTypes.element,\n      placeholder: PropTypes.string,\n      skuCode: PropTypes.string,\n    },\n    defaultProps: {\n      placeholder: 'Select a variant',\n      type: 'select' as BaseSelectorType,\n    },\n  },\n}\n\nexport default components\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { SkuList } from '@commercelayer/js-sdk'\n\ntype SkuListsActionType = 'getSkuList' | 'setSkuList'\n\nconst actionType: SkuListsActionType[] = ['getSkuList', 'setSkuList']\n\nexport interface SkuListsState {\n  listIds: string[]\n  skuLists: SkuList\n}\n\nexport const skuListsInitialState: SkuListsState = {\n  listIds: [],\n  skuLists: {},\n}\n\nexport interface SkuListsAction {\n  payload: Partial<SkuListsState>\n  type: SkuListsActionType\n}\n\nexport type GetSkuList = (params: {\n  config: CommerceLayerConfig\n  dispatch: Dispatch<SkuListsAction>\n  listIds: string[]\n  state: SkuListsState\n}) => Promise<void>\n\nexport type SkuList = Record<string, string[]>\n\nexport const getSkuList: GetSkuList = async ({\n  listIds,\n  config,\n  dispatch,\n  // state,\n}) => {\n  const skuLists: Record<string, any> = {}\n  try {\n    listIds.map(async (id) => {\n      const skuList = await SkuList.withCredentials(config)\n        .includes('skus')\n        .select({ skus: ['code'] })\n        .find(id)\n      const skuCodes = skuList\n        .skus()\n        ?.toArray()\n        .map((sku) => sku.code)\n      skuLists[id] = skuCodes\n    })\n    dispatch({\n      payload: {\n        skuLists,\n      },\n      type: 'getSkuList',\n    })\n  } catch (error) {\n    console.error(error)\n    return error\n  }\n}\n\nconst skuListsReducer = (\n  state: SkuListsState,\n  reducer: SkuListsAction\n): SkuListsState =>\n  baseReducer<SkuListsState, SkuListsAction, SkuListsActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default skuListsReducer\n","import { createContext } from 'react'\nimport { skuListsInitialState } from '#reducers/SkuListsReducer'\n\nexport const SkuListsContext = createContext(skuListsInitialState)\n\nexport default SkuListsContext\n","import { createContext } from 'react'\nimport axios from 'axios'\n\ntype Context = {\n  url: string | null\n  callExternalFunction: CallExternalFunction\n}\n\ntype CallExternalFunction = (params: {\n  url: string\n  data: Record<string, any>\n}) => Promise<Record<string, any>>\n\nexport const callExternalFunction: CallExternalFunction = async ({\n  url,\n  data,\n}) => axios.post(url, data)\n\nconst ExternalFunctionContext = createContext<Context>({\n  url: null,\n  callExternalFunction,\n})\n\nexport default ExternalFunctionContext\n","import React, { FunctionComponent, useContext, PropsWithoutRef } from 'react'\nimport Parent from './utils/Parent'\nimport OrderContext from '#context/OrderContext'\nimport _ from 'lodash'\nimport ItemContext from '#context/ItemContext'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\nimport { AddToCartReturn } from '#reducers/OrderReducer'\nimport SkuListsContext from '#context/SkuListsContext'\nimport ExternalFunctionContext from '#context/ExternalFunctionContext'\nimport { VariantOptions } from '#components/VariantSelector'\n\nconst propTypes = components.AddToCartButton.propTypes\nconst defaultProps = components.AddToCartButton.defaultProps\nconst displayName = components.AddToCartButton.displayName\n\ntype AddToCartButtonChildrenProps = FunctionChildren<\n  {\n    handleClick: () => AddToCartReturn\n  } & Omit<AddToCartButtonProps, 'children'> &\n    PropsWithoutRef<JSX.IntrinsicElements['button']>\n>\n\ntype AddToCartButtonProps = {\n  children?: AddToCartButtonChildrenProps\n  label?: string\n  skuCode?: string\n  disabled?: boolean\n  skuListId?: string\n  lineItem?: VariantOptions['lineItem']\n} & PropsWithoutRef<JSX.IntrinsicElements['button']>\n\nconst AddToCartButton: FunctionComponent<AddToCartButtonProps> = (props) => {\n  const {\n    label = 'Add to cart',\n    children,\n    skuCode,\n    disabled,\n    skuListId,\n    lineItem,\n    ...p\n  } = props\n  const { addToCart, orderId, getOrder, setOrderErrors } = useContext(\n    OrderContext\n  )\n  const { url, callExternalFunction } = useContext(ExternalFunctionContext)\n  const {\n    item,\n    items,\n    quantity,\n    option,\n    prices,\n    lineItems,\n    lineItem: lineItemContext,\n    skuCode: itemSkuCode,\n  } = useContext(ItemContext)\n  const { skuLists } = useContext(SkuListsContext)\n  const sCode =\n    !_.isEmpty(items) && skuCode\n      ? items[skuCode]?.code\n      : skuCode || getCurrentItemKey(item) || (itemSkuCode as string)\n  const handleClick = () => {\n    const qty = quantity[sCode]\n    const opt = option[sCode]\n    const customLineItem = !_.isEmpty(lineItem || lineItemContext)\n      ? lineItem || lineItemContext\n      : lineItems[sCode]\n    if (!_.isEmpty(skuLists) && skuListId && url) {\n      const slQty = quantity[skuListId] || 1\n      if (_.has(skuLists, skuListId)) {\n        const lineItems = skuLists[skuListId].map((skuCode) => {\n          return {\n            skuCode,\n            quantity: slQty,\n            _update_quantity: 1,\n          }\n        })\n        return callExternalFunction({\n          url,\n          data: {\n            resourceType: 'orders',\n            inputs: [\n              {\n                id: orderId,\n                lineItems,\n              },\n            ],\n          },\n        })\n          .then((res) => {\n            getOrder && orderId && getOrder(orderId)\n            return res\n          })\n          .catch(({ response }) => {\n            setOrderErrors && setOrderErrors(response['data'])\n            return response\n          })\n      }\n    }\n    return !url\n      ? addToCart &&\n          addToCart({\n            skuCode: sCode,\n            skuId: item[sCode]?.id,\n            quantity: qty,\n            option: opt,\n            lineItem: customLineItem,\n          })\n      : callExternalFunction({\n          url,\n          data: {\n            skuCode: sCode,\n            skuId: item[sCode]?.id,\n            quantity: qty,\n            option: opt,\n            lineItem: customLineItem,\n          },\n        })\n          .then((res) => {\n            getOrder && orderId && getOrder(orderId)\n            return res\n          })\n          .catch(({ response }) => {\n            setOrderErrors && setOrderErrors(response['data'])\n            return response\n          })\n  }\n  const autoDisabled =\n    !_.isEmpty(skuLists) || skuListId\n      ? false\n      : disabled || !prices[sCode] || !sCode\n  const parentProps = {\n    handleClick,\n    disabled: disabled || autoDisabled,\n    label,\n    ...props,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <button disabled={autoDisabled} onClick={handleClick} {...p}>\n      {label}\n    </button>\n  )\n}\n\nAddToCartButton.propTypes = propTypes\nAddToCartButton.defaultProps = defaultProps\nAddToCartButton.displayName = displayName\n\nexport default AddToCartButton\n","import { createContext } from 'react'\nimport { AddressCollection } from '@commercelayer/js-sdk'\n\nexport interface InitialAddressContext {\n  address: AddressCollection | Record<string, any>\n}\n\nconst initial: InitialAddressContext = {\n  address: {},\n}\n\nconst AddressChildrenContext = createContext<InitialAddressContext>(initial)\n\nexport default AddressChildrenContext\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { BaseError } from '#typings/errors'\nimport {\n  AddressCollection,\n  CustomerAddress,\n  OrderCollection,\n} from '@commercelayer/js-sdk'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { getOrderContext } from './OrderReducer'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\n\nexport type CustomerActionType =\n  | 'setErrors'\n  | 'setCustomerEmail'\n  | 'setAddresses'\n\nexport interface CustomerActionPayload {\n  addresses: AddressCollection[]\n  customerEmail: string\n  errors: BaseError[]\n}\n\nexport type CustomerState = Partial<CustomerActionPayload>\n\nexport interface CustomerAction {\n  type: CustomerActionType\n  payload: Partial<CustomerActionPayload>\n}\n\nexport type SetSaveOnBlur = (args: {\n  saveOnBlur: boolean\n  dispatch: Dispatch<CustomerAction>\n}) => void\n\nexport type SaveCustomerUser = (args: {\n  config: CommerceLayerConfig\n  customerEmail: string\n  dispatch: Dispatch<CustomerAction>\n  order?: OrderCollection\n  getOrder: getOrderContext\n}) => Promise<void>\n\nexport const saveCustomerUser: SaveCustomerUser = async ({\n  config,\n  customerEmail,\n  dispatch,\n  order,\n  getOrder,\n}) => {\n  try {\n    if (order) {\n      const o = await order.withCredentials(config).update({ customerEmail })\n      getOrder(o.id)\n      dispatch({\n        type: 'setCustomerEmail',\n        payload: { customerEmail },\n      })\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nexport interface SetCustomerErrors {\n  <V extends BaseError[]>(errors: V, dispatch?: Dispatch<CustomerAction>): void\n}\n\nexport const setCustomerErrors: SetCustomerErrors = (errors, dispatch) => {\n  dispatch &&\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n}\n\nexport type SetCustomerEmail = (\n  customerEmail: string,\n  dispatch?: Dispatch<CustomerAction>\n) => void\n\nexport const setCustomerEmail: SetCustomerEmail = (customerEmail, dispatch) => {\n  dispatch &&\n    dispatch({\n      type: 'setCustomerEmail',\n      payload: {\n        customerEmail,\n      },\n    })\n}\n\nexport type GetCustomerAddresses = (params: {\n  config: CommerceLayerConfig\n  dispatch: Dispatch<CustomerAction>\n}) => Promise<void>\n\nexport const getCustomerAddresses: GetCustomerAddresses = async ({\n  config,\n  dispatch,\n}) => {\n  try {\n    const customerAddresses = await CustomerAddress.withCredentials(config)\n      .includes('address')\n      .all()\n    const addresses: any = customerAddresses\n      .toArray()\n      .map((customerAddress) => customerAddress.address())\n    dispatch({\n      type: 'setAddresses',\n      payload: { addresses },\n    })\n  } catch (col) {\n    const errors = getErrorsByCollection(col, 'address')\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n  }\n}\n\nexport const customerInitialState: CustomerState = {\n  errors: [],\n  addresses: [],\n}\n\nconst type: CustomerActionType[] = [\n  'setErrors',\n  'setCustomerEmail',\n  'setAddresses',\n]\n\nconst customerReducer = (\n  state: CustomerState,\n  reducer: CustomerAction\n): CustomerState =>\n  baseReducer<CustomerState, CustomerAction, CustomerActionType[]>(\n    state,\n    reducer,\n    type\n  )\n\nexport default customerReducer\n","import { AddressCollection } from '@commercelayer/js-sdk'\nimport {\n  SetCustomerEmail,\n  setCustomerErrors,\n  SetCustomerErrors,\n  setCustomerEmail,\n} from '#reducers/CustomerReducer'\nimport { BaseError } from '#typings/errors'\nimport { createContext } from 'react'\n\ntype DefaultContext = {\n  customerEmail?: string\n  errors?: BaseError[]\n  saveCustomerUser: (customerEmail: string) => Promise<void>\n  setCustomerErrors: SetCustomerErrors\n  setCustomerEmail: SetCustomerEmail\n  addresses?: AddressCollection[]\n}\n\nexport const defaultCustomerContext = {\n  saveCustomerUser: async (): Promise<void> => {\n    return\n  },\n  setCustomerErrors,\n  setCustomerEmail,\n}\n\nconst CustomerContext = createContext<DefaultContext>(defaultCustomerContext)\n\nexport default CustomerContext\n","import { createContext } from 'react'\nimport { BillingAddressState } from '#reducers/BillingAddressReducer'\n\ntype DefaultContext = {\n  setBillingAddress?: (\n    id: string,\n    options?: {\n      customerAddressId: string\n    }\n  ) => void\n} & BillingAddressState\n\nexport const defaultBillingAddressContext = {\n  setBillingAddress: (): void => {\n    return\n  },\n}\n\nconst BillingAddressContext = createContext<DefaultContext>(\n  defaultBillingAddressContext\n)\n\nexport default BillingAddressContext\n","import { createContext } from 'react'\nimport { ShippingAddressState } from '#reducers/ShippingAddressReducer'\n\ntype DefaultContext = {\n  setShippingAddress?: (\n    id: string,\n    options?: {\n      customerAddressId: string\n    }\n  ) => void\n} & ShippingAddressState\n\nexport const defaultShippingAddressContext = {}\n\nconst ShippingAddressContext = createContext<DefaultContext>(\n  defaultShippingAddressContext\n)\n\nexport default ShippingAddressContext\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { BaseError } from '#typings/errors'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Address, Order, OrderCollection } from '@commercelayer/js-sdk'\nimport _ from 'lodash'\n\nexport type AddressActionType =\n  | 'setErrors'\n  | 'setAddress'\n  | 'setShipToDifferentAddress'\n  | 'setCloneAddress'\n\nexport type AddressField =\n  | 'city'\n  | 'company'\n  | 'country_code'\n  | 'first_name'\n  | 'last_name'\n  | 'line_1'\n  | 'line_2'\n  | 'phone'\n  | 'state_code'\n  | 'zip_code'\n\nexport type AddressFieldView = AddressField | 'full_address'\n\nexport const addressFields: AddressField[] = [\n  'city',\n  'company',\n  'country_code',\n  'first_name',\n  'last_name',\n  'line_1',\n  'line_2',\n  'phone',\n  'state_code',\n  'zip_code',\n]\n\nexport type AddressResource = 'billingAddress' | 'shippingAddress'\n\nexport type AddressSchema = Record<AddressField, string>\n\nexport interface AddressActionPayload {\n  errors: BaseError[]\n  billingAddress: AddressSchema\n  shippingAddress: AddressSchema\n  shipToDifferentAddress: boolean\n  billingAddressId: string\n  shippingAddressId: string\n}\n\nexport type AddressState = Partial<AddressActionPayload>\n\nexport interface AddressAction {\n  type: AddressActionType\n  payload: Partial<AddressActionPayload>\n}\n\nexport const addressInitialState: AddressState = {\n  errors: [],\n}\n\nexport interface SetAddressErrors {\n  <V extends BaseError[]>(errors: V, dispatch?: Dispatch<AddressAction>): void\n}\n\nexport type SetAddressParams<V extends AddressSchema> = {\n  values: V\n  resource: AddressResource\n  dispatch?: Dispatch<AddressAction>\n}\n\nexport interface SetAddress {\n  <V extends AddressSchema | Record<string, any>>(\n    params: SetAddressParams<V>\n  ): void\n}\n\nexport interface SaveAddresses {\n  (params: {\n    orderId?: string\n    order?: OrderCollection | null\n    getOrder?: (orderId: string) => void\n    config: CommerceLayerConfig\n    state: AddressState\n    dispatch: Dispatch<AddressAction>\n  }): Promise<void>\n}\n\nexport const setAddressErrors: SetAddressErrors = (errors, dispatch) => {\n  dispatch &&\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n}\n\nexport const setAddress: SetAddress = ({ values, resource, dispatch }) => {\n  dispatch &&\n    dispatch({\n      type: 'setAddress',\n      payload: {\n        [`${resource}`]: values,\n      },\n    })\n}\n\ntype SetCloneAddress = (\n  id: string,\n  resource: 'billingAddress' | 'shippingAddress',\n  dispatch: Dispatch<AddressAction>\n) => void\n\nexport const setCloneAddress: SetCloneAddress = (id, resource, dispatch) => {\n  dispatch({\n    type: 'setCloneAddress',\n    payload: {\n      [`${resource}Id`]: id,\n    },\n  })\n}\n\nexport const saveAddresses: SaveAddresses = async ({\n  config,\n  getOrder,\n  order,\n  state,\n}) => {\n  const {\n    shipToDifferentAddress,\n    billingAddress,\n    shippingAddress,\n    billingAddressId,\n    shippingAddressId,\n  } = state\n  try {\n    const currentBillingAddressRef = order?.billingAddress()?.reference\n    const orderAttributes: Partial<Record<string, any>> = {\n      _billingAddressCloneId: billingAddressId,\n      _shippingAddressCloneId: billingAddressId,\n    }\n    if (currentBillingAddressRef === billingAddressId) {\n      orderAttributes._billingAddressCloneId = order?.billingAddress()?.id\n      orderAttributes._shippingAddressCloneId = order?.billingAddress()?.id\n    }\n    if (!_.isEmpty(billingAddress) && billingAddress) {\n      delete orderAttributes._billingAddressCloneId\n      delete orderAttributes._shippingAddressCloneId\n      orderAttributes._shippingAddressSameAsBilling = true\n      orderAttributes.billingAddress = await Address.withCredentials(\n        config\n      ).create(billingAddress)\n    }\n    if (shipToDifferentAddress) {\n      delete orderAttributes._shippingAddressSameAsBilling\n      if (shippingAddressId)\n        orderAttributes._shippingAddressCloneId = shippingAddressId\n      if (!_.isEmpty(shippingAddress) && shippingAddress) {\n        delete orderAttributes._shippingAddressCloneId\n        orderAttributes.shippingAddress = await Address.withCredentials(\n          config\n        ).create(shippingAddress)\n      }\n    }\n    if (order && getOrder && !_.isEmpty(orderAttributes)) {\n      const o = await Order.withCredentials(config).find(order.id)\n      await o.withCredentials(config).update(orderAttributes)\n      await getOrder(order.id)\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst type: AddressActionType[] = [\n  'setErrors',\n  'setAddress',\n  'setShipToDifferentAddress',\n  'setCloneAddress',\n]\n\nconst addressReducer = (\n  state: AddressState,\n  reducer: AddressAction\n): AddressState =>\n  baseReducer<AddressState, AddressAction, AddressActionType[]>(\n    state,\n    reducer,\n    type\n  )\n\nexport default addressReducer\n","import { createContext } from 'react'\nimport {\n  AddressState,\n  SetAddress,\n  SetAddressErrors,\n  setAddress,\n  setAddressErrors,\n} from '#reducers/AddressReducer'\n\ntype DefaultContext = {\n  saveAddresses: () => void\n  setCloneAddress: (\n    id: string,\n    resource: 'billingAddress' | 'shippingAddress'\n  ) => void\n  setAddress: SetAddress\n  setAddressErrors: SetAddressErrors\n} & AddressState\n\nexport const defaultAddressContext = {\n  saveAddresses: (): void => {\n    return\n  },\n  setCloneAddress: (): void => {\n    return\n  },\n  setAddress,\n  setAddressErrors,\n}\n\nconst AddressesContext = createContext<DefaultContext>(defaultAddressContext)\n\nexport default AddressesContext\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useContext,\n  ReactNode,\n  useState,\n  useEffect,\n} from 'react'\nimport AddressChildrenContext from '#context/AddressChildrenContext'\nimport components from '#config/components'\nimport CustomerContext from '#context/CustomerContext'\nimport BillingAddressContext from '#context/BillingAddressContext'\nimport ShippingAddressContext from '#context/ShippingAddressContext'\nimport { AddressCollection } from '@commercelayer/js-sdk'\nimport _ from 'lodash'\nimport AddressContext from '#context/AddressContext'\nimport OrderContext from '#context/OrderContext'\n\nconst propTypes = components.Address.propTypes\n\ntype Props = {\n  children: ReactNode\n  selectedClassName?: string\n  disabledClassName?: string\n  onSelect?: () => void\n  addresses?: AddressCollection[]\n  deselect?: boolean\n} & JSX.IntrinsicElements['div']\n\nconst Address: FunctionComponent<Props> = (props) => {\n  const {\n    children,\n    className,\n    selectedClassName = '',\n    disabledClassName = '',\n    onSelect,\n    addresses = [],\n    deselect = false,\n    ...p\n  } = props\n  const { addresses: addressesContext } = useContext(CustomerContext)\n  const { setBillingAddress, billingCustomerAddressId } = useContext(\n    BillingAddressContext\n  )\n  const { setShippingAddress, shippingCustomerAddressId } = useContext(\n    ShippingAddressContext\n  )\n  const {\n    shipToDifferentAddress,\n    billingAddressId,\n    shippingAddressId,\n    // setCloneAddress,\n    // setShippingCustomerAddressId,\n  } = useContext(AddressContext)\n  const { order } = useContext(OrderContext)\n  const [selected, setSelected] = useState<null | number | undefined>(null)\n  const items = !_.isEmpty(addresses)\n    ? addresses\n    : (addressesContext && addressesContext) || []\n  useEffect(() => {\n    if (items && !deselect) {\n      items.map((address, k) => {\n        if (billingCustomerAddressId) {\n          const preselected = address.reference === billingCustomerAddressId\n          if (preselected && selected === null) {\n            setSelected(k)\n          }\n        }\n        if (!billingAddressId && k === selected) {\n          setBillingAddress &&\n            setBillingAddress(address.id, {\n              customerAddressId: address.customerAddressId as string,\n            })\n        }\n        if (shippingCustomerAddressId) {\n          const preselected = address.reference === shippingCustomerAddressId\n          preselected && selected === null && setSelected(k)\n        }\n        if (!shippingAddressId && k === selected) {\n          setShippingAddress &&\n            setShippingAddress(address.id, {\n              customerAddressId: address.customerAddressId as string,\n            })\n        }\n      })\n    }\n    if (deselect) {\n      const disabledSaveButton = async () => {\n        setBillingAddress && (await setBillingAddress(''))\n        setShippingAddress && (await setShippingAddress(''))\n      }\n      disabledSaveButton()\n    }\n  }, [\n    deselect,\n    billingCustomerAddressId,\n    shippingCustomerAddressId,\n    addressesContext,\n    shipToDifferentAddress,\n  ])\n  const handleSelect = async (\n    k: number,\n    addressId: string,\n    customerAddressId: string,\n    disabled: boolean\n  ) => {\n    !disabled && setSelected(k)\n    setBillingAddress &&\n      (await setBillingAddress(addressId, { customerAddressId }))\n    !disabled &&\n      setShippingAddress &&\n      (await setShippingAddress(addressId, { customerAddressId }))\n    onSelect && onSelect()\n  }\n  const components = items.map((address, k) => {\n    const addressProps = {\n      address,\n    }\n    const countryLock = order?.shippingCountryCodeLock\n    const disabled =\n      (setShippingAddress &&\n        countryLock &&\n        countryLock !== address.countryCode) ||\n      false\n    const selectedClass = deselect ? '' : selectedClassName\n    const addressSelectedClass =\n      selected === k ? `${className} ${selectedClass}` : className\n    const customerAddressId: string = address?.customerAddressId || ''\n    const finalClassName = disabled\n      ? `${className} ${disabledClassName}`\n      : addressSelectedClass\n    return (\n      <AddressChildrenContext.Provider key={k} value={addressProps}>\n        <div\n          className={finalClassName}\n          onClick={() =>\n            handleSelect(k, address.id, customerAddressId, disabled)\n          }\n          data-disabled={disabled}\n          {...p}\n        >\n          {children}\n        </div>\n      </AddressChildrenContext.Provider>\n    )\n  })\n  return <Fragment>{components}</Fragment>\n}\n\nAddress.propTypes = propTypes\n\nexport default Address\n","import React, { ForwardRefRenderFunction } from 'react'\nimport Parent from './Parent'\nimport { BaseSelectComponentProps } from '#typings'\nimport _ from 'lodash'\n\nexport type BaseSelectProps = BaseSelectComponentProps\n\nconst BaseSelect: ForwardRefRenderFunction<any, BaseSelectProps> = (\n  props,\n  ref\n) => {\n  const {\n    options = [],\n    children,\n    placeholder = { label: 'Select an option', value: '' },\n    value = '',\n    ...p\n  } = props\n  if (_.findIndex(options, placeholder) === -1) {\n    options.unshift(placeholder)\n  } else {\n    options[0] = placeholder\n  }\n  const Options = options.map((o, k) => {\n    const { label, ...option } = o\n    return (\n      <option key={k} {...option}>\n        {label}\n      </option>\n    )\n  })\n  const parentProps = {\n    options,\n    ref,\n    ...p,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <select ref={ref} defaultValue={value} {...p}>\n      {Options}\n    </select>\n  )\n}\n\nexport default React.forwardRef(BaseSelect)\n","import { createContext, RefObject } from 'react'\nimport { AddressCountrySelectName, AddressInputName } from '#typings'\nimport { AddressField } from '#reducers/AddressReducer'\n\ntype DefaultContext = {\n  validation?: () => RefObject<any>\n  setValue?: (\n    name: AddressField | AddressInputName | AddressCountrySelectName,\n    value: any\n  ) => void\n}\n\nconst BillingAddressFormContext = createContext<DefaultContext>({})\n\nexport default BillingAddressFormContext\n","import { createContext, RefObject } from 'react'\nimport { AddressField } from '#reducers/AddressReducer'\nimport { AddressCountrySelectName, AddressInputName } from '#typings'\n\ntype DefaultContext = {\n  validation?: () => RefObject<any>\n  setValue?: (\n    name: AddressField | AddressInputName | AddressCountrySelectName,\n    value: any\n  ) => void\n}\n\nconst ShippingAddressFormContext = createContext<DefaultContext>({})\n\nexport default ShippingAddressFormContext\n","import React, { FunctionComponent, useContext, useEffect } from 'react'\nimport BaseSelect from './utils/BaseSelect'\nimport countriesOptions from '#config/countries.json'\nimport components from '#config/components'\nimport { AddressCountrySelectName, BaseSelectComponentProps } from '#typings'\nimport BillingAddressFormContext from '#context/BillingAddressFormContext'\nimport ShippingAddressFormContext from '#context/ShippingAddressFormContext'\n\nconst propTypes = components.AddressCountrySelector.propTypes\nconst defaultProps = components.AddressCountrySelector.defaultProps\nconst displayName = components.AddressCountrySelector.displayName\n\ntype AddressCountrySelectorProps = Omit<\n  BaseSelectComponentProps,\n  'options' | 'name'\n> & {\n  name: AddressCountrySelectName\n  required?: boolean\n} & Pick<JSX.IntrinsicElements['select'], 'className' | 'id' | 'style'>\n\nconst AddressCountrySelector: FunctionComponent<AddressCountrySelectorProps> = (\n  props\n) => {\n  const { required = true, value, name } = props\n  const billingAddress = useContext(BillingAddressFormContext)\n  const shippingAddress = useContext(ShippingAddressFormContext)\n  useEffect(() => {\n    if (value && billingAddress?.setValue) {\n      billingAddress.setValue(name, value)\n    }\n    if (value && shippingAddress?.setValue) {\n      shippingAddress.setValue(name, value)\n    }\n  }, [value])\n  return (\n    <BaseSelect\n      ref={billingAddress?.validation || shippingAddress?.validation}\n      required={required}\n      options={countriesOptions}\n      {...props}\n    />\n  )\n}\n\nAddressCountrySelector.propTypes = propTypes\nAddressCountrySelector.defaultProps = defaultProps\nAddressCountrySelector.displayName = displayName\n\nexport default AddressCountrySelector\n","import React, { useContext, FunctionComponent, ReactNode } from 'react'\nimport AddressChildrenContext from '#context/AddressChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { AddressFieldView } from '#reducers/AddressReducer'\nimport _ from 'lodash'\n\nconst propTypes = components.AddressField.propTypes\nconst displayName = components.AddressField.displayName\n\ntype AddressFieldChildrenProps = Omit<AddressFieldProps, 'children'>\n\ntype AddressFieldProps = {\n  children?: (props: AddressFieldChildrenProps) => ReactNode\n  name: AddressFieldView\n} & JSX.IntrinsicElements['p']\n\nconst AddressField: FunctionComponent<AddressFieldProps> = (props) => {\n  const { name } = props\n  const { address } = useContext(AddressChildrenContext)\n  const key = _.camelCase(name)\n  const text = _.get(address, key)\n  const parentProps = {\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <p {...props}>{text}</p>\n  )\n}\n\nAddressField.propTypes = propTypes\nAddressField.displayName = displayName\n\nexport default AddressField\n","import React, { ForwardRefRenderFunction } from 'react'\nimport { BaseInputComponentProps } from '#typings/index'\nimport Parent from './Parent'\n\nexport type BaseInputProps = BaseInputComponentProps &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst BaseInput: ForwardRefRenderFunction<any, BaseInputProps> = (\n  props,\n  ref\n) => {\n  const { children, ...p } = props\n  const input =\n    props.type === 'textarea' ? (\n      <textarea ref={ref} {...p} />\n    ) : (\n      <input ref={ref} {...p} />\n    )\n  return children ? <Parent {...p}>{children}</Parent> : input\n}\n\nexport default React.forwardRef(BaseInput)\n","import React, { FunctionComponent, useContext, useEffect } from 'react'\nimport BaseInput from './utils/BaseInput'\nimport components from '#config/components'\nimport { BaseInputComponentProps, AddressInputName } from '#typings'\nimport BillingAddressFormContext from '#context/BillingAddressFormContext'\nimport ShippingAddressFormContext from '#context/ShippingAddressFormContext'\n\nconst propTypes = components.AddressInput.propTypes\nconst displayName = components.AddressInput.displayName\n\nexport type AddressInputProps = {\n  name: AddressInputName\n} & Omit<BaseInputComponentProps, 'name'> &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst AddressInput: FunctionComponent<AddressInputProps> = (props) => {\n  const { placeholder = '', required, value, ...p } = props\n  const billingAddress = useContext(BillingAddressFormContext)\n  const shippingAddress = useContext(ShippingAddressFormContext)\n  useEffect(() => {\n    if (value && billingAddress?.setValue) {\n      billingAddress.setValue(p.name, value)\n    }\n    if (value && shippingAddress?.setValue) {\n      shippingAddress.setValue(p.name, value)\n    }\n  }, [value])\n  return (\n    <BaseInput\n      ref={billingAddress?.validation || shippingAddress?.validation}\n      required={required !== undefined ? required : true}\n      placeholder={placeholder}\n      defaultValue={value}\n      {...p}\n    />\n  )\n}\n\nAddressInput.propTypes = propTypes\nAddressInput.displayName = displayName\n\nexport default AddressInput\n","import { createContext } from 'react'\n\nexport interface CommerceLayerConfig {\n  accessToken: string\n  endpoint: string\n  cache: boolean\n}\n\nconst initial: CommerceLayerConfig = {\n  accessToken: '',\n  endpoint: '',\n  cache: false,\n}\n\nconst CommerceLayerContext = createContext(initial)\n\nexport default CommerceLayerContext\n","import AddressesContext, {\n  defaultAddressContext,\n} from '#context/AddressContext'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react'\nimport addressReducer, {\n  addressInitialState,\n  AddressSchema,\n  SetAddressParams,\n  setCloneAddress,\n} from '#reducers/AddressReducer'\nimport { BaseError } from '#typings/errors'\nimport OrderContext from '#context/OrderContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport { saveAddresses } from '#reducers/AddressReducer'\nimport components from '#config/components'\n\nconst propTypes = components.AddressesContainer.propTypes\nconst displayName = components.AddressesContainer.displayName\n\nexport type AddressesContainer = {\n  children: ReactNode\n  shipToDifferentAddress?: boolean\n}\nconst AddressesContainer: FunctionComponent<AddressesContainer> = (props) => {\n  const { children, shipToDifferentAddress = false } = props\n  const [state, dispatch] = useReducer(addressReducer, addressInitialState)\n  const { order, orderId, getOrder } = useContext(OrderContext)\n  const config = useContext(CommerceLayerContext)\n  useEffect(() => {\n    dispatch({\n      type: 'setShipToDifferentAddress',\n      payload: {\n        shipToDifferentAddress,\n      },\n    })\n  }, [shipToDifferentAddress])\n  const contextValue = {\n    ...state,\n    setAddressErrors: (errors: BaseError[]) =>\n      defaultAddressContext['setAddressErrors'](errors, dispatch),\n    setAddress: (params: SetAddressParams<AddressSchema>) =>\n      defaultAddressContext['setAddress']({ ...params, dispatch }),\n    saveAddresses: async (): Promise<void> =>\n      await saveAddresses({\n        config,\n        dispatch,\n        getOrder,\n        order,\n        orderId,\n        state,\n      }),\n    setCloneAddress: (\n      id: string,\n      resource: 'billingAddress' | 'shippingAddress'\n    ): void => setCloneAddress(id, resource, dispatch),\n  }\n  return (\n    <AddressesContext.Provider value={contextValue}>\n      {children}\n    </AddressesContext.Provider>\n  )\n}\n\nAddressesContainer.propTypes = propTypes\nAddressesContainer.displayName = displayName\n\nexport default AddressesContainer\n","import baseReducer from '#utils/baseReducer'\nimport { BaseError } from '#typings/errors'\nimport { Sku } from '@commercelayer/js-sdk'\nimport _ from 'lodash'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Dispatch } from 'react'\n\nexport interface LeadTimes {\n  hours: number\n  days: number\n}\n\nexport interface ShippingMethod {\n  name: string\n  reference: null | string\n  priceAmountCents: number\n  freeOverAmountCents: null | number\n  formattedPriceAmount: string\n  formattedFreeOverAmount: null | string\n}\n\nexport interface AvailabilityPayload {\n  quantity?: number | null\n  shippingMethod?: ShippingMethod\n  errors?: BaseError[]\n}\n\nexport interface AvailabilityState extends AvailabilityPayload {\n  min: LeadTimes\n  max: LeadTimes\n}\n\nexport interface AvailabilityAction {\n  type: AvailabilityActionType\n  payload: AvailabilityPayload\n}\n\nexport const availabilityInitialState: AvailabilityState = {\n  quantity: null,\n  min: {\n    days: 0,\n    hours: 0,\n  },\n  max: {\n    days: 0,\n    hours: 0,\n  },\n  errors: [],\n}\n\ninterface GetAvailability {\n  (args: {\n    skuCode: string\n    dispatch: Dispatch<AvailabilityAction>\n    config: CommerceLayerConfig\n  }): void\n}\n\nexport const getAvailability: GetAvailability = async ({\n  skuCode,\n  dispatch,\n  config,\n}) => {\n  const sku = await Sku.withCredentials(config)\n    .select('id')\n    .where({ codeIn: skuCode })\n    .first()\n  const inventorySku = await Sku.withCredentials(config)\n    .select('inventory')\n    .find(sku.id)\n  const firstLevel = _.first(inventorySku?.inventory?.levels)\n  const firstDelivery = _.first(firstLevel?.deliveryLeadTimes)\n  dispatch({\n    type: 'setAvailability',\n    payload: { ...firstDelivery, quantity: firstLevel?.quantity },\n  })\n}\n\nexport type AvailabilityActionType = 'setAvailability' | 'setErrors'\n\nconst typeAction: AvailabilityActionType[] = ['setAvailability', 'setErrors']\n\nconst availabilityReducer = (\n  state: AvailabilityState,\n  reducer: AvailabilityAction\n): AvailabilityState =>\n  baseReducer<AvailabilityState, AvailabilityAction, AvailabilityActionType[]>(\n    state,\n    reducer,\n    typeAction\n  )\n\nexport default availabilityReducer\n","import { createContext } from 'react'\nimport { availabilityInitialState } from '#reducers/AvailabilityReducer'\n\nconst AvailabilityContext = createContext(availabilityInitialState)\n\nexport default AvailabilityContext\n","import React, {\n  useContext,\n  useReducer,\n  FunctionComponent,\n  useEffect,\n  ReactNode,\n} from 'react'\nimport availabilityReducer, {\n  availabilityInitialState,\n  getAvailability,\n} from '#reducers/AvailabilityReducer'\nimport AvailabilityContext from '#context/AvailabilityContext'\nimport _ from 'lodash'\nimport ItemContext from '#context/ItemContext'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport components from '#config/components'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\n\nconst propTypes = components.AvailabilityContainer.propTypes\nconst displayName = components.AvailabilityContainer.displayName\n\ntype AvailabilityContainerProps = {\n  children: ReactNode\n  skuCode?: string\n}\n\nconst AvailabilityContainer: FunctionComponent<AvailabilityContainerProps> = (\n  props\n) => {\n  const { children, skuCode } = props\n  const { item, skuCode: itemSkuCode } = useContext(ItemContext)\n  const config = useContext(CommerceLayerContext)\n  const [state, dispatch] = useReducer(\n    availabilityReducer,\n    availabilityInitialState\n  )\n  useEffect(() => {\n    const sCode = skuCode || getCurrentItemKey(item) || itemSkuCode\n    if (sCode) {\n      const firstLevel = _.first(item[sCode]?.inventory?.levels) || {\n        quantity: null,\n        deliveryLeadTimes: [],\n      }\n      if (!_.isEmpty(firstLevel) && firstLevel.deliveryLeadTimes.length > 0) {\n        const firstDelivery = _.first(firstLevel.deliveryLeadTimes)\n        dispatch({\n          type: 'setAvailability',\n          payload: { ...firstDelivery, quantity: firstLevel?.quantity },\n        })\n      } else if (config.accessToken) {\n        getAvailability({ skuCode: sCode, config, dispatch })\n      }\n    }\n    return (): void => {\n      dispatch({\n        type: 'setAvailability',\n        payload: {},\n      })\n    }\n  }, [config.accessToken, item, itemSkuCode])\n  return (\n    <AvailabilityContext.Provider value={{ ...state }}>\n      {children}\n    </AvailabilityContext.Provider>\n  )\n}\n\nAvailabilityContainer.propTypes = propTypes\nAvailabilityContainer.displayName = displayName\n\nexport default AvailabilityContainer\n","import React, { useContext, FunctionComponent } from 'react'\nimport AvailabilityContext from '#context/AvailabilityContext'\nimport Parent from './utils/Parent'\nimport _ from 'lodash'\nimport components from '#config/components'\nimport { TimeFormat, FunctionChildren } from '#typings/index'\nimport { LeadTimes, ShippingMethod } from '#reducers/AvailabilityReducer'\n\nconst propTypes = components.AvailabilityTemplate.propTypes\nconst defaultProps = components.AvailabilityTemplate\n  .defaultProps as AvailabilityTemplateProps\nconst displayName = components.AvailabilityTemplate.displayName\n\ntype AvailabilityTemplateChildrenProps = FunctionChildren<\n  Omit<AvailabilityTemplateProps, 'children'> & {\n    min: LeadTimes\n    max: LeadTimes\n    shippingMethod: ShippingMethod\n  }\n>\n\ntype AvailabilityTemplateProps = {\n  children?: AvailabilityTemplateChildrenProps\n  timeFormat?: TimeFormat\n  showShippingMethodName?: boolean\n} & JSX.IntrinsicElements['p']\n\nconst AvailabilityTemplate: FunctionComponent<AvailabilityTemplateProps> = (\n  props\n) => {\n  const { timeFormat, showShippingMethodName, children, ...p } = props\n  const { min, max, shippingMethod, quantity } = useContext(AvailabilityContext)\n  const mn = !_.isEmpty(min) ? min[`${timeFormat}`] : ''\n  const mx = !_.isEmpty(max) ? max[`${timeFormat}`] : ''\n  const text: string[] = []\n  const name =\n    showShippingMethodName && shippingMethod\n      ? `with ${shippingMethod.name}`\n      : ''\n  if (quantity && quantity > 0) {\n    text.push('Available')\n    if (mn && mx) {\n      text.push(`in ${mn} - ${mx} ${timeFormat} ${name}`)\n    }\n  } else if (quantity === 0) {\n    text.push('Out of stock')\n  }\n  const parentProps = {\n    min,\n    max,\n    shippingMethod,\n    quantity,\n    ...props,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <p {...p}>{text.join(' ')}</p>\n  )\n}\n\nAvailabilityTemplate.propTypes = propTypes\nAvailabilityTemplate.defaultProps = defaultProps\nAvailabilityTemplate.displayName = displayName\n\nexport default AvailabilityTemplate\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Address, OrderCollection } from '@commercelayer/js-sdk'\nimport { getOrderContext } from '#reducers/OrderReducer'\n\nexport type BillingAddressActionType =\n  | 'setBillingAddress'\n  | 'setBillingCustomerAddressId'\n\nexport interface BillingAddressActionPayload {\n  _billingAddressCloneId: string\n  billingCustomerAddressId: string\n}\n\nexport type BillingAddressState = Partial<BillingAddressActionPayload>\n\nexport interface BillingAddressAction {\n  type: BillingAddressActionType\n  payload: Partial<BillingAddressActionPayload>\n}\n\nexport const billingAddressInitialState: BillingAddressState = {\n  _billingAddressCloneId: '',\n}\n\nexport type SetBillingAddress = (\n  id: string,\n  options?: {\n    config: CommerceLayerConfig\n    dispatch: Dispatch<BillingAddressAction>\n    order?: OrderCollection\n    getOrder?: getOrderContext\n    shipToDifferentAddress?: boolean\n    customerAddressId?: string\n  }\n) => Promise<void>\n\nexport const setBillingAddress: SetBillingAddress = async (id, options) => {\n  try {\n    if (options?.order) {\n      if (options.customerAddressId) {\n        const address = await Address.withCredentials(options.config).find(id)\n        if (address.reference !== options.customerAddressId) {\n          await address.withCredentials(options.config).update({\n            reference: options.customerAddressId,\n          })\n        }\n      }\n      options.dispatch({\n        type: 'setBillingAddress',\n        payload: {\n          _billingAddressCloneId: id,\n        },\n      })\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n\ntype SetBillingCustomerAddressId = (args: {\n  customerAddressId: string\n  dispatch: Dispatch<BillingAddressAction>\n}) => void\n\nexport const setBillingCustomerAddressId: SetBillingCustomerAddressId = ({\n  customerAddressId,\n  dispatch,\n}) => {\n  dispatch({\n    type: 'setBillingCustomerAddressId',\n    payload: { billingCustomerAddressId: customerAddressId },\n  })\n}\n\nconst type: BillingAddressActionType[] = [\n  'setBillingAddress',\n  'setBillingCustomerAddressId',\n]\n\nconst billingAddressReducer = (\n  state: BillingAddressState,\n  reducer: BillingAddressAction\n): BillingAddressState =>\n  baseReducer<\n    BillingAddressState,\n    BillingAddressAction,\n    BillingAddressActionType[]\n  >(state, reducer, type)\n\nexport default billingAddressReducer\n","import BillingAddressContext from '#context/BillingAddressContext'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react'\nimport billingAddressReducer, {\n  billingAddressInitialState,\n  setBillingAddress,\n  setBillingCustomerAddressId,\n} from '#reducers/BillingAddressReducer'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport components from '#config/components'\nimport OrderContext from '#context/OrderContext'\nimport AddressContext from '#context/AddressContext'\n\nconst propTypes = components.BillingAddressContainer.propTypes\n\ntype Props = {\n  children: ReactNode\n}\nconst BillingAddressContainer: FunctionComponent<Props> = (props) => {\n  const { children } = props\n  const [state, dispatch] = useReducer(\n    billingAddressReducer,\n    billingAddressInitialState\n  )\n  const config = useContext(CommerceLayerContext)\n  const { order, getOrder } = useContext(OrderContext)\n  const { shipToDifferentAddress, setCloneAddress } = useContext(AddressContext)\n  useEffect(() => {\n    if (order) {\n      const customerAddressId = order.billingAddress()?.reference || ''\n      setBillingCustomerAddressId({\n        customerAddressId,\n        dispatch,\n      })\n      setCloneAddress(customerAddressId, 'billingAddress')\n    }\n  }, [order])\n  const contextValue = {\n    ...state,\n    setBillingAddress: async (\n      id: string,\n      options?: { customerAddressId: string }\n    ) => {\n      await setBillingAddress(id, {\n        config,\n        dispatch,\n        order,\n        getOrder,\n        shipToDifferentAddress,\n        customerAddressId: options?.customerAddressId,\n      })\n      setCloneAddress(id, 'billingAddress')\n    },\n  }\n  return (\n    <BillingAddressContext.Provider value={contextValue}>\n      {children}\n    </BillingAddressContext.Provider>\n  )\n}\n\nBillingAddressContainer.propTypes = propTypes\n\nexport default BillingAddressContainer\n","import AddressesContext from '#context/AddressContext'\nimport useRapidForm from 'rapid-form'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useRef,\n} from 'react'\nimport BillingAddressFormContext from '#context/BillingAddressFormContext'\nimport _ from 'lodash'\nimport { BaseError, CodeErrorType } from '#typings/errors'\nimport { AddressField } from '#reducers/AddressReducer'\nimport { AddressCountrySelectName, AddressInputName } from '#typings'\nimport components from '#config/components'\nimport OrderContext from '#context/OrderContext'\n\nconst propTypes = components.BillingAddressForm.propTypes\n\ntype BillingAddressFormProps = {\n  children: ReactNode\n  reset?: boolean\n} & Omit<JSX.IntrinsicElements['form'], 'onSubmit'>\n\nconst BillingAddressForm: FunctionComponent<BillingAddressFormProps> = (\n  props\n) => {\n  const { children, autoComplete = 'on', reset = false, ...p } = props\n  const { validation, values, errors, reset: resetForm } = useRapidForm()\n  const { setAddressErrors, setAddress } = useContext(AddressesContext)\n  const { saveAddressToCustomerBook } = useContext(OrderContext)\n  const ref = useRef<HTMLFormElement>(null)\n  useEffect(() => {\n    if (!_.isEmpty(errors)) {\n      const formErrors: BaseError[] = []\n      for (const fieldName in errors) {\n        const { code, message } = errors[fieldName]\n        formErrors.push({\n          code: code as CodeErrorType,\n          message,\n          resource: 'billingAddress',\n          field: fieldName,\n        })\n      }\n      !_.isEmpty(formErrors) && setAddressErrors(formErrors)\n    } else if (!_.isEmpty(values)) {\n      setAddressErrors([])\n      for (const name in values) {\n        const field = values[name]\n        if (field?.value) {\n          values[name.replace('billing_address_', '')] = field.value\n          delete values[name]\n        }\n        if (field?.type === 'checkbox') {\n          delete values[name]\n          saveAddressToCustomerBook('BillingAddress', field.checked)\n        }\n      }\n      setAddress({ values, resource: 'billingAddress' })\n    }\n    if (reset && (!_.isEmpty(values) || !_.isEmpty(errors))) {\n      saveAddressToCustomerBook &&\n        saveAddressToCustomerBook('BillingAddress', false)\n      if (ref) {\n        // debugger\n        ref.current?.reset()\n        resetForm({ target: ref.current } as any)\n        setAddressErrors([])\n        setAddress({ values: {}, resource: 'billingAddress' })\n      }\n    }\n  }, [errors, values, reset])\n  const setValue = (\n    name: AddressField | AddressInputName | AddressCountrySelectName,\n    value: any\n  ) => {\n    const field: any = {\n      [name.replace('billing_address_', '')]: value,\n    }\n    setAddress({ values: { ...values, ...field }, resource: 'billingAddress' })\n  }\n  return (\n    <BillingAddressFormContext.Provider value={{ validation, setValue }}>\n      <form ref={ref} autoComplete={autoComplete} {...p}>\n        {children}\n      </form>\n    </BillingAddressFormContext.Provider>\n  )\n}\n\nBillingAddressForm.propTypes = propTypes\n\nexport default BillingAddressForm\n","import React, { FunctionComponent, useContext } from 'react'\nimport OrderContext from '#context/OrderContext'\nimport components from '#config/components'\nimport Parent from './utils/Parent'\nimport { FunctionChildren } from '#typings/index'\n\nconst propTypes = components.CheckoutLink.propTypes\nconst defaultProps = components.CheckoutLink.defaultProps\nconst displayName = components.CheckoutLink.displayName\n\ntype CheckoutLinkChildrenProps = FunctionChildren<\n  Omit<CheckoutLinkProps, 'children'> & {\n    checkoutUrl: string\n  }\n>\n\ntype CheckoutLinkProps = {\n  children?: CheckoutLinkChildrenProps\n  label?: string\n} & JSX.IntrinsicElements['a']\n\nconst CheckoutLink: FunctionComponent<CheckoutLinkProps> = (props) => {\n  const { label, children, ...p } = props\n  const { order } = useContext(OrderContext)\n  const parentProps = {\n    checkoutUrl: order?.checkoutUrl,\n    label,\n    ...p,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <a href={order?.checkoutUrl} {...p}>\n      {label}\n    </a>\n  )\n}\n\nCheckoutLink.propTypes = propTypes\nCheckoutLink.defaultProps = defaultProps\nCheckoutLink.displayName = displayName\n\nexport default CheckoutLink\n","import React, { FunctionComponent, ReactNode } from 'react'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport components from '#config/components'\n\nconst propTypes = components.CommerceLayer.propTypes\n\ntype CommerceLayerProps = {\n  children: ReactNode\n  accessToken: string\n  endpoint: string\n  cache?: boolean\n}\n\nconst CommerceLayer: FunctionComponent<CommerceLayerProps> = (props) => {\n  const { children, cache = false, ...p } = props\n  return (\n    <CommerceLayerContext.Provider value={{ ...p, cache }}>\n      {children}\n    </CommerceLayerContext.Provider>\n  )\n}\n\nCommerceLayer.propTypes = propTypes\nCommerceLayer.defaultProps = {\n  cache: false,\n}\n\nexport default CommerceLayer\n","import React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react'\nimport customerReducer, {\n  customerInitialState,\n  getCustomerAddresses,\n} from '#reducers/CustomerReducer'\nimport OrderContext from '#context/OrderContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport components from '#config/components'\nimport { saveCustomerUser } from '#reducers/CustomerReducer'\nimport { getOrderContext } from '#reducers/OrderReducer'\nimport CustomerContext from '#context/CustomerContext'\nimport { defaultCustomerContext } from '#context/CustomerContext'\nimport { BaseError } from '#typings/errors'\nimport _ from 'lodash'\n\nconst propTypes = components.CustomerContainer.propTypes\nconst displayName = components.CustomerContainer.displayName\n\nexport type CustomerContainer = {\n  children: ReactNode\n  isGuest?: boolean\n}\nconst CustomerContainer: FunctionComponent<CustomerContainer> = (props) => {\n  const { children, isGuest = false } = props\n  const [state, dispatch] = useReducer(customerReducer, customerInitialState)\n  const { order, getOrder } = useContext(OrderContext)\n  const config = useContext(CommerceLayerContext)\n  useEffect(() => {\n    if (config.accessToken && _.isEmpty(state.addresses) && !isGuest) {\n      getCustomerAddresses({ config, dispatch })\n    }\n  }, [config.accessToken])\n  const contextValue = {\n    ...state,\n    saveCustomerUser: async (customerEmail: string) => {\n      await saveCustomerUser({\n        config,\n        customerEmail,\n        dispatch,\n        getOrder: getOrder as getOrderContext,\n        order,\n      })\n    },\n    setCustomerErrors: (errors: BaseError[]) =>\n      defaultCustomerContext['setCustomerErrors'](errors, dispatch),\n    setCustomerEmail: (customerEmail: string) =>\n      defaultCustomerContext['setCustomerEmail'](customerEmail, dispatch),\n  }\n  return (\n    <CustomerContext.Provider value={contextValue}>\n      {children}\n    </CustomerContext.Provider>\n  )\n}\n\nCustomerContainer.propTypes = propTypes\nCustomerContainer.displayName = displayName\n\nexport default CustomerContainer\n","import React, { FunctionComponent, useContext, useEffect } from 'react'\nimport BaseInput from './utils/BaseInput'\nimport components from '#config/components'\nimport { BaseInputComponentProps } from '#typings'\nimport useRapidForm from 'rapid-form'\nimport CustomerContext from '#context/CustomerContext'\nimport _ from 'lodash'\nimport { BaseError, CodeErrorType } from '#typings/errors'\n\nconst propTypes = components.CustomerInput.propTypes\nconst displayName = components.CustomerInput.displayName\n\ntype CustomerInputProps = {\n  name?: 'customer_email' | string\n  type?: 'email' | string\n  saveOnBlur?: boolean\n  onBlur?: () => void\n} & Omit<BaseInputComponentProps, 'name' | 'type' | 'onBlur'> &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst CustomerInput: FunctionComponent<CustomerInputProps> = (props) => {\n  const {\n    name = 'customer_email',\n    placeholder = '',\n    required = true,\n    saveOnBlur = false,\n    type = 'email',\n    value,\n    onBlur,\n    ...p\n  } = props\n  const { validation, values, errors } = useRapidForm()\n  const { saveCustomerUser, setCustomerErrors, setCustomerEmail } = useContext(\n    CustomerContext\n  )\n  const handleOnBlur = async () => {\n    if (saveOnBlur && _.isEmpty(errors) && !_.isEmpty(values)) {\n      await saveCustomerUser(values[name].value)\n      onBlur && onBlur()\n    }\n  }\n  useEffect(() => {\n    if (!_.isEmpty(errors)) {\n      const formErrors: BaseError[] = []\n      for (const fieldName in errors) {\n        const { code, message } = errors[fieldName]\n        formErrors.push({\n          code: code as CodeErrorType,\n          message,\n          resource: 'order',\n          field: fieldName,\n        })\n      }\n      !_.isEmpty(formErrors) && setCustomerErrors(formErrors)\n    } else if (!_.isEmpty(values)) {\n      setCustomerErrors([])\n      setCustomerEmail(values[name].value)\n    }\n  }, [errors])\n  return (\n    <BaseInput\n      name={name}\n      type={type}\n      ref={validation}\n      required={required}\n      placeholder={placeholder}\n      defaultValue={value}\n      onBlur={handleOnBlur}\n      {...p}\n    />\n  )\n}\n\nCustomerInput.propTypes = propTypes\nCustomerInput.displayName = displayName\n\nexport default CustomerInput\n","import _ from 'lodash'\n\nexport interface GetAmountInterface {\n  (base: string, type: string, format: string, obj: Record<string, any>):\n    | string\n    | number\n}\n\nconst getAmount: GetAmountInterface = (base, type, format, obj) => {\n  let v: any\n  _.keys(obj).map((k) => {\n    const key = k.toLowerCase()\n    const typeOne = `${format}${type}${base}`.toLowerCase()\n    const typeTwo = `${type}${base}${format}`.toLowerCase()\n    const typeThree = `${format}${base}${type}`.toLowerCase()\n    const typeFourth = `${base}${type}${format}`.toLowerCase()\n    if (key === typeOne) {\n      v = obj[k]\n    }\n    if (key === typeTwo) {\n      v = obj[k]\n    }\n    if (key === typeThree) {\n      v = obj[k]\n    }\n    if (key === typeFourth) {\n      v = obj[k]\n    }\n  })\n  return v\n}\n\nexport default getAmount\n","import OrderContext from '#context/OrderContext'\nimport getAmount from '#utils/getAmount'\nimport Parent from './Parent'\nimport React, {\n  FunctionComponent,\n  useState,\n  useEffect,\n  useContext,\n} from 'react'\nimport { PropsType } from '#utils/PropsType'\nimport { baseOrderPricePropTypes } from '#typings'\nimport _ from 'lodash'\n\nexport type BaseOrderPriceProps = PropsType<typeof baseOrderPricePropTypes> &\n  JSX.IntrinsicElements['span']\n\nconst BaseOrderPrice: FunctionComponent<BaseOrderPriceProps> = (props) => {\n  const { format, base, type, children, ...p } = props\n  const { order } = useContext(OrderContext)\n  const [price, setPrice] = useState('')\n  useEffect(() => {\n    const p = getAmount(\n      base,\n      type,\n      format || 'formatted',\n      order || {}\n    ) as string\n    setPrice(p)\n    return (): void => {\n      if (_.isEmpty(order)) {\n        setPrice('')\n      }\n    }\n  }, [order])\n  const parentProps = {\n    price,\n    ...p,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <span {...p}>{price}</span>\n  )\n}\n\nBaseOrderPrice.propTypes = baseOrderPricePropTypes\nBaseOrderPrice.defaultProps = {\n  format: 'formatted',\n}\n\nexport default BaseOrderPrice\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.DiscountAmount.propTypes\nconst defaultProps = components.DiscountAmount.defaultProps\nconst displayName = components.DiscountAmount.displayName\n\nconst DiscountAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"amount\" type=\"discount\" {...props} />\n}\n\nDiscountAmount.propTypes = propTypes\nDiscountAmount.defaultProps = defaultProps\nDiscountAmount.displayName = displayName\n\nexport default DiscountAmount\n","import baseReducer from '#utils/baseReducer'\nimport { CustomerCollection } from '@commercelayer/js-sdk'\nimport { BaseMetadata } from '#typings'\nimport CLayer, {\n  MarketCollection,\n  GiftCardRecipientCollection,\n} from '@commercelayer/js-sdk'\nimport { Dispatch } from 'react'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport _ from 'lodash'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\nimport { BaseError } from '#typings/errors'\n\nexport type GiftCardActionType =\n  | 'setAvailability'\n  | 'setGiftCardRecipient'\n  | 'setGiftCardErrors'\n  | 'setGiftCardLoading'\n\nexport interface GiftCardRecipientI {\n  email: string\n  firstName?: string\n  lastName?: string\n  referenceOrigin?: string\n  reference?: string\n  metadata?: BaseMetadata\n  customer?: CustomerCollection\n}\n\nexport interface GiftCardI {\n  currencyCode?: string\n  balanceCent?: number\n  balanceMaxCents?: number\n  singleUse?: boolean\n  rechargeable?: boolean\n  imageUrl?: string\n  expiresAt?: null | Date\n  firstName?: string\n  lastName?: string\n  email?: string\n  referenceOrigin?: string\n  recipientEmail?: string\n  reference?: string\n  metadata?: BaseMetadata\n  orderId?: string\n}\n\nexport interface GiftCardActionPayload extends GiftCardI {\n  market?: MarketCollection\n  giftCardRecipient?: GiftCardRecipientCollection\n  errors?: BaseError[]\n  loading?: boolean\n}\n\nexport interface GiftCardState extends GiftCardActionPayload {\n  currencyCode: string\n  balanceCent: number\n  addGiftCardRecipient?: (\n    values: GiftCardRecipientI & Record<string, any>\n  ) => void\n  addGiftCard?: (values: GiftCardI & Record<string, any>) => void\n  addGiftCardError?: (errors: BaseError[]) => void\n  addGiftCardLoading?: (loading: boolean) => void\n}\n\nexport interface GiftCardAction {\n  type: GiftCardActionType\n  payload: GiftCardActionPayload\n}\n\nexport const giftCardInitialState: GiftCardState = {\n  currencyCode: '',\n  balanceCent: 0,\n  singleUse: false,\n  rechargeable: true,\n  loading: false,\n  expiresAt: null,\n  errors: [],\n}\n\nexport interface AddGiftCardRecipient {\n  <V extends GiftCardRecipientI>(\n    values: V,\n    config: CommerceLayerConfig,\n    dispatch: Dispatch<GiftCardAction>\n  ): void\n}\n\nexport interface AddGiftCard {\n  <V extends GiftCardI>(\n    values: V,\n    configParameters: {\n      getOrder?: (id: string) => void\n      createOrder?: () => Promise<string>\n      config: CommerceLayerConfig\n      dispatch: Dispatch<GiftCardAction>\n    }\n  ): void\n}\n\nexport interface AddGiftCardError {\n  <V extends BaseError[]>(errors: V, dispatch: Dispatch<GiftCardAction>): void\n}\n\nexport interface AddGiftCardLoading {\n  <V extends boolean>(loading: V, dispatch: Dispatch<GiftCardAction>): void\n}\n\nexport const addGiftCardRecipient: AddGiftCardRecipient = async (\n  values,\n  config,\n  dispatch\n) => {\n  try {\n    const recipient = await CLayer.GiftCardRecipient.withCredentials(\n      config\n    ).create(values)\n    dispatch({\n      type: 'setGiftCardRecipient',\n      payload: {\n        giftCardRecipient: recipient,\n      },\n    })\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nexport const addGiftCardLoading: AddGiftCardLoading = (loading, dispatch) => {\n  dispatch({\n    type: 'setGiftCardLoading',\n    payload: {\n      loading,\n    },\n  })\n}\n\nexport const addGiftCard: AddGiftCard = async (\n  values,\n  { config, dispatch, getOrder, createOrder }\n) => {\n  try {\n    addGiftCardLoading(true, dispatch)\n    const { firstName, lastName, email, orderId, ...val } = values\n    const giftCardValue = {\n      recipientEmail: email,\n      ...val,\n    } as GiftCardI\n    const recipientValues: any = {}\n    const giftCard = await CLayer.GiftCard.withCredentials(config).create(\n      giftCardValue\n    )\n    if (firstName) recipientValues['firstName'] = firstName\n    if (lastName) recipientValues['lastName'] = lastName\n    if (!_.isEmpty(recipientValues)) {\n      await (\n        await giftCard.withCredentials(config).giftCardRecipient()\n      )?.update(recipientValues)\n    }\n    if (createOrder && getOrder) {\n      const id = orderId || (await createOrder())\n      if (id) {\n        const order = CLayer.Order.build({ id })\n        const item = CLayer.GiftCard.build({ id: giftCard.id })\n        await CLayer.LineItem.withCredentials(config).create({\n          quantity: 1,\n          order,\n          item,\n        })\n        getOrder && getOrder(id)\n      }\n    }\n    dispatch({\n      type: 'setGiftCardRecipient',\n      payload: {\n        ...giftCardValue,\n      },\n    })\n    addGiftCardLoading(false, dispatch)\n  } catch (r) {\n    const errors = getErrorsByCollection(r, 'giftCard')\n    dispatch({\n      type: 'setGiftCardErrors',\n      payload: {\n        errors,\n      },\n    })\n    addGiftCardLoading(false, dispatch)\n  }\n}\n\nexport const addGiftCardError: AddGiftCardError = (errors, dispatch) => {\n  dispatch({\n    type: 'setGiftCardErrors',\n    payload: {\n      errors,\n    },\n  })\n}\n\nconst type: GiftCardActionType[] = [\n  'setAvailability',\n  'setGiftCardRecipient',\n  'setGiftCardErrors',\n  'setGiftCardLoading',\n]\n\nconst giftCardReducer = (\n  state: GiftCardState,\n  reducer: GiftCardAction\n): GiftCardState =>\n  baseReducer<GiftCardState, GiftCardAction, GiftCardActionType[]>(\n    state,\n    reducer,\n    type\n  )\n\nexport default giftCardReducer\n","import { createContext } from 'react'\nimport {\n  giftCardInitialState,\n  GiftCardState,\n  GiftCardRecipientI,\n  GiftCardI,\n} from '#reducers/GiftCardReducer'\nimport { BaseError } from '#typings/errors'\n\nexport interface GCContext extends GiftCardState {\n  addGiftCardRecipient: (values: GiftCardRecipientI & object) => void\n  addGiftCard: (values: GiftCardI & object) => void\n  addGiftCardError: (errors: BaseError[]) => void\n  addGiftCardLoading: (loading: boolean) => void\n}\n\nconst GiftCardContext = createContext(giftCardInitialState as GCContext)\n\nexport default GiftCardContext\n","import _ from 'lodash'\nimport { BaseError } from '#typings/errors'\n\nexport interface CustomMessages {\n  (messages: BaseError[], v: BaseError): { message?: string } | undefined\n}\n\nconst customMessages: CustomMessages = (messages = [], v) => {\n  return _.first(\n    messages.filter((m) => {\n      if (m.field === v.field) {\n        return m.code === v.code\n      }\n      if (m.resource === v.resource) {\n        return m.code === v.code\n      }\n      return m.code === v.code\n    })\n  )\n}\n\nexport default customMessages\n","import React, { ReactNode } from 'react'\nimport customMessages from '#utils/customMessages'\nimport { LineItemCollection } from '@commercelayer/js-sdk'\nimport { BaseError, ResourceErrorType } from '#typings/errors'\n\nexport type AllErrorsParams = {\n  allErrors: BaseError[]\n  messages: BaseError[]\n  field: string | null\n  props: JSX.IntrinsicElements['span']\n  lineItem?: LineItemCollection | Record<string, any>\n  resource?: ResourceErrorType\n}\n\nexport interface GetAllErrors {\n  <P extends AllErrorsParams>(params: P): ReactNode\n}\n\nconst getAllErrors: GetAllErrors = (params) => {\n  const { allErrors, messages, field, props, lineItem, resource } = params\n  return allErrors.map((v, k): ReactNode | void => {\n    const objMsg = customMessages(messages, v)\n    if (field) {\n      if (v.resource === 'lineItem') {\n        return (\n          lineItem &&\n          v.id === lineItem['id'] && (\n            <span key={k} {...props}>\n              {objMsg?.message || v.message}\n            </span>\n          )\n        )\n      }\n      if (field === v.field && resource === v.resource) {\n        return (\n          <span key={k} {...props}>\n            {objMsg?.message || v.message}\n          </span>\n        )\n      }\n    }\n  })\n}\n\nexport default getAllErrors\n","import { createContext } from 'react'\nimport { LineItemState } from '#reducers/LineItemReducer'\nimport { LineItemCollection } from '@commercelayer/js-sdk'\n\nexport interface LineItemContextValue extends LineItemState {\n  lineItems: LineItemCollection[] | undefined\n}\n\nconst initial: LineItemContextValue = {\n  lineItems: [],\n}\n\nconst LineItemContext = createContext<LineItemContextValue>(initial)\n\nexport default LineItemContext\n","import { createContext } from 'react'\nimport { LineItemCollection } from '@commercelayer/js-sdk'\n\nexport interface InitialLineItemContext {\n  lineItem: LineItemCollection | Record<string, any>\n}\n\nconst initial: InitialLineItemContext = {\n  lineItem: {},\n}\n\nconst LineItemChildrenContext = createContext<InitialLineItemContext>(initial)\n\nexport default LineItemChildrenContext\n","import React, { FunctionComponent, useContext, Fragment } from 'react'\nimport Parent from './utils/Parent'\nimport GiftCardContext from '#context/GiftCardContext'\nimport OrderContext from '#context/OrderContext'\nimport AddressContext from '#context/AddressContext'\nimport getAllErrors from './utils/getAllErrors'\nimport LineItemContext from '#context/LineItemContext'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport { ErrorComponentProps } from '#typings/errors'\nimport components from '#config/components'\nimport CustomerContext from '#context/CustomerContext'\n\nconst propTypes = components.Errors.propTypes\nconst defaultProps = components.Errors.defaultProps\nconst displayName = components.Errors.displayName\n\nexport type ErrorsProps = ErrorComponentProps & JSX.IntrinsicElements['span']\n\nconst Errors: FunctionComponent<ErrorsProps> = (props) => {\n  const { children, messages = [], resource, field = 'base', ...p } = props\n  const { errors: orderErrors } = useContext(OrderContext)\n  const { errors: giftCardErrors } = useContext(GiftCardContext)\n  const { errors: lineItemErrors } = useContext(LineItemContext)\n  const { errors: addressErrors } = useContext(AddressContext)\n  const { errors: customerErrors } = useContext(CustomerContext)\n  const { lineItem } = useContext(LineItemChildrenContext)\n  // TODO add other errors\n  const allErrors = [\n    ...(giftCardErrors || []),\n    ...(orderErrors || []),\n    ...(lineItemErrors || []),\n    ...(addressErrors || []),\n    ...(customerErrors || []),\n  ]\n  const parentProps = { messages, resource, field, ...p }\n  const msgErrors = getAllErrors({\n    allErrors,\n    field,\n    messages,\n    props: p,\n    lineItem,\n    resource,\n  })\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <Fragment>{msgErrors}</Fragment>\n  )\n}\n\nErrors.propTypes = propTypes\nErrors.defaultProps = defaultProps\nErrors.displayName = displayName\n\nexport default Errors\n","import ExternalFunctionContext, {\n  callExternalFunction,\n} from '#context/ExternalFunctionContext'\nimport React, { FunctionComponent, ReactNode } from 'react'\nimport components from '#config/components'\n\nconst propTypes = components.ExternalFunction.propTypes\nconst displayName = components.ExternalFunction.displayName\n\ntype Props = {\n  children: ReactNode\n  url: string\n}\n\nconst ExternalFunction: FunctionComponent<Props> = ({ children, url }) => {\n  return (\n    <ExternalFunctionContext.Provider value={{ url, callExternalFunction }}>\n      {children}\n    </ExternalFunctionContext.Provider>\n  )\n}\n\nExternalFunction.propTypes = propTypes\nExternalFunction.displayName = displayName\n\nexport default ExternalFunction\n","import _ from 'lodash'\nimport { BaseState } from '#typings/index'\nimport { ResourceErrorType, BaseError } from '#typings/errors'\nimport {\n  AddressField,\n  addressFields,\n  AddressSchema,\n} from '#reducers/AddressReducer'\n\nconst EMAIL_PATTERN = /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$/\n\ntype FormField = HTMLInputElement | HTMLSelectElement\n\nexport interface ValidateFormFields {\n  <R extends string[]>(\n    fields: HTMLFormControlsCollection,\n    required: R,\n    resourceType: ResourceErrorType\n  ): {\n    errors: BaseError[]\n    values: BaseState\n  }\n}\n\nexport interface ValidateValue {\n  <\n    V extends string | boolean,\n    N extends string,\n    T extends string,\n    B extends ResourceErrorType\n  >(\n    val: V,\n    name: N,\n    type: T,\n    resourceType: B\n  ): BaseError | Record<string, any>\n}\n\nexport const validateValue: ValidateValue = (val, name, type, resourceType) => {\n  if (!val) {\n    return {\n      field: name,\n      code: 'VALIDATION_ERROR',\n      message: `${name} - is required`,\n      resourceType,\n    }\n  }\n  if (type === 'email' && _.isString(val) && !val.match(EMAIL_PATTERN)) {\n    return {\n      field: name,\n      code: 'VALIDATION_ERROR',\n      message: `${name} - is not valid`,\n      resourceType,\n    }\n  }\n  return {}\n}\n\nconst validateFormFields: ValidateFormFields = (\n  fields,\n  required,\n  resourceType\n) => {\n  const errors: BaseError[] = []\n  let values = { metadata: {} }\n  _.map(fields, (v: FormField) => {\n    const isTick = !!v['checked']\n    const val = isTick ? isTick : v.value === 'on' ? false : v.value\n    const attrName = v.getAttribute('name')\n    if ((attrName && required.indexOf(attrName) !== -1) || v.required) {\n      const error = validateValue(val, v.name, v.type, resourceType)\n      if (!_.isEmpty(error)) {\n        errors.push(error as BaseError)\n      }\n      values = { ...values, [`${v.name}`]: val }\n    }\n    if (v.getAttribute('name')) {\n      const isMetadata = !!v.getAttribute('data-metadata')\n      values = isMetadata\n        ? {\n            ...values,\n            metadata: { ...values.metadata, [`${v.name}`]: val },\n          }\n        : { ...values, [`${v.name}`]: val }\n    }\n  })\n  return { errors, values }\n}\n\nexport interface FieldsExist {\n  (values: AddressSchema, schema?: AddressField[]): boolean\n}\n\nexport const fieldsExist: FieldsExist = (values, schema = addressFields) => {\n  if (!values['business']) {\n    const required = _.without(schema, 'line_2', 'company')\n    return required.length > _.keys(values).length\n  } else {\n    const required = _.without(schema, 'first_name', 'last_name')\n    return required.length > _.keys(values).length\n  }\n}\n\nexport default validateFormFields\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useRef,\n  useContext,\n  RefObject,\n  ReactNode,\n} from 'react'\nimport validateFormFields from '#utils/validateFormFields'\nimport _ from 'lodash'\nimport GiftCardContext from '#context/GiftCardContext'\nimport { GiftCardI } from '#reducers/GiftCardReducer'\nimport components from '#config/components'\nimport { BaseState } from '#typings/index'\n\ntype RequiredFields = 'currencyCode' | 'balanceCents'\n\nconst propTypes = components.GiftCard.propTypes\nconst defaultProps = components.GiftCard.defaultProps\nconst displayName = components.GiftCard.displayName\n\ntype GiftCardProps = {\n  children: ReactNode\n  onSubmit?: (values: BaseState) => void\n} & JSX.IntrinsicElements['form']\n\nconst GiftCard: FunctionComponent<GiftCardProps> = (props) => {\n  const { children, onSubmit } = props\n  const name = 'giftCardForm'\n  const ref: RefObject<HTMLFormElement> = useRef<HTMLFormElement>(null)\n  const { addGiftCard, addGiftCardError } = useContext(GiftCardContext)\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>): void => {\n    e.preventDefault()\n    const currentForm = ref.current\n    const elements = currentForm?.elements as HTMLFormControlsCollection\n    const { errors, values } = validateFormFields<RequiredFields[]>(\n      elements,\n      ['currencyCode', 'balanceCents'],\n      'giftCard'\n    )\n    if (_.isEmpty(errors)) {\n      addGiftCard(values as GiftCardI)\n      currentForm?.reset()\n      if (onSubmit) {\n        onSubmit(values)\n      }\n    } else {\n      addGiftCardError(errors)\n    }\n  }\n  return (\n    <Fragment>\n      <form key={name} name={name} ref={ref} onSubmit={handleSubmit}>\n        {children}\n      </form>\n    </Fragment>\n  )\n}\n\nGiftCard.propTypes = propTypes\nGiftCard.defaultProps = defaultProps\nGiftCard.displayName = displayName\n\nexport default GiftCard\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.GiftCardAmount.propTypes\nconst displayName = components.GiftCardAmount.displayName\n\nconst GiftCardAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"amount\" type=\"giftcard\" {...props} />\n}\n\nGiftCardAmount.propTypes = propTypes\nGiftCardAmount.displayName = displayName\n\nexport default GiftCardAmount\n","import React, {\n  FunctionComponent,\n  useReducer,\n  useContext,\n  ReactNode,\n} from 'react'\nimport GiftCardContext from '#context/GiftCardContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport giftCardReducer, {\n  giftCardInitialState,\n  addGiftCardRecipient,\n  addGiftCard,\n  addGiftCardError,\n  addGiftCardLoading,\n} from '#reducers/GiftCardReducer'\nimport OrderContext from '#context/OrderContext'\nimport components from '#config/components'\n\nconst propTypes = components.GiftCardContainer.propTypes\nconst displayName = components.GiftCardContainer.displayName\n\nexport type GiftCardContainer = {\n  children: ReactNode\n}\n\nconst GiftCardContainer: FunctionComponent<GiftCardContainer> = (props) => {\n  const { children } = props\n  const [state, dispatch] = useReducer(giftCardReducer, giftCardInitialState)\n  const config = useContext(CommerceLayerContext)\n  const { orderId, getOrder, createOrder } = useContext(OrderContext)\n  const giftCardValue = {\n    ...state,\n    addGiftCardRecipient: (values: any): void =>\n      addGiftCardRecipient(values, config, dispatch),\n    addGiftCard: (values: any): void =>\n      addGiftCard(\n        { ...values, orderId },\n        { config, dispatch, getOrder, createOrder }\n      ),\n    addGiftCardError: (errors: any): void => addGiftCardError(errors, dispatch),\n    addGiftCardLoading: (loading: boolean): void =>\n      addGiftCardLoading(loading, dispatch),\n  }\n  return (\n    <GiftCardContext.Provider value={giftCardValue}>\n      {children}\n    </GiftCardContext.Provider>\n  )\n}\n\nGiftCardContainer.propTypes = propTypes\nGiftCardContainer.displayName = displayName\n\nexport default GiftCardContainer\n","import React, { FunctionComponent } from 'react'\nimport BaseSelect from './utils/BaseSelect'\nimport currencyOptions from '#config/currency.json'\nimport components from '#config/components'\nimport { BaseSelectComponentProps } from '#typings'\n\nconst propTypes = components.GiftCardCurrencySelector.propTypes\nconst defaultProps = components.GiftCardCurrencySelector.defaultProps\nconst displayName = components.GiftCardCurrencySelector.displayName\n\ntype GiftCardCurrencySelectorProps = Omit<\n  BaseSelectComponentProps,\n  'options' | 'name'\n> & {\n  required?: boolean\n} & Pick<JSX.IntrinsicElements['select'], 'className' | 'id' | 'style'>\n\nconst GiftCardCurrencySelector: FunctionComponent<GiftCardCurrencySelectorProps> = (\n  props\n) => {\n  return <BaseSelect options={currencyOptions} name=\"currencyCode\" {...props} />\n}\n\nGiftCardCurrencySelector.propTypes = propTypes\nGiftCardCurrencySelector.defaultProps = defaultProps\nGiftCardCurrencySelector.displayName = displayName\n\nexport default GiftCardCurrencySelector\n","import React, { FunctionComponent } from 'react'\nimport BaseInput from './utils/BaseInput'\nimport components from '#config/components'\nimport { BaseInputComponentProps, GiftCardInputName } from '#typings'\n\nconst propTypes = components.GiftCardInput.propTypes\nconst displayName = components.GiftCardInput.displayName\n\nexport type GiftCardInputProps = {\n  name: GiftCardInputName\n} & Omit<BaseInputComponentProps, 'name'> &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst GiftCardInput: FunctionComponent<GiftCardInputProps> = (props) => {\n  const { placeholder = '', ...p } = props\n  return <BaseInput placeholder={placeholder} {...p} />\n}\n\nGiftCardInput.propTypes = propTypes\nGiftCardInput.displayName = displayName\n\nexport default GiftCardInput\n","import { BaseUnsetState } from '#typings/index'\nimport { SkuCollection, PriceCollection } from '@commercelayer/js-sdk'\nimport { Dispatch } from 'react'\nimport baseReducer from '#utils/baseReducer'\n\nexport interface Items {\n  [skuCode: string]: SkuCollection\n}\n\nexport interface ItemPrices {\n  [skuCode: string]: PriceCollection\n}\n\nexport interface ItemQuantity {\n  [skuCode: string]: number\n}\n\nexport interface ItemOption {\n  [key: string]: {\n    skuOptionId: string\n    options: {\n      [key: string]: string\n    }\n  }\n}\n\nexport interface ItemOptions {\n  [skuCode: string]: ItemOption\n}\n\nexport type CustomLineItem = {\n  name?: string\n  imageUrl?: string | null\n}\n\nexport interface CustomLineItems {\n  [skuCode: string]: CustomLineItem\n}\n\ntype ItemParams = {\n  type: ItemActionType\n  key:\n    | 'items'\n    | 'item'\n    | 'quantity'\n    | 'option'\n    | 'prices'\n    | 'lineItem'\n    | 'lineItems'\n    | 'skuCode'\n}\n\ntype DataType =\n  | Items\n  | ItemQuantity\n  | ItemOptions\n  | ItemPrices\n  | CustomLineItems\n  | CustomLineItem\n  | string\n\nexport interface SetItemState {\n  (data: DataType, params: ItemParams, dispatch: Dispatch<ItemAction>): void\n}\n\n// TODO: Set to other reducer files\nexport const setItemState: SetItemState = (data, params, dispatch) => {\n  dispatch({\n    type: params.type,\n    payload: {\n      [`${params.key}`]: data,\n    },\n  })\n}\n\nexport const unsetItemState: BaseUnsetState<ItemAction> = (dispatch) => {\n  dispatch({\n    type: 'setItem',\n    payload: {\n      item: {},\n    },\n  })\n  dispatch({\n    type: 'setItems',\n    payload: {\n      items: {},\n    },\n  })\n  dispatch({\n    type: 'setQuantity',\n    payload: {\n      quantity: {},\n    },\n  })\n  dispatch({\n    type: 'setOption',\n    payload: {\n      option: {},\n    },\n  })\n  dispatch({\n    type: 'setCustomLineItems',\n    payload: {\n      lineItems: {},\n    },\n  })\n  dispatch({\n    type: 'setCustomLineItem',\n    payload: {\n      lineItem: {},\n    },\n  })\n}\n\nexport type SetCustomLineItems = (lineItems: CustomLineItems) => void\nexport type SetCustomLineItem = (lineItem: CustomLineItem) => void\n\nexport interface ItemState {\n  skuCode?: string\n  items?: Items\n  item?: Items\n  lineItems?: CustomLineItems\n  lineItem?: CustomLineItem\n  quantity?: ItemQuantity\n  option?: ItemOptions\n  prices?: ItemPrices\n  setItems?: (items: Items) => void\n  setItem?: (item: Items) => void\n  setQuantity?: (quantity: ItemQuantity) => void\n  setOption?: (option: ItemOptions) => void\n  setPrices?: (prices: ItemPrices) => void\n  setSkuCode?: (skuCode: string) => void\n  setCustomLineItems: SetCustomLineItems\n  setCustomLineItem?: SetCustomLineItem\n}\n\ntype ItemActionType =\n  | 'setItem'\n  | 'setItems'\n  | 'setQuantity'\n  | 'setOption'\n  | 'setPrices'\n  | 'setCustomLineItems'\n  | 'setCustomLineItem'\n  | 'setSkuCode'\n\nconst actionType: ItemActionType[] = [\n  'setItem',\n  'setItems',\n  'setQuantity',\n  'setOption',\n  'setPrices',\n  'setCustomLineItems',\n  'setCustomLineItem',\n  'setSkuCode',\n]\n\nexport interface ItemAction {\n  type: ItemActionType\n  payload: Partial<ItemState>\n}\n\nexport const itemInitialState: Partial<ItemState> = {\n  items: {},\n  item: {},\n  quantity: {},\n  option: {},\n  prices: {},\n  lineItems: {},\n  lineItem: {},\n  skuCode: '',\n}\n\nconst itemReducer = (\n  state: Partial<ItemState>,\n  reducer: ItemAction\n): Partial<ItemState> =>\n  baseReducer<Partial<ItemState>, ItemAction, ItemActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default itemReducer\n","import React, {\n  FunctionComponent,\n  useReducer,\n  useEffect,\n  ReactNode,\n} from 'react'\nimport ItemContext, {\n  initialItemContext,\n  InitItemContext,\n} from '#context/ItemContext'\nimport itemReducer, {\n  itemInitialState,\n  setItemState,\n  Items,\n  ItemQuantity,\n  ItemOptions,\n  CustomLineItems,\n  CustomLineItem,\n} from '#reducers/ItemReducer'\nimport { ItemPrices } from '#reducers/ItemReducer'\nimport components from '#config/components'\nimport { BFSetStateContainer } from '#typings'\n\nconst propTypes = components.ItemContainer.propTypes\nconst displayName = components.ItemContainer.displayName\n\ntype ItemContainerProps = {\n  children: ReactNode\n  skuCode?: string | null\n  lineItem?: {\n    name: string\n    imageUrl?: string | null\n  } | null\n}\n\nconst ItemContainer: FunctionComponent<ItemContainerProps> = (props) => {\n  const { children, skuCode, lineItem } = props\n  const [state, dispatch] = useReducer(itemReducer, itemInitialState)\n  useEffect(() => {\n    if (skuCode) {\n      setItemState(skuCode, { type: 'setSkuCode', key: 'skuCode' }, dispatch)\n    }\n    if (lineItem) {\n      setItemState(\n        lineItem as CustomLineItem,\n        { type: 'setCustomLineItem', key: 'lineItem' },\n        dispatch\n      )\n    }\n  }, [])\n  const setItems: BFSetStateContainer<Items> = (items) =>\n    setItemState(items, { type: 'setItems', key: 'items' }, dispatch)\n  const setItem: BFSetStateContainer<Items> = (item) =>\n    setItemState(item, { type: 'setItem', key: 'item' }, dispatch)\n  const setQuantity: BFSetStateContainer<ItemQuantity> = (item) =>\n    setItemState(item, { type: 'setQuantity', key: 'quantity' }, dispatch)\n  const setOption: BFSetStateContainer<ItemOptions> = (item) =>\n    setItemState(item, { type: 'setOption', key: 'option' }, dispatch)\n  const setPrices: BFSetStateContainer<ItemPrices> = (item) =>\n    setItemState(item, { type: 'setPrices', key: 'prices' }, dispatch)\n  const setCustomLineItems: BFSetStateContainer<CustomLineItems> = (item) =>\n    setItemState(\n      item,\n      { type: 'setCustomLineItems', key: 'lineItems' },\n      dispatch\n    )\n  const itemValue = {\n    ...initialItemContext,\n    ...state,\n    setItems,\n    setItem,\n    setQuantity,\n    setOption,\n    setPrices,\n    setCustomLineItems,\n  } as InitItemContext\n  return (\n    <ItemContext.Provider value={itemValue}>{children}</ItemContext.Provider>\n  )\n}\n\nItemContainer.propTypes = propTypes\nItemContainer.displayName = displayName\n\nexport default ItemContainer\n","import { createContext } from 'react'\nimport {\n  LineItemCollection,\n  ShippingMethodCollection,\n  StockTransferCollection,\n} from '@commercelayer/js-sdk'\nimport { SingleRelationship } from '@commercelayer/js-sdk/dist/typings/Library'\n\nexport interface InitialShipmentContext {\n  lineItems?: SingleRelationship<LineItemCollection>[]\n  shippingMethods?: ShippingMethodCollection[]\n  currentShippingMethodId?: string\n  stockTransfers?: StockTransferCollection[]\n}\n\nconst initial: InitialShipmentContext = {\n  lineItems: [],\n  shippingMethods: [],\n  stockTransfers: [],\n}\n\nconst ShipmentChildrenContext = createContext<InitialShipmentContext>(initial)\n\nexport default ShipmentChildrenContext\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useContext,\n  ReactNode,\n} from 'react'\nimport LineItemContext from '#context/LineItemContext'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport components from '#config/components'\nimport { LineItemType } from '#typings'\nimport ShipmentChildrenContext from '#context/ShipmentChildrenContext'\nimport _ from 'lodash'\nimport { LineItemCollection } from '@commercelayer/js-sdk'\n\nconst propTypes = components.LineItem.propTypes\nconst displayName = components.LineItem.displayName\n\ntype LineItemProps = {\n  children: ReactNode\n  type?: LineItemType\n}\n\nconst LineItem: FunctionComponent<LineItemProps> = (props) => {\n  const { type = 'skus', children } = props\n  const { lineItems } = useContext(LineItemContext)\n  const { lineItems: shipmentLineItems } = useContext(ShipmentChildrenContext)\n  const items = _.isEmpty(shipmentLineItems)\n    ? (lineItems as LineItemCollection[])\n    : (shipmentLineItems as LineItemCollection[])\n  const components =\n    items &&\n    items\n      .filter((l) => l.itemType === type)\n      .map((lineItem, k) => {\n        const lineProps = {\n          lineItem,\n        }\n        return (\n          <LineItemChildrenContext.Provider key={k} value={lineProps}>\n            {children}\n          </LineItemChildrenContext.Provider>\n        )\n      })\n  return <Fragment>{components}</Fragment>\n}\n\nLineItem.propTypes = propTypes\nLineItem.displayName = displayName\nLineItem.defaultProps = {\n  type: 'skus',\n}\n\nexport default LineItem\n","import React, {\n  FunctionComponent,\n  useState,\n  useEffect,\n  useContext,\n} from 'react'\nimport getAmount from '#utils/getAmount'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { BaseAmountComponent, BasePriceType } from '#typings/index'\n\nconst propTypes = components.LineItemAmount.propTypes\nconst defaultProps = components.LineItemAmount\n  .defaultProps as LineItemAmountProps\nconst displayName = components.LineItemAmount.displayName\n\nexport type LineItemAmountProps = BaseAmountComponent & {\n  type?: BasePriceType\n}\n\nconst LineItemAmount: FunctionComponent<LineItemAmountProps> = (props) => {\n  const { format = 'formatted', type = 'total', ...p } = props\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const [price, setPrice] = useState('')\n  useEffect(() => {\n    const p = getAmount(\n      'amount',\n      type,\n      format,\n      lineItem as Record<string, string>\n    ) as string\n    setPrice(p)\n    return (): void => {\n      setPrice('')\n    }\n  }, [lineItem])\n  const parentProps = {\n    price,\n    ...p,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <span {...p}>{price}</span>\n  )\n}\n\nLineItemAmount.propTypes = propTypes\nLineItemAmount.defaultProps = defaultProps\nLineItemAmount.displayName = displayName\n\nexport default LineItemAmount\n","import React, { FunctionComponent, useContext, ReactNode } from 'react'\nimport Parent from './utils/Parent'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport components from '#config/components'\n\nconst propTypes = components.LineItemImage.propTypes\nconst displayName = components.LineItemImage.displayName\n\ntype LineItemChildrenProps = Omit<LineItemImageProps, 'children'> & {\n  src: string\n}\n\ntype LineItemImageProps = {\n  children?: (props: LineItemChildrenProps) => ReactNode\n  width?: number\n} & Omit<JSX.IntrinsicElements['img'], 'src' | 'srcSet'>\n\nconst LineItemImage: FunctionComponent<LineItemImageProps> = (props) => {\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const src = lineItem['imageUrl']\n  const parenProps = {\n    src,\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parenProps}>{props.children}</Parent>\n  ) : (\n    <img src={src} {...props} />\n  )\n}\n\nLineItemImage.propTypes = propTypes\nLineItemImage.displayName = displayName\n\nexport default LineItemImage\n","import React, { useContext, FunctionComponent, ReactNode } from 'react'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\n\nconst propTypes = components.LineItemName.propTypes\nconst displayName = components.LineItemName.displayName\n\ntype LineItemNameChildrenProps = Omit<LineItemNameProps, 'children'>\n\ntype LineItemNameProps = {\n  children?: (props: LineItemNameChildrenProps) => ReactNode\n} & JSX.IntrinsicElements['p']\n\nconst LineItemName: FunctionComponent<LineItemNameProps> = (props) => {\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const labelName = lineItem['name']\n  const parentProps = {\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <p {...props}>{labelName}</p>\n  )\n}\n\nLineItemName.propTypes = propTypes\nLineItemName.displayName = displayName\n\nexport default LineItemName\n","import { createContext } from 'react'\nimport { LineItemOptionCollection } from '@commercelayer/js-sdk'\n\nexport interface InitialLineItemContext {\n  lineItemOption: LineItemOptionCollection | {}\n}\n\nconst initial: InitialLineItemContext = {\n  lineItemOption: {},\n}\n\nconst LineItemOptionChildrenContext = createContext<InitialLineItemContext>(\n  initial\n)\n\nexport default LineItemOptionChildrenContext\n","import React, {\n  FunctionComponent,\n  useContext,\n  Fragment,\n  CSSProperties,\n} from 'react'\nimport LineItemOptionChildrenContext from '#context/LineItemOptionChildrenContext'\nimport _ from 'lodash'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { LineItemOptionCollection } from '@commercelayer/js-sdk'\nimport { FunctionChildren } from '#typings/index'\n\nconst propTypes = components.LineItemOption.propTypes\nconst displayName = components.LineItemOption.displayName\n\ntype LineItemOptionChildrenProps = FunctionChildren<\n  Omit<LineItemOptionProps, 'children'> & {\n    lineItemOption: LineItemOptionCollection\n  }\n>\n\ntype LineItemOptionProps = {\n  children?: LineItemOptionChildrenProps\n  name: string\n  valueClassName?: string\n  keyClassName?: string\n  keyId?: string\n  keyStyle?: CSSProperties\n} & JSX.IntrinsicElements['span']\n\nconst LineItemOption: FunctionComponent<LineItemOptionProps> = (props) => {\n  const {\n    name,\n    children,\n    keyClassName,\n    keyId,\n    keyStyle,\n    valueClassName,\n    id,\n    style,\n    ...p\n  } = props\n  const { lineItemOption } = useContext(LineItemOptionChildrenContext)\n  const parentProps = {\n    ...props,\n    lineItemOption,\n  }\n  return children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : _.has(lineItemOption, `options.${name}`) ? (\n    <Fragment>\n      <span id={keyId} style={keyStyle} className={keyClassName} {...p}>\n        {`${name}:`}\n      </span>\n      <span id={id} style={style} className={valueClassName} {...p}>\n        {`${lineItemOption['options'][name]}`}\n      </span>\n    </Fragment>\n  ) : null\n}\n\nLineItemOption.propTypes = propTypes\nLineItemOption.displayName = displayName\n\nexport default LineItemOption\n","import React, {\n  useContext,\n  FunctionComponent,\n  Fragment,\n  ReactNode,\n} from 'react'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport LineItemOptionChildrenContext from '#context/LineItemOptionChildrenContext'\nimport _ from 'lodash'\nimport components from '#config/components'\nimport { LineItemOptionCollection } from '@commercelayer/js-sdk'\n\nconst propTypes = components.LineItemOptions.propTypes\nconst defaultProps = components.LineItemOptions.defaultProps\nconst displayName = components.LineItemOptions.displayName\n\nexport type LineItemOptionsProps = {\n  children: ReactNode\n  skuOptionId: string\n  title?: string\n  showName?: boolean\n} & JSX.IntrinsicElements['span']\n\nconst LineItemOptions: FunctionComponent<LineItemOptionsProps> = (props) => {\n  const { skuOptionId, title, children, showName = true, ...p } = props\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const lineItemOptions: LineItemOptionCollection[] = !_.isEmpty(lineItem)\n    ? lineItem['lineItemOptions']().toArray()\n    : []\n  const options = lineItemOptions\n    .filter((o) => {\n      // @ts-ignore\n      return o.skuOption().id === skuOptionId\n    })\n    .map((o, k) => {\n      const showTitle = showName ? <span {...p}>{title || o.name}</span> : null\n      const valueProps = {\n        lineItemOption: o,\n      }\n      return (\n        <Fragment key={k}>\n          {showTitle}\n          <LineItemOptionChildrenContext.Provider value={valueProps}>\n            {children}\n          </LineItemOptionChildrenContext.Provider>\n        </Fragment>\n      )\n    })\n  return <Fragment>{options}</Fragment>\n}\n\nLineItemOptions.propTypes = propTypes\nLineItemOptions.defaultProps = defaultProps\nLineItemOptions.displayName = displayName\n\nexport default LineItemOptions\n","import React, { FunctionComponent, useContext, ReactNode } from 'react'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport LineItemContext from '#context/LineItemContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings'\n\nconst propTypes = components.LineItemQuantity.propTypes\nconst defaultProps = components.LineItemQuantity.defaultProps\nconst displayName = components.LineItemQuantity.displayName\n\ntype LineItemQuantityChildrenProps = FunctionChildren<\n  Omit<LineItemQuantityProps, 'children'> & {\n    quantity: number\n    handleChange: (event: React.MouseEvent<HTMLSelectElement>) => void\n  }\n>\n\ntype LineItemQuantityProps = {\n  children?: LineItemQuantityChildrenProps\n  max?: number\n  disabled?: boolean\n  readonly?: boolean\n} & (JSX.IntrinsicElements['select'] & JSX.IntrinsicElements['span'])\n\nconst LineItemQuantity: FunctionComponent<LineItemQuantityProps> = (props) => {\n  const { max = 50, readonly = false, ...p } = props\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const { updateLineItem } = useContext(LineItemContext)\n  const options: ReactNode[] = []\n  for (let i = 1; i <= max; i++) {\n    options.push(\n      <option key={i} value={`${i}`}>\n        {i}\n      </option>\n    )\n  }\n  const handleChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\n    const quantity = Number(e.target.value)\n    updateLineItem && updateLineItem(lineItem['id'], quantity)\n  }\n  const quantity = lineItem['quantity']\n  const parentProps = {\n    handleChange,\n    quantity,\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : readonly ? (\n    <span {...p}>{quantity}</span>\n  ) : (\n    <select value={quantity} onChange={handleChange} {...p}>\n      {options}\n    </select>\n  )\n}\n\nLineItemQuantity.propTypes = propTypes\nLineItemQuantity.defaultProps = defaultProps\nLineItemQuantity.displayName = displayName\n\nexport default LineItemQuantity\n","import React, { FunctionComponent, useContext, PropsWithoutRef } from 'react'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport LineItemContext from '#context/LineItemContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\n\nconst propTypes = components.LineItemRemoveLink.propTypes\nconst defaultProps = components.LineItemRemoveLink.defaultProps\nconst displayName = components.LineItemRemoveLink.displayName\n\ntype ChildrenLineItemRemoveLinkProps = FunctionChildren<{\n  handleRemove: (event: React.MouseEvent<HTMLAnchorElement>) => void\n  label?: string\n}>\n\ntype LineItemRemoveLinkProps = {\n  children?: ChildrenLineItemRemoveLinkProps\n  label?: string\n} & PropsWithoutRef<JSX.IntrinsicElements['a']>\n\nconst LineItemRemoveLink: FunctionComponent<LineItemRemoveLinkProps> = (\n  props\n) => {\n  const { label = 'Remove' } = props\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const { deleteLineItem } = useContext(LineItemContext)\n  const handleRemove = (e: React.MouseEvent<HTMLAnchorElement>): void => {\n    e.preventDefault()\n    deleteLineItem && deleteLineItem(lineItem['id'])\n  }\n  const parentProps = {\n    handleRemove,\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <a {...props} href=\"#\" onClick={handleRemove}>\n      {label}\n    </a>\n  )\n}\n\nLineItemRemoveLink.propTypes = propTypes\nLineItemRemoveLink.defaultProps = defaultProps\nLineItemRemoveLink.displayName = displayName\n\nexport default LineItemRemoveLink\n","import CLayer, {\n  LineItemCollection,\n  OrderCollection,\n} from '@commercelayer/js-sdk'\nimport baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { getOrderContext } from './OrderReducer'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\nimport _ from 'lodash'\nimport { LoaderType } from '#typings'\nimport { BaseError } from '#typings/errors'\n\nexport type UpdateLineItemParams = {\n  lineItemId: string\n  quantity?: number\n  dispatch: Dispatch<LineItemAction>\n  config: CommerceLayerConfig\n  getOrder: getOrderContext | undefined\n  orderId: string\n  errors: BaseError[] | undefined\n}\n\nexport interface UpdateLineItem {\n  (params: UpdateLineItemParams): void\n}\n\nexport type DeleteLineItemParam = Record<string, any> & UpdateLineItemParams\n\nexport interface DeleteLineItem {\n  (params: DeleteLineItemParam): void\n}\n\nexport type GetLineItemsParams = {\n  dispatch: Dispatch<LineItemAction>\n  config: CommerceLayerConfig\n  order: OrderCollection | null\n  filters: Record<string, any>\n}\n\nexport interface GetLineItems {\n  (params: GetLineItemsParams): void\n}\n\nexport interface LineItemPayload {\n  loading?: boolean\n  loader?: LoaderType\n  lineItems?: LineItemCollection[]\n  errors?: BaseError[]\n}\n\nexport interface LineItemState extends LineItemPayload {\n  updateLineItem?: (lineItemId: string, quantity?: number) => void\n  deleteLineItem?: (lineItemId: string) => void\n}\n\nexport interface LineItemAction {\n  type: LineItemActionType\n  payload: LineItemPayload\n}\n\nexport const getLineItems: GetLineItems = (params) => {\n  const { order, dispatch, config, filters } = params\n  let allLineItems: LineItemCollection[] = []\n  order &&\n    // @ts-ignore\n    order\n      .withCredentials(config)\n      .lineItems()\n      .where(filters)\n      .includes('lineItemOptions.skuOption')\n      .all()\n      .then(async (res) => {\n        dispatch({\n          type: 'setLoading',\n          payload: {\n            loading: false,\n          },\n        })\n        const items = res.toArray()\n        allLineItems = [...allLineItems, ...items]\n        dispatch({\n          type: 'setLineItems',\n          payload: {\n            lineItems: allLineItems,\n          },\n        })\n        let colResp = res\n        const pageCount = res.pageCount()\n        if (colResp.hasNextPage() && pageCount) {\n          for (let index = 1; index < pageCount; index++) {\n            colResp = await colResp.withCredentials(config).nextPage()\n            const nextItems = colResp.toArray()\n            allLineItems = [...allLineItems, ...nextItems]\n            dispatch({\n              type: 'setLineItems',\n              payload: {\n                lineItems: allLineItems,\n              },\n            })\n          }\n        }\n      })\n      .catch((c: any) => {\n        const errors = getErrorsByCollection(c, 'lineItem')\n        dispatch({\n          type: 'setErrors',\n          payload: {\n            errors,\n          },\n        })\n      })\n}\n\nexport const updateLineItem: UpdateLineItem = async (params) => {\n  const {\n    config,\n    lineItemId,\n    quantity,\n    getOrder,\n    orderId,\n    dispatch,\n    errors,\n  } = params\n  try {\n    const lineItem = await CLayer.LineItem.withCredentials(config).find(\n      lineItemId\n    )\n    const update = await lineItem.withCredentials(config).update({ quantity })\n    if (!update.errors().empty()) {\n      throw update\n    }\n    getOrder && (await getOrder(orderId))\n    if (!_.isEmpty(errors)) {\n      dispatch({\n        type: 'setErrors',\n        payload: {\n          errors: [],\n        },\n      })\n    }\n  } catch (c) {\n    const errors = getErrorsByCollection<LineItemCollection>(c, 'lineItem')\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n  }\n}\n\nexport const deleteLineItem: DeleteLineItem = async (params) => {\n  const { config, lineItemId, getOrder, orderId, dispatch, errors } = params\n  try {\n    const lineItem = await CLayer.LineItem.withCredentials(config).find(\n      lineItemId\n    )\n    const destroyLineItem = await lineItem.withCredentials(config).destroy()\n    if (!destroyLineItem.errors().empty()) {\n      throw destroyLineItem\n    }\n    getOrder && (await getOrder(orderId))\n    if (!_.isEmpty(errors)) {\n      dispatch({\n        type: 'setErrors',\n        payload: {\n          errors: [],\n        },\n      })\n    }\n  } catch (c) {\n    const errors = getErrorsByCollection(c, 'lineItem')\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n  }\n}\n\nexport const lineItemInitialState: LineItemState = {\n  loading: false,\n  lineItems: [],\n  errors: [],\n}\n\nexport type LineItemActionType = 'setLineItems' | 'setErrors' | 'setLoading'\n\nconst actionType: LineItemActionType[] = [\n  'setLineItems',\n  'setErrors',\n  'setLoading',\n]\n\nconst lineItemReducer = (\n  state: LineItemState,\n  reducer: LineItemAction\n): LineItemState =>\n  baseReducer<LineItemState, LineItemAction, LineItemActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default lineItemReducer\n","import React, {\n  useEffect,\n  FunctionComponent,\n  useReducer,\n  useContext,\n  ReactNode,\n} from 'react'\nimport lineItemReducer, {\n  lineItemInitialState,\n  updateLineItem,\n  deleteLineItem,\n  getLineItems,\n} from '#reducers/LineItemReducer'\nimport OrderContext from '#context/OrderContext'\nimport LineItemContext, { LineItemContextValue } from '#context/LineItemContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport _ from 'lodash'\nimport components from '#config/components'\n\nconst propTypes = components.LineItemsContainer.propTypes\nconst defaultProps = components.LineItemsContainer.defaultProps\nconst displayName = components.LineItemsContainer.displayName\n\ntype LineItemsContainer = {\n  children: ReactNode\n  filters?: Record<string, any>\n  loader?: ReactNode\n}\n\nconst LineItemsContainer: FunctionComponent<LineItemsContainer> = (props) => {\n  const { children, filters = {}, loader = 'Loading...' } = props\n  const { order, getOrder, orderId } = useContext(OrderContext)\n  const config = useContext(CommerceLayerContext)\n  const [state, dispatch] = useReducer(lineItemReducer, lineItemInitialState)\n  useEffect(() => {\n    if (!_.isEmpty(order)) {\n      order &&\n        getLineItems({\n          order,\n          dispatch,\n          config,\n          filters,\n        })\n    }\n    return (): void => {\n      if (_.isEmpty(order)) {\n        dispatch({\n          type: 'setLineItems',\n          payload: { lineItems: [] },\n        })\n      }\n    }\n  }, [order])\n  const lineItemValue = {\n    ...state,\n    loader,\n    updateLineItem: (lineItemId, quantity = 1) =>\n      updateLineItem({\n        lineItemId,\n        quantity,\n        dispatch,\n        config,\n        getOrder,\n        orderId,\n        errors: state.errors,\n      }),\n    deleteLineItem: (lineItemId) =>\n      deleteLineItem({\n        lineItemId,\n        dispatch,\n        config,\n        getOrder,\n        orderId,\n        errors: state.errors,\n      }),\n  } as LineItemContextValue\n  return (\n    <LineItemContext.Provider value={lineItemValue}>\n      {state.loading ? loader : children}\n    </LineItemContext.Provider>\n  )\n}\n\nLineItemsContainer.propTypes = propTypes\nLineItemsContainer.defaultProps = defaultProps\nLineItemsContainer.displayName = displayName\n\nexport default LineItemsContainer\n","import { LineItemCollection } from '@commercelayer/js-sdk'\n\nexport interface GetLineItemsCountInterface {\n  (lineItems: LineItemCollection[], quantity?: number): number\n}\n\nconst getLineItemsCount: GetLineItemsCountInterface = (\n  lineItems,\n  quantity = 0\n) => {\n  const typeAccept = ['skus', 'gift_cards']\n  lineItems\n    .filter((l) => typeAccept.includes(l.itemType))\n    .map((l) => {\n      quantity += l.quantity\n    })\n  return quantity\n}\n\nexport default getLineItemsCount\n","import React, {\n  FunctionComponent,\n  useContext,\n  useState,\n  useEffect,\n} from 'react'\nimport Parent from './utils/Parent'\nimport getLineItemsCount from '#utils/getLineItemsCount'\nimport _ from 'lodash'\nimport LineItemContext from '#context/LineItemContext'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\n\nconst propTypes = components.LineItemsCount.propTypes\nconst displayName = components.LineItemsCount.displayName\n\ntype LineItemsCountChildrenProps = FunctionChildren<\n  Omit<LineItemsCountProps, 'children'> & {\n    quantity: number\n  }\n>\n\ntype LineItemsCountProps = {\n  children?: LineItemsCountChildrenProps\n} & JSX.IntrinsicElements['span']\n\nconst LineItemsCount: FunctionComponent<LineItemsCountProps> = (props) => {\n  const { children, ...p } = props\n  const { lineItems } = useContext(LineItemContext)\n  const [quantity, setQuantity] = useState(0)\n  useEffect(() => {\n    if (!_.isEmpty(lineItems)) {\n      const qty = getLineItemsCount(lineItems || [])\n      setQuantity(qty)\n    }\n    return (): void => {\n      setQuantity(0)\n    }\n  }, [lineItems])\n  const parentProps = {\n    quantity,\n    ...p,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <span {...p}>{quantity}</span>\n  )\n}\n\nLineItemsCount.propTypes = propTypes\nLineItemsCount.displayName = displayName\n\nexport default LineItemsCount\n","import React, { FunctionComponent } from 'react'\nimport BaseInput from './utils/BaseInput'\nimport components from '#config/components'\nimport { BaseInputComponentProps } from '#typings'\n\nconst propTypes = components.MetadataInput.propTypes\nconst displayName = components.MetadataInput.displayName\n\nexport type MetadataInputProps = BaseInputComponentProps &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst MetadataInput: FunctionComponent<MetadataInputProps> = (props) => {\n  return <BaseInput data-metadata {...props} />\n}\n\nMetadataInput.propTypes = propTypes\nMetadataInput.displayName = displayName\n\nexport default MetadataInput\n","export interface GetLocalOrder {\n  (key: string): string | null\n}\n\nexport const getLocalOrder: GetLocalOrder = (key) => {\n  return localStorage.getItem(key)\n}\n\nexport interface SetLocalOrder {\n  (key: string, value: string): void\n}\n\nexport const setLocalOrder: SetLocalOrder = (key, value) => {\n  localStorage.setItem(key, value)\n}\n\nexport interface DeleteLocalOrder {\n  (key: string): void\n}\n\nexport const deleteLocalOrder: DeleteLocalOrder = (key) => {\n  localStorage.removeItem(key)\n}\n","import { createContext } from 'react'\nimport {\n  getLocalOrder,\n  setLocalOrder,\n  deleteLocalOrder,\n} from '#utils/localStorage'\n\nexport interface OrderStorageConfig {\n  persistKey: string\n  clearWhenPlaced: boolean\n  getLocalOrder: typeof getLocalOrder\n  setLocalOrder: typeof setLocalOrder\n  deleteLocalOrder: typeof deleteLocalOrder\n}\n\nconst initial: OrderStorageConfig = {\n  persistKey: '',\n  clearWhenPlaced: true,\n  getLocalOrder,\n  setLocalOrder,\n  deleteLocalOrder,\n}\n\nconst OrderStorageContext = createContext<OrderStorageConfig>(initial)\n\nexport default OrderStorageContext\n","import React, {\n  useEffect,\n  FunctionComponent,\n  useReducer,\n  useContext,\n  ReactNode,\n} from 'react'\nimport orderReducer, {\n  orderInitialState,\n  AddToCartValues,\n  createOrder,\n} from '#reducers/OrderReducer'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport OrderContext from '#context/OrderContext'\nimport {\n  getApiOrder,\n  addToCart,\n  OrderState,\n  setOrderErrors,\n} from '#reducers/OrderReducer'\nimport { unsetOrderState } from '#reducers/OrderReducer'\nimport components from '#config/components'\nimport { BaseMetadataObject } from '#typings'\nimport OrderStorageContext from '#context/OrderStorageContext'\nimport { saveAddressToCustomerBook } from '../reducers/OrderReducer'\n\nconst propTypes = components.OrderContainer.propTypes\nconst defaultProps = components.OrderContainer.defaultProps\nconst displayName = components.OrderContainer.displayName\n\ntype OrderContainerProps = {\n  children: ReactNode\n  metadata?: BaseMetadataObject\n  attributes?: Record<string, any>\n  orderId?: string\n}\n\nconst OrderContainer: FunctionComponent<OrderContainerProps> = (props) => {\n  const { orderId, children, metadata, attributes } = props\n  const [state, dispatch] = useReducer(orderReducer, orderInitialState)\n  const config = useContext(CommerceLayerContext)\n  const {\n    persistKey,\n    clearWhenPlaced,\n    getLocalOrder,\n    setLocalOrder,\n    deleteLocalOrder,\n  } = useContext(OrderStorageContext)\n  useEffect(() => {\n    if (config.accessToken) {\n      const localOrder = persistKey ? getLocalOrder(persistKey) : orderId\n      if (localOrder) {\n        dispatch({\n          type: 'setOrderId',\n          payload: {\n            orderId: localOrder,\n          },\n        })\n        if (!state.order) {\n          getApiOrder({\n            id: localOrder,\n            dispatch,\n            config,\n            persistKey,\n            clearWhenPlaced,\n            deleteLocalOrder,\n          })\n        }\n      }\n    }\n    return (): void => unsetOrderState(dispatch)\n  }, [config.accessToken])\n  const orderValue = {\n    ...state,\n    getOrder: (id: string): void => getApiOrder({ id, dispatch, config }),\n    setOrderErrors: (collection: any) =>\n      setOrderErrors({ dispatch, collection }),\n    createOrder: async (): Promise<string> =>\n      await createOrder({\n        persistKey,\n        dispatch,\n        config,\n        state,\n        orderMetadata: metadata,\n        orderAttributes: attributes,\n      }),\n    addToCart: (values: AddToCartValues): Promise<{ success: boolean }> =>\n      addToCart({\n        ...values,\n        persistKey,\n        dispatch,\n        state,\n        config,\n        errors: state.errors,\n        orderMetadata: metadata || {},\n        orderAttributes: attributes,\n        setLocalOrder,\n      }),\n    saveAddressToCustomerBook: (\n      type: 'BillingAddress' | 'ShippingAddress',\n      value: boolean\n    ) => saveAddressToCustomerBook({ type, value, dispatch }),\n  }\n  return (\n    <OrderContext.Provider value={orderValue as OrderState}>\n      {children}\n    </OrderContext.Provider>\n  )\n}\n\nOrderContainer.propTypes = propTypes\nOrderContainer.defaultProps = defaultProps\nOrderContainer.displayName = displayName\n\nexport default OrderContainer\n","import React, { FunctionComponent, ReactNode } from 'react'\nimport OrderStorageContext from '#context/OrderStorageContext'\nimport components from '#config/components'\nimport {\n  getLocalOrder,\n  setLocalOrder,\n  deleteLocalOrder,\n} from '#utils/localStorage'\n\nconst propTypes = components.OrderStorage.propTypes\nconst displayName = components.OrderStorage.displayName\n\ntype OrderStorageProps = {\n  children: ReactNode\n  persistKey: string\n  clearWhenPlaced?: boolean\n}\n\nconst OrderStorage: FunctionComponent<OrderStorageProps> = (props) => {\n  const { children, clearWhenPlaced = true, ...p } = props\n  return (\n    <OrderStorageContext.Provider\n      value={{\n        ...p,\n        setLocalOrder,\n        getLocalOrder,\n        deleteLocalOrder,\n        clearWhenPlaced,\n      }}\n    >\n      {children}\n    </OrderStorageContext.Provider>\n  )\n}\n\nOrderStorage.propTypes = propTypes\nOrderStorage.displayName = displayName\n\nexport default OrderStorage\n","import React, { Fragment, FunctionComponent } from 'react'\nimport { PriceProps } from '#components/Price'\nimport PropTypes from 'prop-types'\n\nconst propTypes = {\n  formattedAmount: PropTypes.string,\n  formattedCompare: PropTypes.string,\n}\nconst defaultProps = {\n  formattedAmount: '',\n  formattedCompare: '',\n}\n\nexport type PTemplateProps = {\n  formattedAmount?: string\n  formattedCompare?: string\n} & Omit<PriceProps, 'children'>\n\nconst PriceTemplate: FunctionComponent<PTemplateProps> = (props) => {\n  return (\n    <Fragment>\n      <span className={props.className}>{props.formattedAmount}</span>\n      {props.showCompare && (\n        <span className={props.compareClassName || ''}>\n          {props.formattedCompare}\n        </span>\n      )}\n    </Fragment>\n  )\n}\n\nPriceTemplate.propTypes = propTypes\nPriceTemplate.defaultProps = defaultProps\n\nexport default PriceTemplate\n","import _ from 'lodash'\nimport { PriceCollection } from '@commercelayer/js-sdk'\nimport { Prices, SkuPrices } from '#reducers/PriceReducer'\nimport { Items } from '#reducers/ItemReducer'\nimport React, { ReactNode } from 'react'\nimport PriceTemplate, { PTemplateProps } from '#components/utils/PriceTemplate'\n\nexport interface GetPriceByCode {\n  (skuPrices: SkuPrices, code: string): PriceCollection | undefined\n}\n\nexport const getPriceByCode: GetPriceByCode = (skuPrices, code = '') => {\n  return code\n    ? _.first(skuPrices.filter((p) => p.currencyCode === code))\n    : _.first(skuPrices)\n}\n\nexport interface GetPricesComponent {\n  (skuPrices: PriceCollection[], props: PTemplateProps): ReactNode\n}\n\nexport const getPricesComponent: GetPricesComponent = (skuPrices, props) => {\n  if (_.isEmpty(skuPrices)) {\n    return <PriceTemplate {...props} />\n  }\n  return skuPrices.map((p, k) => {\n    const showCompare =\n      (typeof props.showCompare === 'undefined' &&\n        p.compareAtAmountCents > p.amountCents) ||\n      props.showCompare\n    return (\n      <PriceTemplate\n        key={k}\n        {...props}\n        showCompare={showCompare}\n        formattedAmount={p.formattedAmount}\n        formattedCompare={p.formattedCompareAtAmount}\n      />\n    )\n  })\n}\n\nexport interface GetPrices {\n  (prices: PriceCollection[] | Items): Prices\n}\n\nconst getPrices: GetPrices = (prices) => {\n  const obj: Record<string, any> = {}\n  if (_.isArray(prices)) {\n    prices.map((p) => {\n      if (_.has(obj, p.skuCode)) {\n        obj[p.skuCode].push(p)\n      } else {\n        obj[p.skuCode] = [p]\n      }\n    })\n  } else {\n    _.forEach(prices, (item) => {\n      const prices = item.prices()?.toArray()\n      obj[item.code] = prices\n    })\n  }\n  return obj\n}\n\nexport default getPrices\n","import { BaseAction, LoaderType } from '#typings'\nimport CLayer, { PriceCollection } from '@commercelayer/js-sdk'\nimport getPrices from '#utils/getPrices'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Dispatch } from 'react'\nimport { ItemPrices } from './ItemReducer'\nimport baseReducer from '#utils/baseReducer'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\nimport { BaseError } from '#typings/errors'\n\nexport type SkuPrices = PriceCollection[]\n\nexport interface Prices {\n  [key: string]: SkuPrices\n}\n\ntype SkuCodesPrice = string[]\n\nexport interface SetSkuCodesPrice {\n  (skuCodes: SkuCodesPrice): void\n}\n\nexport interface PriceState {\n  loading: boolean\n  prices: Prices\n  skuCodes: SkuCodesPrice\n  errors?: BaseError[]\n  skuCode?: string\n  setSkuCodes?: SetSkuCodesPrice\n  loader?: LoaderType\n}\n\nexport interface PriceAction extends BaseAction {\n  type: PriceActionType\n}\n\nexport const priceInitialState: PriceState = {\n  loading: true,\n  prices: {},\n  skuCodes: [],\n  errors: [],\n}\n\nexport interface GetSkusPrice {\n  (\n    skuCodes: SkuCodesPrice,\n    options: {\n      config: CommerceLayerConfig\n      dispatch: Dispatch<PriceAction>\n      setPrices: ((item: ItemPrices) => void) | undefined\n      prices: ItemPrices\n      perPage: number\n      filters: Record<string, any>\n    }\n  ): void\n}\n\nexport const getSkusPrice: GetSkusPrice = (\n  skuCodes,\n  { config, dispatch, setPrices, prices, perPage, filters }\n) => {\n  let allPrices = {}\n  CLayer.Price.withCredentials(config)\n    .where({ skuCodeIn: skuCodes.join(','), ...filters })\n    .perPage(perPage)\n    .all()\n    .then(async (r) => {\n      const pricesObj = getPrices(r.toArray())\n      allPrices = { ...allPrices, ...prices, ...pricesObj }\n      if (setPrices) {\n        setPrices(allPrices)\n      }\n      dispatch({\n        type: 'setPrices',\n        payload: { prices: allPrices },\n      })\n      dispatch({\n        type: 'setLoading',\n        payload: { loading: false },\n      })\n      const meta = r.getMetaInfo()\n      let col = r\n      if (col.hasNextPage() && meta.pageCount) {\n        for (let key = 1; key < meta.pageCount; key++) {\n          col = await col.withCredentials(config).nextPage()\n          const pricesObj = getPrices(col.toArray())\n          allPrices = { ...allPrices, ...pricesObj }\n          if (setPrices) {\n            setPrices(allPrices)\n          }\n          dispatch({\n            type: 'setPrices',\n            payload: { prices: allPrices },\n          })\n        }\n      }\n    })\n    .catch((c) => {\n      const errors = getErrorsByCollection(c, 'price')\n      dispatch({\n        type: 'setErrors',\n        payload: {\n          errors,\n        },\n      })\n    })\n}\n\nexport interface UnsetPriceState {\n  (dispatch: Dispatch<PriceAction>): void\n}\n\nexport const unsetPriceState: UnsetPriceState = (dispatch) => {\n  dispatch({\n    type: 'setPrices',\n    payload: {\n      prices: {},\n    },\n  })\n  dispatch({\n    type: 'setLoading',\n    payload: { loading: false },\n  })\n}\n\nexport type PriceActionType =\n  | 'setLoading'\n  | 'setPrices'\n  | 'setSkuCodes'\n  | 'setErrors'\n\nconst typeAction: PriceActionType[] = [\n  'setLoading',\n  'setPrices',\n  'setSkuCodes',\n  'setErrors',\n]\n\nconst priceReducer = (state: PriceState, reducer: PriceAction): PriceState =>\n  baseReducer<PriceState, PriceAction, PriceActionType[]>(\n    state,\n    reducer,\n    typeAction\n  )\n\nexport default priceReducer\n","import { createContext } from 'react'\nimport { priceInitialState, PriceState } from '#reducers/PriceReducer'\n\nexport interface PricesContextValue extends PriceState {\n  skuCode: PriceState['skuCode']\n}\n\nconst PricesContext = createContext(priceInitialState)\n\nexport default PricesContext\n","import React, {\n  Fragment,\n  useState,\n  useEffect,\n  useContext,\n  FunctionComponent,\n} from 'react'\nimport _ from 'lodash'\nimport Parent from './utils/Parent'\nimport PricesContext from '#context/PricesContext'\nimport { getPricesComponent } from '#utils/getPrices'\nimport { PriceCollection } from '@commercelayer/js-sdk'\nimport components from '#config/components'\nimport { FunctionChildren, LoaderType } from '#typings/index'\n\nconst propTypes = components.Price.propTypes\nconst defaultProps = components.Price.defaultProps\nconst displayName = components.Price.displayName\n\ntype PriceChildrenProps = FunctionChildren<\n  {\n    loading: boolean\n    loader: LoaderType\n  } & Omit<PriceProps, 'children'>\n>\n\nexport interface PriceProps extends Partial<JSX.IntrinsicElements['span']> {\n  children?: PriceChildrenProps\n  compareClassName?: string\n  showCompare?: boolean\n  skuCode?: string\n}\n\nconst Price: FunctionComponent<PriceProps> = (props) => {\n  const { children, skuCode = '' } = props\n  const {\n    prices,\n    skuCode: pricesSkuCode,\n    loading,\n    skuCodes,\n    setSkuCodes,\n    loader,\n  } = useContext(PricesContext)\n  const [skuPrices, setSkuPrices] = useState<PriceCollection[]>([])\n  const sCode = pricesSkuCode || skuCode\n  useEffect(() => {\n    if (!_.isEmpty(prices) && _.has(prices, `${sCode}`)) {\n      setSkuPrices(prices[sCode])\n    } else {\n      if (sCode && _.indexOf(skuCodes, sCode) === -1) {\n        skuCodes.push(sCode)\n        setSkuCodes && setSkuCodes(skuCodes)\n      }\n    }\n    return (): void => {\n      setSkuPrices([])\n    }\n  }, [prices, sCode])\n  const parentProps = {\n    loading,\n    loader,\n    ...props,\n  }\n  const pricesComponent =\n    _.isEmpty(prices) || _.isEmpty(skuPrices)\n      ? null\n      : getPricesComponent(skuPrices, props)\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <Fragment>\n      {loading || _.isEmpty(pricesComponent) ? loader : pricesComponent}\n    </Fragment>\n  )\n}\n\nPrice.propTypes = propTypes\nPrice.defaultProps = defaultProps\nPrice.displayName = displayName\n\nexport default Price\n","import React, {\n  useEffect,\n  FunctionComponent,\n  useContext,\n  useReducer,\n  ReactNode,\n} from 'react'\nimport getPrices from '#utils/getPrices'\nimport _ from 'lodash'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport priceReducer, {\n  SetSkuCodesPrice,\n  unsetPriceState,\n} from '#reducers/PriceReducer'\nimport { priceInitialState, getSkusPrice } from '#reducers/PriceReducer'\nimport PricesContext, { PricesContextValue } from '#context/PricesContext'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport ItemContext from '#context/ItemContext'\nimport components from '#config/components'\nimport { LoaderType } from '#typings'\n\nconst propTypes = components.PricesContainer.propTypes\nconst defaultProps = components.PricesContainer.defaultProps\nconst displayName = components.PricesContainer.displayName\n\ntype PricesContainerProps = {\n  children: ReactNode\n  filters?: object\n  loader?: LoaderType\n  perPage?: number\n  skuCode?: string\n}\n\nconst PricesContainer: FunctionComponent<PricesContainerProps> = (props) => {\n  const {\n    children,\n    skuCode = '',\n    loader = 'Loading...',\n    perPage = 10,\n    filters = {},\n  } = props\n  const [state, dispatch] = useReducer(priceReducer, priceInitialState)\n  const config = useContext(CommerceLayerContext)\n  const {\n    setPrices,\n    prices,\n    items,\n    item: currentItem,\n    skuCode: itemSkuCode,\n  } = useContext(ItemContext)\n  if (_.indexOf(state.skuCodes, skuCode) === -1 && skuCode)\n    state.skuCodes.push(skuCode)\n  const sCode = getCurrentItemKey(currentItem) || skuCode || itemSkuCode || ''\n  const setSkuCodes: SetSkuCodesPrice = (skuCodes) => {\n    dispatch({\n      type: 'setSkuCodes',\n      payload: { skuCodes },\n    })\n  }\n  useEffect(() => {\n    if (currentItem && _.has(prices, sCode)) {\n      dispatch({\n        type: 'setPrices',\n        payload: { prices: prices },\n      })\n    }\n    if (!_.isEmpty(items) && _.isEmpty(currentItem)) {\n      const p = getPrices(items)\n      dispatch({\n        type: 'setPrices',\n        payload: { prices: p },\n      })\n    }\n    if (\n      (config.accessToken && _.isEmpty(currentItem)) ||\n      (config.accessToken && !_.has(prices, sCode))\n    ) {\n      if (state.skuCodes.length > 0 || skuCode) {\n        getSkusPrice((sCode && [sCode]) || state.skuCodes, {\n          config,\n          dispatch,\n          setPrices,\n          prices,\n          perPage,\n          filters,\n        })\n      }\n    }\n    return (): void => {\n      if (_.isEmpty(currentItem)) {\n        unsetPriceState(dispatch)\n      }\n    }\n  }, [config.accessToken, currentItem, sCode])\n  const priceValue: PricesContextValue = {\n    ...state,\n    skuCode: sCode,\n    loader,\n    setSkuCodes,\n  }\n  return (\n    <PricesContext.Provider value={priceValue}>\n      {children}\n    </PricesContext.Provider>\n  )\n}\n\nPricesContainer.propTypes = propTypes\nPricesContainer.defaultProps = defaultProps\nPricesContainer.displayName = displayName\n\nexport default PricesContainer\n","import React, {\n  FunctionComponent,\n  useContext,\n  useState,\n  useEffect,\n} from 'react'\nimport Parent from './utils/Parent'\nimport _ from 'lodash'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport ItemContext from '#context/ItemContext'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\nimport SkuListsContext from '#context/SkuListsContext'\n\nconst propTypes = components.QuantitySelector.propTypes\nconst defaultProps = components.QuantitySelector.defaultProps\nconst displayName = components.QuantitySelector.displayName\n\ntype QuantitySelectorChildrenProps = FunctionChildren<\n  Omit<QuantitySelectorProps, 'children'> & {\n    handleChange: (event: React.MouseEvent<HTMLInputElement>) => void\n    handleBlur: (event: React.MouseEvent<HTMLInputElement>) => void\n  }\n>\n\ntype QuantitySelectorProps = {\n  children?: QuantitySelectorChildrenProps\n  disabled?: boolean\n  min?: number\n  max?: number\n  value?: string\n  skuCode?: string\n  skuListId?: string\n} & JSX.IntrinsicElements['input']\n\nconst QuantitySelector: FunctionComponent<QuantitySelectorProps> = (props) => {\n  const { skuCode, skuListId, children, min = 1, max, ...p } = props\n  const {\n    item,\n    setQuantity,\n    items,\n    quantity,\n    prices,\n    skuCode: itemSkuCode,\n  } = useContext(ItemContext)\n  const { skuLists, listIds } = useContext(SkuListsContext)\n  const [value, setValue] = useState(min)\n  const [disabled, setDisabled] = useState(!!p.disabled)\n  const sCode =\n    !_.isEmpty(items) && skuCode\n      ? items[skuCode]?.code\n      : skuCode || getCurrentItemKey(item) || (itemSkuCode as string)\n\n  const inventory = _.isEmpty(item) ? 50 : item[sCode]?.inventory?.quantity\n  const maxInv = max || inventory\n  useEffect(() => {\n    setValue(min)\n    if (!prices[sCode] || !sCode) {\n      setDisabled(true)\n    }\n    skuListId && setDisabled(false)\n    if (sCode) {\n      const qty = Number(min)\n      setQuantity && setQuantity({ ...quantity, [`${sCode}`]: qty })\n      if (!_.isEmpty(prices) && _.has(prices, sCode)) setDisabled(false)\n    }\n    return (): void => {\n      setValue(min)\n    }\n  }, [item, listIds, prices])\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    const qty = Number(e.target.value)\n    const valid = Number(qty) >= Number(min) && Number(qty) <= Number(maxInv)\n    setValue(qty)\n    if (!_.isEmpty(skuLists) && skuListId && valid) {\n      setQuantity && setQuantity({ ...quantity, [`${skuListId}`]: Number(qty) })\n    } else if (sCode && valid) {\n      setQuantity && setQuantity({ ...quantity, [`${sCode}`]: Number(qty) })\n    }\n  }\n  const handleBlur = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    const qty = e.target.value\n    const valid = Number(qty) >= Number(min) && Number(qty) <= Number(maxInv)\n    if (!valid) {\n      const resetVal = Number(qty) < Number(min) ? min : maxInv\n      setValue(resetVal)\n      if (!_.isEmpty(skuLists) && skuListId) {\n        setQuantity &&\n          setQuantity({ ...quantity, [`${skuListId}`]: Number(resetVal) })\n      } else {\n        setQuantity &&\n          setQuantity({ ...quantity, [`${sCode}`]: Number(resetVal) })\n      }\n    }\n  }\n  const parentProps = {\n    min,\n    max: maxInv,\n    disabled,\n    handleChange,\n    handleBlur,\n    value,\n    ...props,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <input\n      type=\"number\"\n      max={maxInv}\n      min={min}\n      value={value || ''}\n      disabled={disabled}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      {...p}\n    />\n  )\n}\n\nQuantitySelector.propTypes = propTypes\nQuantitySelector.defaultProps = defaultProps\nQuantitySelector.displayName = displayName\n\nexport default QuantitySelector\n","import _ from 'lodash'\nimport { fieldsExist } from '#utils/validateFormFields'\nimport { BaseError } from '#typings/errors'\n\ntype BillingAddressController = (params: {\n  billingAddress?: Record<string, any>\n  billingAddressId?: string\n  errors?: BaseError[]\n}) => boolean\n\nexport const billingAddressController: BillingAddressController = ({\n  billingAddress,\n  billingAddressId,\n  errors,\n}) => {\n  let billingDisable = !_.isEmpty(errors) || _.isEmpty(billingAddress)\n  if (_.isEmpty(errors) && !_.isEmpty(billingAddress)) {\n    billingDisable = !!(billingAddress && fieldsExist(billingAddress))\n  }\n  if (\n    billingDisable &&\n    !_.isEmpty(billingAddressId) &&\n    _.isEmpty(billingAddress)\n  ) {\n    billingDisable = false\n  }\n  return billingDisable\n}\n\ntype ShippingAddressController = (params: {\n  billingDisable: boolean\n  errors?: BaseError[]\n  shipToDifferentAddress?: boolean\n  shippingAddress?: Record<string, any>\n  shippingAddressId?: string\n}) => boolean\n\nexport const shippingAddressController: ShippingAddressController = ({\n  billingDisable,\n  errors,\n  shipToDifferentAddress,\n  shippingAddress,\n  shippingAddressId,\n}) => {\n  let shippingDisable = !!(!billingDisable && shipToDifferentAddress)\n  if (shippingDisable && _.isEmpty(errors) && !_.isEmpty(shippingAddress)) {\n    shippingDisable = !!(shippingAddress && fieldsExist(shippingAddress))\n  }\n  if (\n    shippingDisable &&\n    !_.isEmpty(shippingAddressId) &&\n    _.isEmpty(shippingAddress)\n  ) {\n    shippingDisable = false\n  }\n  return shippingDisable\n}\n\ntype CountryLockController = (params: {\n  addresses?: Record<string, any>[]\n  billingAddress?: Record<string, any>\n  billingAddressId?: string\n  countryCodeLock?: string\n  shipToDifferentAddress?: boolean\n  shippingAddress?: Record<string, any>\n  shippingAddressId?: string\n}) => boolean\n\nexport const countryLockController: CountryLockController = ({\n  addresses,\n  billingAddress,\n  billingAddressId,\n  countryCodeLock,\n  shipToDifferentAddress,\n  shippingAddress,\n  shippingAddressId,\n}) => {\n  if (\n    countryCodeLock &&\n    !_.isEmpty(addresses) &&\n    billingAddressId &&\n    !shipToDifferentAddress\n  ) {\n    const addressLocked = addresses?.find(\n      (a) =>\n        (a.id === billingAddressId || a.reference === billingAddressId) &&\n        a.countryCode !== countryCodeLock\n    )\n    if (!_.isEmpty(addressLocked)) return true\n  }\n  if (\n    countryCodeLock &&\n    !_.isEmpty(billingAddress) &&\n    !shipToDifferentAddress\n  ) {\n    return billingAddress?.['country_code'] !== countryCodeLock\n  }\n  if (\n    countryCodeLock &&\n    !_.isEmpty(shippingAddress) &&\n    shipToDifferentAddress\n  ) {\n    return shippingAddress?.['country_code'] !== countryCodeLock\n  }\n  if (\n    countryCodeLock &&\n    !_.isEmpty(addresses) &&\n    shippingAddressId &&\n    shipToDifferentAddress\n  ) {\n    const addressLocked = addresses?.find(\n      (a) =>\n        (a.id === shippingAddressId || a.reference === shippingAddressId) &&\n        a.countryCode !== countryCodeLock\n    )\n    if (!_.isEmpty(addressLocked)) return true\n  }\n  return false\n}\n","import React, { FunctionComponent, useContext } from 'react'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\nimport AddressContext from '#context/AddressContext'\nimport _ from 'lodash'\nimport {\n  billingAddressController,\n  shippingAddressController,\n  countryLockController,\n} from '#utils/addressesManager'\nimport OrderContext from '#context/OrderContext'\nimport CustomerContext from '#context/CustomerContext'\n\nconst propTypes = components.SaveAddressesButton.propTypes\nconst defaultProps = components.SaveAddressesButton.defaultProps\nconst displayName = components.SaveAddressesButton.displayName\n\ntype SaveAddressesButtonChildrenProps = FunctionChildren<\n  Omit<SaveAddressesButtonProps, 'children'>\n>\n\ntype SaveAddressesButtonProps = {\n  children?: SaveAddressesButtonChildrenProps\n  label?: string\n  onClick?: () => void\n} & JSX.IntrinsicElements['button']\n\nconst SaveAddressesButton: FunctionComponent<SaveAddressesButtonProps> = (\n  props\n) => {\n  const {\n    children,\n    label = 'Continue to delivery',\n    resource,\n    disabled = false,\n    onClick,\n    ...p\n  } = props\n  const {\n    errors,\n    billingAddress,\n    shipToDifferentAddress,\n    shippingAddress,\n    saveAddresses,\n    billingAddressId,\n    shippingAddressId,\n  } = useContext(AddressContext)\n  const { order } = useContext(OrderContext)\n  const { addresses } = useContext(CustomerContext)\n  const billingDisable = billingAddressController({\n    billingAddress,\n    errors,\n    billingAddressId,\n  })\n  const shippingDisable = shippingAddressController({\n    billingDisable,\n    errors,\n    shipToDifferentAddress,\n    shippingAddress,\n    shippingAddressId,\n  })\n  const countryLockDisable = countryLockController({\n    countryCodeLock: order?.shippingCountryCodeLock,\n    addresses,\n    shipToDifferentAddress,\n    billingAddressId,\n    billingAddress,\n    shippingAddress,\n    shippingAddressId,\n  })\n  const disable =\n    disabled || billingDisable || shippingDisable || countryLockDisable\n  const handleClick = async () => {\n    if (_.isEmpty(errors) && !disable) {\n      await saveAddresses()\n      onClick && onClick()\n    }\n  }\n  const parentProps = {\n    ...p,\n    label,\n    resource,\n    handleClick,\n    disabled: disable,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <button type=\"button\" disabled={disable} onClick={handleClick} {...p}>\n      {label}\n    </button>\n  )\n}\n\nSaveAddressesButton.propTypes = propTypes\nSaveAddressesButton.defaultProps = defaultProps\nSaveAddressesButton.displayName = displayName\n\nexport default SaveAddressesButton\n","import React, { FunctionComponent, useContext } from 'react'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\nimport _ from 'lodash'\nimport CustomerContext from '#context/CustomerContext'\n\nconst propTypes = components.SaveCustomerButton.propTypes\nconst defaultProps = components.SaveCustomerButton.defaultProps\nconst displayName = components.SaveCustomerButton.displayName\n\ntype SaveAddressesButtonChildrenProps = FunctionChildren<\n  Omit<SaveCustomerButtonProps, 'children'>\n>\n\ntype SaveCustomerButtonProps = {\n  children?: SaveAddressesButtonChildrenProps\n  label?: string\n  onClick?: () => void\n} & JSX.IntrinsicElements['button']\n\nconst SaveCustomerButton: FunctionComponent<SaveCustomerButtonProps> = (\n  props\n) => {\n  const { children, label = 'Save', resource, disabled, onClick, ...p } = props\n  const { errors, saveCustomerUser, customerEmail } = useContext(\n    CustomerContext\n  )\n  const disable = disabled || !_.isEmpty(errors) || _.isEmpty(customerEmail)\n  const handleClick = async () => {\n    if (_.isEmpty(errors) && !disable) {\n      await saveCustomerUser(customerEmail as string)\n      onClick && onClick()\n    }\n  }\n  const parentProps = {\n    ...p,\n    label,\n    resource,\n    handleClick,\n    disabled: disable,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <button type=\"button\" disabled={disable} onClick={handleClick} {...p}>\n      {label}\n    </button>\n  )\n}\n\nSaveCustomerButton.propTypes = propTypes\nSaveCustomerButton.defaultProps = defaultProps\nSaveCustomerButton.displayName = displayName\n\nexport default SaveCustomerButton\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Address, OrderCollection } from '@commercelayer/js-sdk'\nimport { getOrderContext } from '#reducers/OrderReducer'\n\nexport type ShippingAddressActionType =\n  | 'setShippingAddress'\n  | 'setShippingCustomerAddressId'\n\nexport interface ShippingAddressActionPayload {\n  _shippingAddressCloneId: string\n  shippingCustomerAddressId: string\n}\n\nexport type ShippingAddressState = Partial<ShippingAddressActionPayload>\n\nexport interface ShippingAddressAction {\n  type: ShippingAddressActionType\n  payload: Partial<ShippingAddressActionPayload>\n}\n\nexport const shippingAddressInitialState: ShippingAddressState = {\n  _shippingAddressCloneId: '',\n}\n\nexport type SetShippingAddress = (\n  id: string,\n  options?: {\n    config: CommerceLayerConfig\n    dispatch: Dispatch<ShippingAddressAction>\n    order?: OrderCollection | null\n    getOrder?: getOrderContext\n    customerAddressId?: string\n  }\n) => Promise<void>\n\nexport const setShippingAddress: SetShippingAddress = async (id, options) => {\n  try {\n    if (options?.order) {\n      if (options.customerAddressId) {\n        const address = await Address.withCredentials(options.config).find(id)\n        if (address.reference !== options.customerAddressId) {\n          await address.withCredentials(options.config).update({\n            reference: options.customerAddressId,\n          })\n        }\n      }\n      options.dispatch({\n        type: 'setShippingAddress',\n        payload: {\n          _shippingAddressCloneId: id,\n        },\n      })\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n\ntype SetShippingCustomerAddressId = (args: {\n  customerAddressId: string\n  dispatch: Dispatch<ShippingAddressAction>\n}) => void\n\nexport const setShippingCustomerAddressId: SetShippingCustomerAddressId = ({\n  customerAddressId,\n  dispatch,\n}) => {\n  dispatch({\n    type: 'setShippingCustomerAddressId',\n    payload: { shippingCustomerAddressId: customerAddressId },\n  })\n}\n\nconst type: ShippingAddressActionType[] = [\n  'setShippingAddress',\n  'setShippingCustomerAddressId',\n]\n\nconst shippingAddressReducer = (\n  state: ShippingAddressState,\n  reducer: ShippingAddressAction\n): ShippingAddressState =>\n  baseReducer<\n    ShippingAddressState,\n    ShippingAddressAction,\n    ShippingAddressActionType[]\n  >(state, reducer, type)\n\nexport default shippingAddressReducer\n","import ShippingAddressContext from '#context/ShippingAddressContext'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react'\nimport shippingAddressReducer, {\n  setShippingAddress,\n  shippingAddressInitialState,\n  setShippingCustomerAddressId,\n} from '#reducers/ShippingAddressReducer'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport components from '#config/components'\nimport OrderContext from '#context/OrderContext'\nimport AddressContext from '#context/AddressContext'\n\nconst propTypes = components.ShippingAddressContainer.propTypes\n\ntype Props = {\n  children: ReactNode\n}\nconst ShippingAddressContainer: FunctionComponent<Props> = (props) => {\n  const { children } = props\n  const [state, dispatch] = useReducer(\n    shippingAddressReducer,\n    shippingAddressInitialState\n  )\n  const config = useContext(CommerceLayerContext)\n  const { order, getOrder } = useContext(OrderContext)\n  const { setCloneAddress } = useContext(AddressContext)\n  useEffect(() => {\n    if (order) {\n      const customerAddressId = order.shippingAddress()?.reference || ''\n      setShippingCustomerAddressId({\n        customerAddressId,\n        dispatch,\n      })\n      setCloneAddress(customerAddressId, 'shippingAddress')\n    }\n  }, [order])\n  const contextValue = {\n    ...state,\n    setShippingAddress: async (\n      id: string,\n      options?: { customerAddressId: string }\n    ) => {\n      await setShippingAddress(id, {\n        config,\n        dispatch,\n        order,\n        getOrder,\n        customerAddressId: options?.customerAddressId,\n      })\n      setCloneAddress(id, 'shippingAddress')\n    },\n  }\n  return (\n    <ShippingAddressContext.Provider value={contextValue}>\n      {children}\n    </ShippingAddressContext.Provider>\n  )\n}\n\nShippingAddressContainer.propTypes = propTypes\n\nexport default ShippingAddressContainer\n","import AddressesContext from '#context/AddressContext'\nimport useRapidForm from 'rapid-form'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useRef,\n} from 'react'\nimport ShippingAddressFormContext from '#context/ShippingAddressFormContext'\nimport _ from 'lodash'\nimport { BaseError, CodeErrorType } from '#typings/errors'\nimport { AddressField } from '#reducers/AddressReducer'\nimport { AddressCountrySelectName, AddressInputName } from '#typings'\nimport components from '#config/components'\nimport OrderContext from '#context/OrderContext'\n\nconst propTypes = components.ShippingAddressForm.propTypes\n\ntype ShippingAddressFormProps = {\n  children: ReactNode\n  reset?: boolean\n} & Omit<JSX.IntrinsicElements['form'], 'onSubmit'>\n\nconst ShippingAddressForm: FunctionComponent<ShippingAddressFormProps> = (\n  props\n) => {\n  const { children, autoComplete = 'on', reset = false, ...p } = props\n  const { validation, values, errors, reset: resetForm } = useRapidForm()\n  const { setAddressErrors, setAddress, shipToDifferentAddress } = useContext(\n    AddressesContext\n  )\n  const { saveAddressToCustomerBook } = useContext(OrderContext)\n  const ref = useRef<HTMLFormElement>(null)\n  useEffect(() => {\n    if (!_.isEmpty(errors)) {\n      const formErrors: BaseError[] = []\n      for (const fieldName in errors) {\n        const { code, message } = errors[fieldName]\n        formErrors.push({\n          code: code as CodeErrorType,\n          message,\n          resource: 'shippingAddress',\n          field: fieldName,\n        })\n      }\n      !_.isEmpty(formErrors) &&\n        shipToDifferentAddress &&\n        setAddressErrors(formErrors)\n    } else if (!_.isEmpty(values) && shipToDifferentAddress) {\n      setAddressErrors([])\n      for (const name in values) {\n        const field = values[name]\n        if (field?.value) {\n          values[name.replace('shipping_address_', '')] = field.value\n          delete values[name]\n        }\n        if (field?.type === 'checkbox') {\n          delete values[name]\n          saveAddressToCustomerBook('ShippingAddress', field.checked)\n        }\n      }\n      setAddress({ values, resource: 'shippingAddress' })\n    }\n    if (reset && (!_.isEmpty(values) || !_.isEmpty(errors))) {\n      saveAddressToCustomerBook &&\n        saveAddressToCustomerBook('ShippingAddress', false)\n      if (ref) {\n        ref.current?.reset()\n        resetForm({ target: ref.current } as any)\n        setAddressErrors([])\n        setAddress({ values: {}, resource: 'shippingAddress' })\n      }\n    }\n  }, [values, errors, shipToDifferentAddress, reset])\n  const setValue = (\n    name: AddressField | AddressInputName | AddressCountrySelectName,\n    value: any\n  ) => {\n    const field: any = {\n      [name.replace('shipping_address_', '')]: value,\n    }\n    setAddress({ values: { ...values, ...field }, resource: 'shippingAddress' })\n  }\n  return (\n    <ShippingAddressFormContext.Provider value={{ validation, setValue }}>\n      <form ref={ref} autoComplete={autoComplete} {...p}>\n        {children}\n      </form>\n    </ShippingAddressFormContext.Provider>\n  )\n}\n\nShippingAddressForm.propTypes = propTypes\n\nexport default ShippingAddressForm\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.ShippingAmount.propTypes\nconst displayName = components.ShippingAmount.displayName\n\nconst ShippingAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"amount\" type=\"shipping\" {...props} />\n}\n\nShippingAmount.propTypes = propTypes\nShippingAmount.displayName = displayName\n\nexport default ShippingAmount\n","import React, {\n  FunctionComponent,\n  useContext,\n  useEffect,\n  Fragment,\n  ReactNode,\n} from 'react'\nimport SkuListsContext from '#context/SkuListsContext'\nimport components from '#config/components'\n\nconst propTypes = components.SkuList.propTypes\nconst displayName = components.SkuList.displayName\n\ntype SkuListProp = {\n  children: ReactNode\n  id: string\n}\n\nconst SkuList: FunctionComponent<SkuListProp> = (props) => {\n  const { id, children } = props\n  const { listIds } = useContext(SkuListsContext)\n  useEffect(() => {\n    if (!listIds.includes(id)) {\n      listIds.push(id)\n    }\n  }, [])\n  return <Fragment>{children}</Fragment>\n}\n\nSkuList.propTypes = propTypes\nSkuList.displayName = displayName\n\nexport default SkuList\n","import React, {\n  FunctionComponent,\n  useReducer,\n  useContext,\n  ReactNode,\n  useEffect,\n} from 'react'\nimport SkuListsContext from '#context/SkuListsContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport skuListsReducer, {\n  skuListsInitialState,\n  getSkuList,\n} from '#reducers/SkuListsReducer'\n\nimport components from '#config/components'\n\nconst propTypes = components.SkuListsContainer.propTypes\nconst displayName = components.SkuListsContainer.displayName\n\ntype SkuListsContainerProp = {\n  children: ReactNode\n}\n\nconst SkuListsContainer: FunctionComponent<SkuListsContainerProp> = (props) => {\n  const { children } = props\n  const [state, dispatch] = useReducer(skuListsReducer, skuListsInitialState)\n  const config = useContext(CommerceLayerContext)\n  useEffect(() => {\n    if (state.listIds.length > 0 && config.accessToken) {\n      getSkuList({ listIds: state.listIds, dispatch, config, state })\n    }\n  }, [config.accessToken])\n  return (\n    <SkuListsContext.Provider value={state}>\n      {children}\n    </SkuListsContext.Provider>\n  )\n}\n\nSkuListsContainer.propTypes = propTypes\nSkuListsContainer.displayName = displayName\n\nexport default SkuListsContainer\n","import { createContext } from 'react'\nimport { SkuOptionCollection } from '@commercelayer/js-sdk'\n\nexport interface SkuOptionChildrenInitalState {\n  skuOption?: SkuOptionCollection | null\n  skuCode: string\n}\n\nconst initial: SkuOptionChildrenInitalState = {\n  skuCode: '',\n}\n\nconst SkuOptionChildrenContext = createContext<SkuOptionChildrenInitalState>(\n  initial\n)\n\nexport default SkuOptionChildrenContext\n","import { Dispatch } from 'react'\nimport baseReducer from '#utils/baseReducer'\nimport { SkuOptionCollection } from '@commercelayer/js-sdk'\nimport { BaseUnsetState } from '#typings/index'\nimport { BaseError } from '#typings/errors'\n\nexport interface SkuOptionsState {\n  skuCode?: string\n  skuOptions?: SkuOptionCollection[]\n  errors?: BaseError[]\n}\n\ninterface GetSkuOptionsParams {\n  dispatch: Dispatch<SkuOptionsAction>\n  skuOptions?: SkuOptionCollection[]\n}\n\nexport interface GetSkuOptions {\n  (params: GetSkuOptionsParams): void\n}\n\nexport const getSkuOptions: GetSkuOptions = async (params) => {\n  const { skuOptions, dispatch } = params\n  dispatch({\n    type: 'setSkuOptions',\n    payload: {\n      skuOptions,\n    },\n  })\n}\n\nexport const unsetSkuOptionsState: BaseUnsetState<SkuOptionsAction> = (\n  dispatch\n) => {\n  dispatch({\n    type: 'setSkuOptions',\n    payload: {\n      skuOptions: [],\n    },\n  })\n  dispatch({\n    type: 'setErrors',\n    payload: {\n      errors: [],\n    },\n  })\n}\n\nexport type SkuOptionsActionType = 'setSkuOptions' | 'setErrors'\n\nconst actionType: SkuOptionsActionType[] = ['setSkuOptions', 'setErrors']\n\nexport interface SkuOptionsAction {\n  type: SkuOptionsActionType\n  payload: SkuOptionsState\n}\n\nexport const skuOptionsInitialState: SkuOptionsState = {\n  skuCode: '',\n  skuOptions: [],\n}\n\nconst skuOptionsReducer = (\n  state: SkuOptionsState,\n  reducer: SkuOptionsAction\n): SkuOptionsState =>\n  baseReducer<SkuOptionsState, SkuOptionsAction, SkuOptionsActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default skuOptionsReducer\n","import { createContext } from 'react'\nimport { skuOptionsInitialState } from '#reducers/SkuOptionsReducer'\n\nconst SkuOptionsContext = createContext(skuOptionsInitialState)\n\nexport default SkuOptionsContext\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useContext,\n  ReactNode,\n} from 'react'\nimport SkuOptionChildrenContext from '#context/SkuOptionChildrenContext'\nimport SkuOptionsContext from '#context/SkuOptionsContext'\nimport components from '#config/components'\n\nconst propTypes = components.SkuOption.propTypes\nconst displayName = components.SkuOption.displayName\n\nexport type SkuOptionProps = {\n  children: ReactNode\n  id: string\n}\n\nconst SkuOption: FunctionComponent<SkuOptionProps> = (props) => {\n  const { id } = props\n  const { skuOptions, skuCode } = useContext(SkuOptionsContext)\n  const items =\n    skuOptions &&\n    skuOptions\n      .filter((l) => l.id === id)\n      .map((skuOption, k) => {\n        return (\n          <SkuOptionChildrenContext.Provider\n            key={k}\n            value={{ skuOption, skuCode: skuCode as string }}\n          >\n            {props.children}\n          </SkuOptionChildrenContext.Provider>\n        )\n      })\n  return <Fragment>{items}</Fragment>\n}\n\nSkuOption.propTypes = propTypes\nSkuOption.displayName = displayName\n\nexport default SkuOption\n","import React, { FunctionComponent, useContext } from 'react'\nimport BaseInput from './utils/BaseInput'\nimport ItemContext from '#context/ItemContext'\nimport SkuOptionChildrenContext from '#context/SkuOptionChildrenContext'\nimport _ from 'lodash'\nimport { ItemOptions } from '#reducers/ItemReducer'\nimport components from '#config/components'\nimport { BaseInputComponentProps } from '#typings'\n\nconst propTypes = components.SkuOptionInput.propTypes\nconst displayName = components.SkuOptionInput.displayName\n\ntype SkuOptionInputProps = BaseInputComponentProps &\n  JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['textarea']\n\nconst SkuOptionInput: FunctionComponent<SkuOptionInputProps> = (props) => {\n  const { name } = props\n  const { option, setOption } = useContext(ItemContext)\n  const { skuOption, skuCode } = useContext(SkuOptionChildrenContext)\n  const handleChange: BaseInputComponentProps['onChange'] = (event) => {\n    const val = event.target.value\n    const options = _.has(option, `${skuCode}.${skuOption?.id}`)\n      ? option[skuCode][`${skuOption?.id}`]['options']\n      : {}\n    const o = {\n      [skuCode]: {\n        ...option[skuCode],\n        [`${skuOption?.id}`]: {\n          skuOptionId: skuOption?.id,\n          options: {\n            ...options,\n            [name]: val,\n          },\n        },\n      },\n    } as ItemOptions\n    setOption && setOption(o)\n  }\n  return <BaseInput onChange={handleChange} {...props} />\n}\n\nSkuOptionInput.propTypes = propTypes\nSkuOptionInput.displayName = displayName\n\nexport default SkuOptionInput\n","import React, {\n  FunctionComponent,\n  useReducer,\n  useContext,\n  useEffect,\n  ReactNode,\n} from 'react'\nimport SkuOptionsContext from '#context/SkuOptionsContext'\nimport skuOptionsReducer, {\n  skuOptionsInitialState,\n} from '#reducers/SkuOptionsReducer'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport _ from 'lodash'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport ItemContext from '#context/ItemContext'\nimport { getSkuOptions } from '#reducers/SkuOptionsReducer'\nimport components from '#config/components'\n\nconst propTypes = components.SkuOptionsContainer.propTypes\nconst displayName = components.SkuOptionsContainer.displayName\n\ntype SkuOptionsContainerProp = {\n  children: ReactNode\n  skuCode?: string\n}\n\nconst SkuOptionsContainer: FunctionComponent<SkuOptionsContainerProp> = (\n  props\n) => {\n  const { skuCode, children } = props\n  const [state, dispatch] = useReducer(\n    skuOptionsReducer,\n    skuOptionsInitialState\n  )\n  const config = useContext(CommerceLayerContext)\n  const { item, items } = useContext(ItemContext)\n  const sCode =\n    !_.isEmpty(items) && skuCode\n      ? items[skuCode]?.code\n      : skuCode || getCurrentItemKey(item)\n  const skuOptionsValue = { ...state, skuCode: sCode }\n  useEffect(() => {\n    if (sCode && item[sCode].skuOptions) {\n      getSkuOptions({\n        skuOptions: item[sCode].skuOptions()?.toArray(),\n        dispatch,\n      })\n    }\n    return (): void => {\n      if (_.isEmpty(sCode)) {\n        dispatch({\n          type: 'setSkuOptions',\n          payload: {\n            skuOptions: [],\n          },\n        })\n      }\n    }\n  }, [config, sCode])\n  return (\n    <SkuOptionsContext.Provider value={skuOptionsValue}>\n      {children}\n    </SkuOptionsContext.Provider>\n  )\n}\n\nSkuOptionsContainer.propTypes = propTypes\nSkuOptionsContainer.displayName = displayName\n\nexport default SkuOptionsContainer\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.SubTotalAmount.propTypes\nconst defaultProps = components.SubTotalAmount.defaultProps\nconst displayName = components.SubTotalAmount.displayName\n\nconst SubTotalAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"amount\" type=\"subtotal\" {...props} />\n}\n\nSubTotalAmount.propTypes = propTypes\nSubTotalAmount.defaultProps = defaultProps\nSubTotalAmount.displayName = displayName\n\nexport default SubTotalAmount\n","import React, { FunctionComponent } from 'react'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { FunctionChildren } from '#typings/index'\n\nconst propTypes = components.SubmitButton.propTypes\nconst defaultProps = components.SubmitButton.defaultProps\nconst displayName = components.SubmitButton.displayName\n\ntype SubmitButtonChildrenProps = FunctionChildren<\n  Omit<SubmitButtonProps, 'children'>\n>\n\ntype SubmitButtonProps = {\n  children?: SubmitButtonChildrenProps\n  label?: string\n} & JSX.IntrinsicElements['button']\n\nconst SubmitButton: FunctionComponent<SubmitButtonProps> = (props) => {\n  const { children, label = 'Submit', ...p } = props\n  const parentProps = {\n    ...p,\n    label,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <button type=\"submit\" {...p}>\n      {label}\n    </button>\n  )\n}\n\nSubmitButton.propTypes = propTypes\nSubmitButton.defaultProps = defaultProps\nSubmitButton.displayName = displayName\n\nexport default SubmitButton\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.TaxesAmount.propTypes\nconst defaultProps = components.TaxesAmount.defaultProps\nconst displayName = components.TaxesAmount.displayName\n\nconst TaxesAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"amount\" type=\"totalTax\" {...props} />\n}\n\nTaxesAmount.propTypes = propTypes\nTaxesAmount.defaultProps = defaultProps\nTaxesAmount.displayName = displayName\n\nexport default TaxesAmount\n","import React, { FunctionComponent } from 'react'\nimport BaseOrderPrice from './utils/BaseOrderPrice'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings'\n\nconst propTypes = components.TotalAmount.propTypes\nconst defaultProps = components.TotalAmount.defaultProps\nconst displayName = components.TotalAmount.displayName\n\nconst TotalAmount: FunctionComponent<BaseAmountComponent> = (props) => {\n  return <BaseOrderPrice base=\"totalAmount\" type=\"withTaxes\" {...props} />\n}\n\nTotalAmount.propTypes = propTypes\nTotalAmount.defaultProps = defaultProps\nTotalAmount.displayName = displayName\n\nexport default TotalAmount\n","import React, { Fragment, FunctionComponent, ReactNode } from 'react'\nimport _ from 'lodash'\nimport PropTypes from 'prop-types'\nimport { BaseSelectorType } from '#typings'\nimport { VariantsObject, SetSkuCode } from '#reducers/VariantReducer'\nimport { VariantOptions } from '#components/VariantSelector'\n\nexport const propTypes = {\n  variants: PropTypes.any.isRequired,\n  onChange: PropTypes.func,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      code: PropTypes.string.isRequired,\n      lineItem: PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        imageUrl: PropTypes.string,\n      }),\n    }).isRequired\n  ).isRequired,\n  name: PropTypes.string,\n  children: PropTypes.func,\n  type: PropTypes.oneOf<BaseSelectorType>(['select', 'radio']),\n  loader: PropTypes.element,\n  placeholder: PropTypes.string,\n  skuCode: PropTypes.string,\n}\n\nexport type VariantTemplateProps = {\n  variants: VariantsObject | Record<string, any>\n  handleChange?: SetSkuCode\n  options: VariantOptions[]\n  type?: BaseSelectorType\n  loader?: ReactNode\n  placeholder?: string\n  skuCode?: string\n} & JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['select']\n\nconst VariantTemplate: FunctionComponent<VariantTemplateProps> = (props) => {\n  const {\n    id,\n    variants,\n    type,\n    placeholder,\n    options,\n    skuCode,\n    handleChange,\n    ...prs\n  } = props\n  const vars = _.keys(variants).map((v, k) => {\n    const checked = skuCode === v\n    return type === 'select' ? (\n      <option\n        key={variants[v].id}\n        data-sku-id={variants[v].id}\n        value={variants[v].code}\n      >\n        {options.length > 0 ? options[k].label : variants[v].name}\n      </option>\n    ) : (\n      <Fragment key={variants[v].id}>\n        <input\n          id={id && `${id}-${k}`}\n          defaultChecked={checked}\n          type=\"radio\"\n          value={variants[v].code}\n          onChange={(e): void =>\n            handleChange && handleChange(e.target.value, variants[v].id)\n          }\n          {...prs}\n        />\n        {options.length > 0 ? options[k].label : variants[v].name}\n      </Fragment>\n    )\n  })\n  if (type === 'select') {\n    return (\n      <select\n        id={id}\n        onChange={(e): void => {\n          const v = e.target.value\n          const i = e.target.selectedIndex\n          const id = e.target[i].dataset.skuId as string\n          handleChange && handleChange(v, id)\n        }}\n        value={skuCode || ''}\n        {...prs}\n      >\n        <option disabled={!!skuCode}>{placeholder}</option>\n        {vars}\n      </select>\n    )\n  }\n  return <Fragment>{vars}</Fragment>\n}\n\nVariantTemplate.propTypes = propTypes\n\nexport default VariantTemplate\n","import { SkuCollection } from '@commercelayer/js-sdk'\n\nconst getSkus = (prices: SkuCollection[]): Record<string, any> => {\n  const obj: Record<string, any> = {}\n  prices.map((sku) => {\n    obj[sku.code] = sku\n  })\n  return obj\n}\n\nexport default getSkus\n","import CLayer, { SkuCollection } from '@commercelayer/js-sdk'\nimport { VariantOptions } from '#components/VariantSelector'\nimport { Dispatch } from 'react'\nimport baseReducer from '#utils/baseReducer'\nimport getErrorsByCollection from '#utils/getErrorsByCollection'\nimport getSkus from '#utils/getSkus'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { Items, CustomLineItem, SetCustomLineItems } from './ItemReducer'\nimport { BaseError } from '#typings/errors'\nimport _ from 'lodash'\n\ntype SetSkuCodeVariantParams = {\n  code: string\n  id: string\n  config: CommerceLayerConfig\n  dispatch: Dispatch<VariantAction>\n  setItem: ((item: Items) => void) | undefined\n}\n\nexport interface SetSkuCodeVariant {\n  (params: SetSkuCodeVariantParams): void\n}\n\ntype SetVariantSkuCodesParams = {\n  skuCodes: VariantOptions[]\n  dispatch: Dispatch<VariantAction>\n  setCustomLineItems?: SetCustomLineItems\n}\n\nexport interface SetVariantSkuCodes {\n  (params: SetVariantSkuCodesParams): void\n}\n\nexport interface VariantsObject {\n  [key: string]: SkuCollection\n}\n\nexport type SetSkuCode = (\n  code: string,\n  id: string,\n  lineItem?: CustomLineItem\n) => void\n\nexport interface VariantPayload {\n  loading?: boolean\n  variants?: VariantsObject | Record<string, any>\n  skuCodes?: string[]\n  skuCode?: string\n  errors?: BaseError[]\n  currentSkuId?: string\n  currentSkuInventory?: any\n  currentQuantity?: number\n  currentPrices?: SkuCollection[]\n  setSkuCode?: SetSkuCode\n  setSkuCodes?: (skuCodes: VariantOptions[]) => void\n}\n\nexport interface VariantState extends VariantPayload {\n  skuCodes: string[]\n  variants: VariantsObject | Record<string, any>\n}\n\nexport interface VariantAction {\n  type: VariantActionType\n  payload: VariantPayload\n}\n\nexport const setVariantSkuCodes: SetVariantSkuCodes = ({\n  skuCodes,\n  dispatch,\n  setCustomLineItems,\n}) => {\n  const lineItems: any = {}\n  const sCodes = skuCodes.map((s) => {\n    if (_.has(s, 'lineItem')) {\n      lineItems[s.code] = s.lineItem\n    }\n    return s.code\n  })\n  if (!_.isEmpty(lineItems)) {\n    setCustomLineItems && setCustomLineItems(lineItems)\n  }\n  dispatch({\n    type: 'setSkuCodes',\n    payload: { skuCodes: sCodes },\n  })\n}\n\nexport interface UnsetVariantState {\n  (dispatch: Dispatch<VariantAction>): void\n}\n\nexport const setSkuCode: SetSkuCodeVariant = (params) => {\n  const { id, code, config, setItem, dispatch } = params\n  if (id) {\n    CLayer.Sku.withCredentials(config)\n      .includes('skuOptions')\n      .find(id)\n      .then((s) => {\n        setItem &&\n          setItem({\n            [`${code}`]: s,\n          })\n      })\n      .catch((c) => {\n        const errors = getErrorsByCollection(c, 'variant')\n        dispatch({\n          type: 'setErrors',\n          payload: {\n            errors,\n          },\n        })\n      })\n  }\n}\n\ntype GetVariantsParams = {\n  config: CommerceLayerConfig\n  state: VariantState\n  skuCode: string\n  dispatch: Dispatch<VariantAction>\n  filters: Record<string, any>\n  setItem: ((item: Items) => void) | undefined\n}\n\nexport interface GetVariants {\n  (params: GetVariantsParams): void\n}\n\nexport const getVariants: GetVariants = (params) => {\n  const { config, state, skuCode, dispatch, setItem, filters } = params\n  CLayer.Sku.withCredentials(config)\n    .where({ codeIn: state.skuCodes.join(','), ...filters })\n    .all()\n    .then((r) => {\n      const skusObj = getSkus(r.toArray())\n      if (skuCode) {\n        setSkuCode({\n          code: skusObj[skuCode].code,\n          id: skusObj[skuCode].id,\n          config,\n          dispatch,\n          setItem,\n        })\n      }\n      dispatch({\n        type: 'setVariants',\n        payload: {\n          variants: skusObj,\n        },\n      })\n      dispatch({\n        type: 'setLoading',\n        payload: {\n          loading: false,\n        },\n      })\n    })\n    .catch((c) => {\n      const errors = getErrorsByCollection(c, 'variant')\n      dispatch({\n        type: 'setErrors',\n        payload: {\n          errors,\n        },\n      })\n    })\n}\n\nexport const unsetVariantState: UnsetVariantState = (dispatch) => {\n  dispatch({\n    type: 'setSkuCode',\n    payload: { skuCode: '' },\n  })\n  dispatch({\n    type: 'setVariants',\n    payload: { variants: {} },\n  })\n  dispatch({\n    type: 'setLoading',\n    payload: { loading: false },\n  })\n}\n\nexport const variantInitialState: VariantState = {\n  loading: false,\n  variants: {},\n  skuCodes: [],\n  skuCode: '',\n  errors: [],\n  currentSkuId: '',\n  currentSkuInventory: {\n    available: false,\n    quantity: 0,\n    levels: [],\n  },\n  currentQuantity: 1,\n  currentPrices: [],\n}\n\nexport type VariantActionType =\n  | 'setLoading'\n  | 'setVariants'\n  | 'setSkuCodes'\n  | 'setSkuCode'\n  | 'setCurrentSkuId'\n  | 'setCurrentSkuInventory'\n  | 'setCurrentPrices'\n  | 'setErrors'\n\nconst actionType: VariantActionType[] = [\n  'setLoading',\n  'setVariants',\n  'setSkuCodes',\n  'setSkuCode',\n  'setCurrentSkuId',\n  'setCurrentSkuInventory',\n  'setCurrentPrices',\n  'setErrors',\n]\n\nconst variantReducer = (\n  state: VariantState,\n  reducer: VariantAction\n): VariantState =>\n  baseReducer<VariantState, VariantAction, VariantActionType[]>(\n    state,\n    reducer,\n    actionType\n  )\n\nexport default variantReducer\n","import { createContext } from 'react'\nimport { variantInitialState } from '#reducers/VariantReducer'\n\nconst VariantsContext = createContext(variantInitialState)\n\nexport default VariantsContext\n","import React, {\n  Fragment,\n  FunctionComponent,\n  useContext,\n  useEffect,\n  ReactElement,\n  ReactNode,\n} from 'react'\nimport VariantTemplate from './utils/VariantTemplate'\nimport Parent from './utils/Parent'\nimport VariantsContext from '#context/VariantsContext'\nimport components from '#config/components'\nimport { BaseSelectorType } from '#typings'\nimport { FunctionChildren } from '#typings/index'\nimport { VariantsObject, SetSkuCode } from '#reducers/VariantReducer'\n\nconst propTypes = components.VariantSelector.propTypes\nconst defaultProps = components.VariantSelector.defaultProps\nconst displayName = components.VariantSelector.displayName\n\nexport interface VariantOptions {\n  label: string\n  code: string\n  lineItem?: {\n    name: string\n    imageUrl?: string | null\n  } | null\n}\n\ntype VariantSelectorChildrenProps = FunctionChildren<\n  Omit<VariantSelectorProps, 'children'> & {\n    variants: VariantsObject\n    handleSelect: SetSkuCode\n  }\n>\n\ntype VariantSelectorProps = {\n  children?: VariantSelectorChildrenProps\n  options: VariantOptions[]\n  type?: BaseSelectorType\n  loader?: ReactNode\n  placeholder?: string\n  skuCode?: string\n} & JSX.IntrinsicElements['input'] &\n  JSX.IntrinsicElements['select']\n\nconst VariantSelector: FunctionComponent<VariantSelectorProps> = (props) => {\n  const { children, type, placeholder, skuCode, name, options, ...prs } = props\n  const {\n    setSkuCode,\n    skuCode: variantSkuCode,\n    loading,\n    variants,\n    setSkuCodes,\n  } = useContext(VariantsContext)\n  useEffect(() => {\n    setSkuCodes && setSkuCodes(options)\n    return (): void => {\n      setSkuCodes && setSkuCodes([])\n    }\n  }, [options])\n  const sCode = variantSkuCode || skuCode || ''\n  const DefaultTemplate = (): ReactElement =>\n    loading ? (\n      <Fragment>{props.loader || 'Loading...'}</Fragment>\n    ) : (\n      <VariantTemplate\n        variants={variants}\n        type={type}\n        placeholder={placeholder as string}\n        skuCode={sCode}\n        options={options}\n        handleChange={setSkuCode}\n        name={name as string}\n        {...prs}\n      />\n    )\n  const parentProps = {\n    variants,\n    loading,\n    handleSelect: setSkuCode,\n    skuCode: sCode,\n    ...props,\n  }\n  return children ? (\n    <Parent {...parentProps}>{children}</Parent>\n  ) : (\n    <Fragment>\n      <DefaultTemplate />\n    </Fragment>\n  )\n}\n\nVariantSelector.propTypes = propTypes\nVariantSelector.defaultProps = defaultProps\nVariantSelector.displayName = displayName\n\nexport default VariantSelector\n","import React, {\n  useEffect,\n  FunctionComponent,\n  useReducer,\n  useContext,\n  ReactNode,\n} from 'react'\nimport variantReducer, {\n  variantInitialState,\n  unsetVariantState,\n  setSkuCode,\n  getVariants,\n} from '#reducers/VariantReducer'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport VariantsContext from '#context/VariantsContext'\nimport { VariantState } from '#reducers/VariantReducer'\nimport { setVariantSkuCodes } from '#reducers/VariantReducer'\nimport _ from 'lodash'\nimport getCurrentItemKey from '#utils/getCurrentItemKey'\nimport ItemContext from '#context/ItemContext'\nimport components from '#config/components'\n\nconst propTypes = components.VariantsContainer.propTypes\nconst defaultProps = components.VariantsContainer.defaultProps\nconst displayName = components.VariantsContainer.displayName\n\ntype VariantsContainerProps = {\n  children: ReactNode\n  filters?: Record<string, any>\n  skuCode?: string\n}\n\nconst VariantsContainer: FunctionComponent<VariantsContainerProps> = (\n  props\n) => {\n  const { children, skuCode = '', filters = {} } = props\n  const config = useContext(CommerceLayerContext)\n  const {\n    setItem,\n    setItems,\n    items,\n    item: currentItem,\n    setCustomLineItems,\n    skuCode: itemSkuCode,\n  } = useContext(ItemContext)\n  const [state, dispatch] = useReducer(variantReducer, variantInitialState)\n  const sCode =\n    getCurrentItemKey(currentItem) ||\n    skuCode ||\n    state.skuCode ||\n    itemSkuCode ||\n    ''\n  useEffect(() => {\n    if (!_.isEmpty(items) && !_.isEmpty(state.variants)) {\n      if (!_.isEqual(items, state.variants)) {\n        const mergeItems = { ...items, ...state.variants }\n        setItems && setItems(mergeItems)\n      }\n    }\n    if (state.skuCodes.length >= 1 && config.accessToken) {\n      dispatch({\n        type: 'setLoading',\n        payload: { loading: true },\n      })\n      getVariants({\n        config,\n        state,\n        dispatch,\n        setItem,\n        skuCode: sCode,\n        filters,\n      })\n    }\n    return (): void => unsetVariantState(dispatch)\n  }, [config])\n  const variantValue: VariantState = {\n    ...state,\n    skuCode: sCode,\n    setSkuCode: (code, id, lineItem = {}) => {\n      if (!_.isEmpty(lineItem)) {\n        setCustomLineItems && setCustomLineItems({ [code]: lineItem })\n      }\n      setSkuCode({\n        code,\n        id,\n        config,\n        setItem,\n        dispatch,\n      })\n    },\n    setSkuCodes: (skuCodes) =>\n      setVariantSkuCodes({ skuCodes, dispatch, setCustomLineItems }),\n  }\n  return (\n    <VariantsContext.Provider value={variantValue}>\n      {children}\n    </VariantsContext.Provider>\n  )\n}\n\nVariantsContainer.propTypes = propTypes\nVariantsContainer.defaultProps = defaultProps\nVariantsContainer.displayName = displayName\n\nexport default VariantsContainer\n","import baseReducer from '#utils/baseReducer'\nimport { Dispatch } from 'react'\nimport { BaseError } from '#typings/errors'\nimport {\n  OrderCollection,\n  Shipment,\n  ShipmentCollection,\n  ShippingMethod,\n} from '@commercelayer/js-sdk'\nimport { CommerceLayerConfig } from '#context/CommerceLayerContext'\nimport { getOrderContext } from './OrderReducer'\n\nexport type ShipmentActionType =\n  | 'setErrors'\n  | 'setShipments'\n  | 'setShippingMethod'\n\nexport interface ShipmentActionPayload {\n  errors: BaseError[]\n  shipments: ShipmentCollection[]\n}\n\nexport type ShipmentState = Partial<ShipmentActionPayload>\n\nexport interface ShipmentAction {\n  type: ShipmentActionType\n  payload: Partial<ShipmentActionPayload>\n}\n\nexport const shipmentInitialState: ShipmentState = {\n  errors: [],\n}\n\nexport interface SetShipmentErrors {\n  <V extends BaseError[]>(errors: V, dispatch?: Dispatch<ShipmentAction>): void\n}\n\nexport const setShipmentErrors: SetShipmentErrors = (errors, dispatch) => {\n  dispatch &&\n    dispatch({\n      type: 'setErrors',\n      payload: {\n        errors,\n      },\n    })\n}\n\ntype GetShipments = (args: {\n  order: OrderCollection\n  dispatch: Dispatch<ShipmentAction>\n  config: CommerceLayerConfig\n}) => Promise<void>\n\nexport const getShipments: GetShipments = async ({\n  order,\n  dispatch,\n  config,\n}) => {\n  try {\n    const shipments = await order\n      .withCredentials(config)\n      .shipments()\n      ?.includes(\n        'availableShippingMethods',\n        'availableShippingMethods.deliveryLeadTimeForShipment',\n        'shipmentLineItems',\n        'shipmentLineItems.lineItem',\n        'stockTransfers',\n        'shippingMethod'\n      )\n      .load()\n    console.log('shipments', shipments)\n    dispatch({\n      type: 'setShipments',\n      payload: { shipments: shipments?.toArray() },\n    })\n  } catch (error) {\n    console.error(error)\n  }\n}\n\ntype SetShippingMethod = (args: {\n  config: CommerceLayerConfig\n  shipmentId: string\n  shippingMethodId: string\n  order?: OrderCollection\n  getOrder?: getOrderContext\n}) => Promise<void>\n\nexport const setShippingMethod: SetShippingMethod = async ({\n  config,\n  shipmentId,\n  shippingMethodId,\n  getOrder,\n  order,\n}) => {\n  try {\n    if (shippingMethodId) {\n      const shipment = await Shipment.withCredentials(config)\n        .includes(\n          'availableShippingMethods',\n          'availableShippingMethods.deliveryLeadTimeForShipment',\n          'shipmentLineItems',\n          'shipmentLineItems.lineItem',\n          'stockTransfers',\n          'shippingMethod'\n        )\n        .find(shipmentId)\n      const shippingMethod = ShippingMethod.build({ id: shippingMethodId })\n      await shipment.withCredentials(config).update({ shippingMethod })\n      getOrder && order && getOrder(order.id)\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst type: ShipmentActionType[] = [\n  'setErrors',\n  'setShipments',\n  'setShippingMethod',\n]\n\nconst shipmentReducer = (\n  state: ShipmentState,\n  reducer: ShipmentAction\n): ShipmentState =>\n  baseReducer<ShipmentState, ShipmentAction, ShipmentActionType[]>(\n    state,\n    reducer,\n    type\n  )\n\nexport default shipmentReducer\n","import { createContext } from 'react'\nimport {\n  ShipmentState,\n  SetShipmentErrors,\n  setShipmentErrors,\n} from '#reducers/ShipmentReducer'\n\ntype DefaultContext = {\n  setShipmentErrors: SetShipmentErrors\n  setShippingMethod: (\n    shipmentId: string,\n    shippingMethodId: string\n  ) => Promise<void>\n} & ShipmentState\n\nexport const defaultShipmentContext = {\n  setShipmentErrors,\n  setShippingMethod: async (): Promise<void> => {\n    return\n  },\n}\n\nconst ShipmentContext = createContext<DefaultContext>(defaultShipmentContext)\n\nexport default ShipmentContext\n","import ShipmentContext, {\n  defaultShipmentContext,\n} from '#context/ShipmentContext'\nimport React, {\n  FunctionComponent,\n  ReactNode,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react'\nimport shipmentReducer, {\n  shipmentInitialState,\n  getShipments,\n  setShippingMethod,\n} from '#reducers/ShipmentReducer'\nimport OrderContext from '#context/OrderContext'\nimport CommerceLayerContext from '#context/CommerceLayerContext'\nimport components from '#config/components'\nimport { BaseError } from '#typings/errors'\n\nconst propTypes = components.ShipmentsContainer.propTypes\nconst displayName = components.ShipmentsContainer.displayName\n\nexport type ShipmentsContainer = {\n  children: ReactNode\n}\nconst ShipmentsContainer: FunctionComponent<ShipmentsContainer> = (props) => {\n  const { children } = props\n  const [state, dispatch] = useReducer(shipmentReducer, shipmentInitialState)\n  const { order, getOrder } = useContext(OrderContext)\n  const config = useContext(CommerceLayerContext)\n  useEffect(() => {\n    // TODO: Get shipments\n    if (order) {\n      getShipments({ order, dispatch, config })\n    }\n  }, [order])\n  const contextValue = {\n    ...state,\n    setShipmentErrors: (errors: BaseError[]) =>\n      defaultShipmentContext['setShipmentErrors'](errors, dispatch),\n    setShippingMethod: async (shipmentId: string, shippingMethodId: string) =>\n      await setShippingMethod({\n        shippingMethodId,\n        shipmentId,\n        config,\n        getOrder,\n        order,\n      }),\n  }\n  return (\n    <ShipmentContext.Provider value={contextValue}>\n      {children}\n    </ShipmentContext.Provider>\n  )\n}\n\nShipmentsContainer.propTypes = propTypes\nShipmentsContainer.displayName = displayName\n\nexport default ShipmentsContainer\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useContext,\n  ReactNode,\n} from 'react'\nimport ShipmentContext from '#context/ShipmentContext'\nimport ShipmentChildrenContext from '#context/ShipmentChildrenContext'\nimport components from '#config/components'\n\nconst propTypes = components.Shipment.propTypes\nconst displayName = components.Shipment.displayName\n\ntype ShipmentProps = {\n  children: ReactNode\n}\n\nconst Shipment: FunctionComponent<ShipmentProps> = ({ children }) => {\n  const { shipments } = useContext(ShipmentContext)\n  const components =\n    shipments &&\n    shipments.map((shipment, k) => {\n      const shipmentLineItems = shipment.shipmentLineItems()?.toArray()\n      const lineItems = shipmentLineItems?.map((shipmentLineItem) =>\n        shipmentLineItem.lineItem()\n      )\n      const shippingMethods = shipment.availableShippingMethods()?.toArray()\n      const currentShippingMethodId = shipment.shippingMethod()?.id\n      const stockTransfers = shipment.stockTransfers()?.toArray()\n      const shipmentProps = {\n        lineItems,\n        shippingMethods,\n        currentShippingMethodId,\n        stockTransfers,\n      }\n      return (\n        <ShipmentChildrenContext.Provider key={k} value={shipmentProps}>\n          {children}\n        </ShipmentChildrenContext.Provider>\n      )\n    })\n  return <Fragment>{components}</Fragment>\n}\n\nShipment.propTypes = propTypes\nShipment.displayName = displayName\n\nexport default Shipment\n","import { createContext } from 'react'\nimport {\n  DeliveryLeadTimeCollection,\n  ShippingMethodCollection,\n} from '@commercelayer/js-sdk'\n\nexport interface InitialShippingMethodContext {\n  shippingMethod: ShippingMethodCollection | Record<string, string>\n  deliveryLeadTimeForShipment:\n    | DeliveryLeadTimeCollection\n    | Record<string, string>\n    | null\n  currentShippingMethodId?: string\n}\n\nconst initial: InitialShippingMethodContext = {\n  shippingMethod: {},\n  deliveryLeadTimeForShipment: {},\n}\n\nconst ShippingMethodChildrenContext = createContext<InitialShippingMethodContext>(\n  initial\n)\n\nexport default ShippingMethodChildrenContext\n","import React, {\n  FunctionComponent,\n  Fragment,\n  useContext,\n  ReactNode,\n  useEffect,\n  useState,\n} from 'react'\nimport ShippingMethodChildrenContext from '#context/ShippingMethodChildrenContext'\nimport components from '#config/components'\nimport ShipmentChildrenContext from '#context/ShipmentChildrenContext'\nimport _ from 'lodash'\n\nconst propTypes = components.ShippingMethod.propTypes\nconst displayName = components.ShippingMethod.displayName\n\ntype ShippingMethodProps = {\n  children: ReactNode\n  readonly?: boolean\n  emptyText?: string\n}\n\nconst ShippingMethod: FunctionComponent<ShippingMethodProps> = (props) => {\n  const {\n    children,\n    readonly,\n    emptyText = `There are not any shipping method available`,\n  } = props\n  const { shippingMethods, currentShippingMethodId } = useContext(\n    ShipmentChildrenContext\n  )\n  const [items, setItems] = useState<JSX.Element[]>([])\n  useEffect(() => {\n    const methods =\n      shippingMethods &&\n      shippingMethods\n        .filter((s) => {\n          if (readonly) return s.id === currentShippingMethodId\n          return true\n        })\n        .map((shippingMethod, k) => {\n          // NOTE: Remove with new SDK version\n          // @ts-ignore\n          const deliveryLeadTimeForShipment = shippingMethod.deliveryLeadTimeForShipment()\n          const shippingProps = {\n            shippingMethod,\n            currentShippingMethodId,\n            deliveryLeadTimeForShipment,\n          }\n          return (\n            <ShippingMethodChildrenContext.Provider\n              key={k}\n              value={shippingProps}\n            >\n              {children}\n            </ShippingMethodChildrenContext.Provider>\n          )\n        })\n    if (methods) setItems(methods)\n  }, [currentShippingMethodId])\n  const components = (!_.isEmpty(items) && items) || emptyText\n  return <Fragment>{components}</Fragment>\n}\n\nShippingMethod.propTypes = propTypes\nShippingMethod.displayName = displayName\n\nexport default ShippingMethod\n","import React, { useContext, FunctionComponent, ReactNode } from 'react'\nimport ShippingMethodChildrenContext from '#context/ShippingMethodChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\n\nconst propTypes = components.ShippingMethodName.propTypes\nconst displayName = components.ShippingMethodName.displayName\n\ntype LineItemNameChildrenProps = Omit<LineItemNameProps, 'children'>\n\ntype LineItemNameProps = {\n  children?: (props: LineItemNameChildrenProps) => ReactNode\n} & JSX.IntrinsicElements['p']\n\nconst ShippingMethodName: FunctionComponent<LineItemNameProps> = (props) => {\n  const { shippingMethod } = useContext(ShippingMethodChildrenContext)\n  const labelName = shippingMethod['name']\n  const parentProps = {\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <p {...props}>{labelName}</p>\n  )\n}\n\nShippingMethodName.propTypes = propTypes\nShippingMethodName.displayName = displayName\n\nexport default ShippingMethodName\n","import React, { useContext, FunctionComponent, ReactNode } from 'react'\nimport ShippingMethodChildrenContext from '#context/ShippingMethodChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport ShipmentContext from '#context/ShipmentContext'\nimport { ShippingMethodCollection } from '@commercelayer/js-sdk'\n\nconst propTypes = components.ShippingMethodRadioButton.propTypes\nconst displayName = components.ShippingMethodRadioButton.displayName\n\ntype ShippingMethodRadioButtonChildrenProps = Omit<\n  ShippingMethodRadioButtonProps,\n  'children'\n>\n\ntype ShippingMethodRadioButtonProps = {\n  children?: (props: ShippingMethodRadioButtonChildrenProps) => ReactNode\n  onChange?: (\n    shippingMethod: ShippingMethodCollection | Record<string, any>\n  ) => void\n} & JSX.IntrinsicElements['input']\n\nconst ShippingMethodRadioButton: FunctionComponent<ShippingMethodRadioButtonProps> = (\n  props\n) => {\n  const { onChange, ...p } = props\n  const { shippingMethod, currentShippingMethodId } = useContext(\n    ShippingMethodChildrenContext\n  )\n  const { setShippingMethod } = useContext(ShipmentContext)\n  const shipmentId = shippingMethod.shipmentId || ''\n  const shippingMethodId = shippingMethod.id\n  const name = `shipment-${shipmentId}`\n  const checked = shippingMethod.id === currentShippingMethodId\n  const handleOnChange = async () => {\n    await setShippingMethod(shipmentId, shippingMethodId)\n    onChange && onChange(shippingMethod)\n  }\n  const parentProps = {\n    handleOnChange,\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <input\n      type=\"radio\"\n      name={name}\n      onChange={handleOnChange}\n      defaultChecked={checked}\n      {...p}\n    />\n  )\n}\n\nShippingMethodRadioButton.propTypes = propTypes\nShippingMethodRadioButton.displayName = displayName\n\nexport default ShippingMethodRadioButton\n","import React, {\n  FunctionComponent,\n  useState,\n  useEffect,\n  useContext,\n} from 'react'\nimport getAmount from '#utils/getAmount'\nimport ShippingMethodChildrenContext from '#context/ShippingMethodChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\nimport { BaseAmountComponent } from '#typings/index'\n\nconst propTypes = components.ShippingMethodPrice.propTypes\nconst displayName = components.ShippingMethodPrice.displayName\n\nexport type ShippingMethodPriceProps = BaseAmountComponent & {\n  labelFreeOver?: string\n} & (\n    | {\n        type?: 'amount'\n        base?: 'freeOver'\n      }\n    | {\n        type?: 'amount' | 'amountForShipment'\n        base?: 'price'\n      }\n  )\n\nconst ShippingMethodPrice: FunctionComponent<ShippingMethodPriceProps> = (\n  props\n) => {\n  const {\n    format = 'formatted',\n    type = 'amountForShipment',\n    base = 'price',\n    labelFreeOver = 'Free',\n    ...p\n  } = props\n  const { shippingMethod } = useContext(ShippingMethodChildrenContext)\n  const [price, setPrice] = useState('')\n  const [priceCent, setPriceCent] = useState(0)\n  useEffect(() => {\n    const p = getAmount(\n      base,\n      type,\n      format,\n      shippingMethod as Record<string, string>\n    ) as string\n    setPrice(p)\n    const c = getAmount(\n      base,\n      type,\n      'cents',\n      shippingMethod as Record<string, string>\n    ) as number\n    setPriceCent(c)\n    return (): void => {\n      setPrice('')\n      setPriceCent(0)\n    }\n  }, [shippingMethod])\n  const parentProps = {\n    price,\n    ...p,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <span {...p}>{priceCent === 0 ? labelFreeOver : price}</span>\n  )\n}\n\nShippingMethodPrice.propTypes = propTypes\nShippingMethodPrice.displayName = displayName\n\nexport default ShippingMethodPrice\n","import { createContext } from 'react'\nimport { StockTransferCollection } from '@commercelayer/js-sdk'\n\nexport interface InitialStockTransferContext {\n  stockTransfer: StockTransferCollection | Record<string, string>\n}\n\nconst initial: InitialStockTransferContext = {\n  stockTransfer: {},\n}\n\nconst StockTransferChildrenContext = createContext<InitialStockTransferContext>(\n  initial\n)\n\nexport default StockTransferChildrenContext\n","import React, {\n  useContext,\n  FunctionComponent,\n  ReactNode,\n  Fragment,\n} from 'react'\nimport LineItemChildrenContext from '#context/LineItemChildrenContext'\nimport components from '#config/components'\nimport ShipmentChildrenContext from '#context/ShipmentChildrenContext'\nimport StockTransferChildrenContext from '#context/StockTransferChildrenContext'\n\nconst propTypes = components.StockTransfer.propTypes\nconst displayName = components.StockTransfer.displayName\n\ntype StockTransferProps = {\n  children: ReactNode\n} & JSX.IntrinsicElements['p']\n\nconst StockTransfer: FunctionComponent<StockTransferProps> = (props) => {\n  const { children } = props\n  const { lineItem } = useContext(LineItemChildrenContext)\n  const { stockTransfers } = useContext(ShipmentChildrenContext)\n  const components = stockTransfers\n    ?.filter((stock) => stock.skuCode === lineItem.skuCode)\n    .map((stockTransfer, k) => {\n      const stockTransferProps = {\n        stockTransfer,\n      }\n      return (\n        <StockTransferChildrenContext.Provider\n          key={k}\n          value={stockTransferProps}\n        >\n          {children}\n        </StockTransferChildrenContext.Provider>\n      )\n    })\n  return <Fragment>{components}</Fragment>\n}\n\nStockTransfer.propTypes = propTypes\nStockTransfer.displayName = displayName\n\nexport default StockTransfer\n","import React, { useContext, FunctionComponent, ReactNode } from 'react'\nimport StockTransferChildrenContext from '#context/StockTransferChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\n\nconst propTypes = components.StockTransferField.propTypes\nconst displayName = components.StockTransferField.displayName\n\ntype StockTransferFieldChildrenProps = Omit<StockTransferFieldProps, 'children'>\n\nexport type StockTransferFieldType = 'quantity' | 'skuCode'\n\ntype StockTransferFieldProps = {\n  children?: (props: StockTransferFieldChildrenProps) => ReactNode\n  type: StockTransferFieldType\n} & JSX.IntrinsicElements['p']\n\nconst StockTransferField: FunctionComponent<StockTransferFieldProps> = (\n  props\n) => {\n  const { type } = props\n  const { stockTransfer } = useContext(StockTransferChildrenContext)\n  const text = stockTransfer ? stockTransfer[type] : ''\n  const parentProps = {\n    ...props,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <p {...props}>{text}</p>\n  )\n}\n\nStockTransferField.propTypes = propTypes\nStockTransferField.displayName = displayName\n\nexport default StockTransferField\n","import React, { FunctionComponent, useContext, ReactNode } from 'react'\nimport ShippingMethodChildrenContext from '#context/ShippingMethodChildrenContext'\nimport Parent from './utils/Parent'\nimport components from '#config/components'\n\nconst propTypes = components.DeliveryLeadTime.propTypes\nconst displayName = components.DeliveryLeadTime.displayName\n\nexport type DeliveryLeadTimeField =\n  | 'minHours'\n  | 'maxHours'\n  | 'minDays'\n  | 'maxDays'\n\nexport type DeliveryLeadTimeComponentChildren = Omit<\n  ShippingMethodPriceProps,\n  'children'\n>\n\nexport interface ShippingMethodPriceProps\n  extends Partial<JSX.IntrinsicElements['span']> {\n  children?: (props: DeliveryLeadTimeComponentChildren) => ReactNode\n  type: DeliveryLeadTimeField\n  text?: string\n}\n\nconst DeliveryLeadTime: FunctionComponent<ShippingMethodPriceProps> = (\n  props\n) => {\n  const { type, ...p } = props\n  const { deliveryLeadTimeForShipment } = useContext(\n    ShippingMethodChildrenContext\n  )\n  const text = deliveryLeadTimeForShipment && deliveryLeadTimeForShipment[type]\n  const parentProps = {\n    text,\n    ...p,\n  }\n  return props.children ? (\n    <Parent {...parentProps}>{props.children}</Parent>\n  ) : (\n    <span {...p}>{text}</span>\n  )\n}\n\nDeliveryLeadTime.propTypes = propTypes\nDeliveryLeadTime.displayName = displayName\n\nexport default DeliveryLeadTime\n"],"names":["PProps","children","PropTypes","func","Parent","props","Child","propTypes","undefined","baseReducer","state","action","actionTypes","actions","indexOf","type","data","payload","ERROR_CODES","transformCode","code","newCode","map","c","checkCode","words","split","w","rgx","RegExp","m","match","length","push","getErrorsByCollection","collection","resourceType","errors","_","has","empty","toArray","error","id","field","resource","message","isArray","actionType","createOrder","params","persistKey","dispatch","config","metadata","orderMetadata","orderAttributes","setLocalOrder","orderId","CLayer","Order","withCredentials","create","o","order","getApiOrder","clearWhenPlaced","deleteLocalOrder","includes","find","status","addToCart","skuCode","skuId","quantity","option","lineItem","build","name","imageUrl","attrs","_updateQuantity","Sku","LineItem","lineItemResource","isEmpty","opt","options","skuOptionId","skuOption","SkuOption","LineItemOption","size","success","unsetOrderState","setOrderErrors","saveAddressToCustomerBook","value","orderInitialState","loading","orderReducer","reducer","OrderContext","createContext","initialItemContext","item","items","prices","lineItems","ItemContext","getCurrentItemKey","first","keys","checkChildrenTypes","propName","componentName","cpName","replace","Error","Children","itemTypes","components","permittedChildren","errorMsg","join","isFunction","displayName","childComponentName","isValidElement","childrenTypes","location","propFullName","isRequired","BC","string","className","style","object","PTLoader","oneOfType","element","BaseSelectComponentPropTypes","arrayOf","shape","label","number","selected","bool","placeholder","BaseInputComponentPropTypes","oneOf","onChange","BMObject","objectOf","baseOrderPricePropTypes","base","format","baseOrderComponentPricePropTypes","CEType","REType","BaseErrorObject","ErrorPropTypes","Address","AddressCountrySelector","required","defaultProps","AddressField","AddressInput","disabled","AddToCartButton","AddressesContainer","shipToDifferentAddress","AvailabilityContainer","AvailabilityTemplate","timeFormat","showShippingMethodName","BillingAddressContainer","BillingAddressForm","CheckoutLink","CommerceLayer","accessToken","endpoint","CustomerContainer","isGuest","CustomerInput","saveOnBlur","DeliveryLeadTime","DiscountAmount","Errors","messages","ExternalFunction","url","GiftCard","onSubmit","GiftCardAmount","GiftCardContainer","GiftCardCurrencySelector","GiftCardInput","ItemContainer","LineItemAmount","LineItemImage","width","LineItemName","valueClassName","keyClassName","keyId","keyStyle","LineItemOptions","title","showName","LineItemQuantity","max","readonly","LineItemRemoveLink","LineItemsContainer","filters","loader","LineItemsCount","MetadataInput","OrderContainer","attributes","OrderStorage","Price","compareClassName","showCompare","PricesContainer","perPage","QuantitySelector","min","SaveAddressesButton","onClick","Shipment","ShipmentsContainer","ShippingAddressContainer","SaveCustomerButton","ShippingAddressForm","ShippingAmount","ShippingMethod","ShippingMethodName","ShippingMethodRadioButton","ShippingMethodPrice","SkuList","SkuListsContainer","SkuOptionInput","SkuOptionsContainer","StockTransfer","StockTransferField","SubmitButton","SubTotalAmount","TaxesAmount","TotalAmount","VariantsContainer","VariantSelector","skuListsInitialState","listIds","skuLists","getSkuList","select","skus","skuList","skuCodes","sku","console","skuListsReducer","SkuListsContext","callExternalFunction","axios","post","ExternalFunctionContext","skuListId","p","useContext","getOrder","lineItemContext","itemSkuCode","sCode","handleClick","qty","customLineItem","slQty","_update_quantity","inputs","then","res","response","autoDisabled","parentProps","initial","address","AddressChildrenContext","saveCustomerUser","customerEmail","update","setCustomerErrors","setCustomerEmail","getCustomerAddresses","CustomerAddress","all","customerAddresses","addresses","customerAddress","customerInitialState","customerReducer","defaultCustomerContext","CustomerContext","defaultBillingAddressContext","setBillingAddress","BillingAddressContext","defaultShippingAddressContext","ShippingAddressContext","addressFields","addressInitialState","setAddressErrors","setAddress","values","setCloneAddress","saveAddresses","billingAddress","shippingAddress","billingAddressId","shippingAddressId","currentBillingAddressRef","reference","_billingAddressCloneId","_shippingAddressCloneId","_shippingAddressSameAsBilling","addressReducer","defaultAddressContext","AddressesContext","selectedClassName","disabledClassName","onSelect","deselect","addressesContext","billingCustomerAddressId","setShippingAddress","shippingCustomerAddressId","AddressContext","useState","setSelected","useEffect","k","preselected","customerAddressId","disabledSaveButton","handleSelect","addressId","addressProps","countryLock","shippingCountryCodeLock","countryCode","selectedClass","addressSelectedClass","finalClassName","BaseSelect","ref","findIndex","unshift","Options","React","forwardRef","BillingAddressFormContext","ShippingAddressFormContext","setValue","validation","countriesOptions","key","camelCase","text","get","BaseInput","input","cache","CommerceLayerContext","useReducer","contextValue","availabilityInitialState","days","hours","getAvailability","where","codeIn","inventorySku","firstLevel","inventory","levels","firstDelivery","deliveryLeadTimes","typeAction","availabilityReducer","AvailabilityContext","shippingMethod","mn","mx","billingAddressInitialState","setBillingCustomerAddressId","billingAddressReducer","autoComplete","reset","useRapidForm","resetForm","useRef","formErrors","fieldName","checked","current","target","checkoutUrl","onBlur","handleOnBlur","getAmount","obj","v","toLowerCase","typeOne","typeTwo","typeThree","typeFourth","BaseOrderPrice","price","setPrice","giftCardInitialState","currencyCode","balanceCent","singleUse","rechargeable","expiresAt","addGiftCardRecipient","GiftCardRecipient","recipient","giftCardRecipient","addGiftCardLoading","addGiftCard","firstName","lastName","email","val","giftCardValue","recipientEmail","recipientValues","giftCard","addGiftCardError","giftCardReducer","GiftCardContext","customMessages","filter","getAllErrors","allErrors","objMsg","LineItemContext","LineItemChildrenContext","orderErrors","giftCardErrors","lineItemErrors","addressErrors","customerErrors","msgErrors","EMAIL_PATTERN","validateValue","isString","validateFormFields","fields","isTick","attrName","getAttribute","isMetadata","fieldsExist","schema","without","handleSubmit","e","preventDefault","currentForm","elements","currencyOptions","setItemState","itemInitialState","itemReducer","setItems","setItem","setQuantity","setOption","setPrices","setCustomLineItems","itemValue","shippingMethods","stockTransfers","ShipmentChildrenContext","shipmentLineItems","l","itemType","lineProps","src","parenProps","labelName","lineItemOption","LineItemOptionChildrenContext","lineItemOptions","showTitle","valueProps","updateLineItem","i","handleChange","Number","deleteLineItem","handleRemove","getLineItems","allLineItems","colResp","pageCount","hasNextPage","index","nextPage","nextItems","lineItemId","destroy","destroyLineItem","lineItemInitialState","lineItemReducer","lineItemValue","getLineItemsCount","typeAccept","getLocalOrder","localStorage","getItem","removeItem","OrderStorageContext","localOrder","orderValue","formattedAmount","formattedCompare","PriceTemplate","getPricesComponent","skuPrices","compareAtAmountCents","amountCents","formattedCompareAtAmount","getPrices","forEach","priceInitialState","getSkusPrice","allPrices","skuCodeIn","r","pricesObj","meta","getMetaInfo","col","unsetPriceState","priceReducer","PricesContext","pricesSkuCode","setSkuCodes","setSkuPrices","pricesComponent","currentItem","priceValue","setDisabled","maxInv","valid","handleBlur","resetVal","billingAddressController","billingDisable","shippingAddressController","shippingDisable","countryLockController","countryCodeLock","addressLocked","a","countryLockDisable","disable","shippingAddressInitialState","setShippingCustomerAddressId","shippingAddressReducer","SkuOptionChildrenContext","getSkuOptions","skuOptions","skuOptionsInitialState","skuOptionsReducer","SkuOptionsContext","event","skuOptionsValue","variants","any","VariantTemplate","prs","vars","selectedIndex","dataset","getSkus","setVariantSkuCodes","sCodes","s","setSkuCode","getVariants","skusObj","unsetVariantState","variantInitialState","currentSkuId","currentSkuInventory","available","currentQuantity","currentPrices","variantReducer","VariantsContext","variantSkuCode","DefaultTemplate","isEqual","mergeItems","variantValue","shipmentInitialState","setShipmentErrors","getShipments","shipments","load","log","setShippingMethod","shipmentId","shippingMethodId","shipment","shipmentReducer","defaultShipmentContext","ShipmentContext","shipmentLineItem","availableShippingMethods","currentShippingMethodId","shipmentProps","deliveryLeadTimeForShipment","ShippingMethodChildrenContext","emptyText","methods","shippingProps","handleOnChange","labelFreeOver","priceCent","setPriceCent","stockTransfer","StockTransferChildrenContext","stock","stockTransferProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,MAAM,GAAG;AACbC,EAAAA,QAAQ,EAAEC,SAAS,CAACC;AADP,CAAf;;AAMA,IAAMC,MAAM,GAAmC,SAAzCA,MAAyC,CAACC,KAAD;AAC7C,MAAMC,KAAK,GAAGD,KAAK,CAACJ,QAApB;AACA,SAAOK,KAAK,gBAAG,oBAAC,KAAD,EAAWD,KAAX,CAAH,GAA0B,IAAtC;AACD,CAHD;;AAKAD,MAAM,CAACG,SAAP,GAAmBP,MAAnB;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,IAAI,UAAU,OAAO,EAAE;AAClC,AACA;AACA,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC;AAC5B,EAAE,IAAI,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC;AACjC,EAAE,IAAIQ,WAAS,CAAC;AAChB,EAAE,IAAI,OAAO,GAAG,OAAO,MAAM,KAAK,UAAU,GAAG,MAAM,GAAG,EAAE,CAAC;AAC3D,EAAE,IAAI,cAAc,GAAG,OAAO,CAAC,QAAQ,IAAI,YAAY,CAAC;AACxD,EAAE,IAAI,mBAAmB,GAAG,OAAO,CAAC,aAAa,IAAI,iBAAiB,CAAC;AACvE,EAAE,IAAI,iBAAiB,GAAG,OAAO,CAAC,WAAW,IAAI,eAAe,CAAC;AACjE;AACA,EAAE,SAAS,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE;AACrD;AACA,IAAI,IAAI,cAAc,GAAG,OAAO,IAAI,OAAO,CAAC,SAAS,YAAY,SAAS,GAAG,OAAO,GAAG,SAAS,CAAC;AACjG,IAAI,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;AAC5D,IAAI,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;AACjD;AACA;AACA;AACA,IAAI,SAAS,CAAC,OAAO,GAAG,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACjE;AACA,IAAI,OAAO,SAAS,CAAC;AACrB,GAAG;AACH,EAAE,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;AAClC,IAAI,IAAI;AACR,MAAM,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC;AACxD,KAAK,CAAC,OAAO,GAAG,EAAE;AAClB,MAAM,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACzC,KAAK;AACL,GAAG;AACH;AACA,EAAE,IAAI,sBAAsB,GAAG,gBAAgB,CAAC;AAChD,EAAE,IAAI,sBAAsB,GAAG,gBAAgB,CAAC;AAChD,EAAE,IAAI,iBAAiB,GAAG,WAAW,CAAC;AACtC,EAAE,IAAI,iBAAiB,GAAG,WAAW,CAAC;AACtC;AACA;AACA;AACA,EAAE,IAAI,gBAAgB,GAAG,EAAE,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,SAAS,GAAG,EAAE;AACzB,EAAE,SAAS,iBAAiB,GAAG,EAAE;AACjC,EAAE,SAAS,0BAA0B,GAAG,EAAE;AAC1C;AACA;AACA;AACA,EAAE,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC7B,EAAE,iBAAiB,CAAC,cAAc,CAAC,GAAG,YAAY;AAClD,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC;AACJ;AACA,EAAE,IAAI,QAAQ,GAAG,MAAM,CAAC,cAAc,CAAC;AACvC,EAAE,IAAI,uBAAuB,GAAG,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3E,EAAE,IAAI,uBAAuB;AAC7B,MAAM,uBAAuB,KAAK,EAAE;AACpC,MAAM,MAAM,CAAC,IAAI,CAAC,uBAAuB,EAAE,cAAc,CAAC,EAAE;AAC5D;AACA;AACA,IAAI,iBAAiB,GAAG,uBAAuB,CAAC;AAChD,GAAG;AACH;AACA,EAAE,IAAI,EAAE,GAAG,0BAA0B,CAAC,SAAS;AAC/C,IAAI,SAAS,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AAC3D,EAAE,iBAAiB,CAAC,SAAS,GAAG,EAAE,CAAC,WAAW,GAAG,0BAA0B,CAAC;AAC5E,EAAE,0BAA0B,CAAC,WAAW,GAAG,iBAAiB,CAAC;AAC7D,EAAE,0BAA0B,CAAC,iBAAiB,CAAC;AAC/C,IAAI,iBAAiB,CAAC,WAAW,GAAG,mBAAmB,CAAC;AACxD;AACA;AACA;AACA,EAAE,SAAS,qBAAqB,CAAC,SAAS,EAAE;AAC5C,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,SAAS,MAAM,EAAE;AACzD,MAAM,SAAS,CAAC,MAAM,CAAC,GAAG,SAAS,GAAG,EAAE;AACxC,QAAQ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AACzC,OAAO,CAAC;AACR,KAAK,CAAC,CAAC;AACP,GAAG;AACH;AACA,EAAE,OAAO,CAAC,mBAAmB,GAAG,SAAS,MAAM,EAAE;AACjD,IAAI,IAAI,IAAI,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,WAAW,CAAC;AAClE,IAAI,OAAO,IAAI;AACf,QAAQ,IAAI,KAAK,iBAAiB;AAClC;AACA;AACA,QAAQ,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI,MAAM,mBAAmB;AAC/D,QAAQ,KAAK,CAAC;AACd,GAAG,CAAC;AACJ;AACA,EAAE,OAAO,CAAC,IAAI,GAAG,SAAS,MAAM,EAAE;AAClC,IAAI,IAAI,MAAM,CAAC,cAAc,EAAE;AAC/B,MAAM,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,0BAA0B,CAAC,CAAC;AAChE,KAAK,MAAM;AACX,MAAM,MAAM,CAAC,SAAS,GAAG,0BAA0B,CAAC;AACpD,MAAM,IAAI,EAAE,iBAAiB,IAAI,MAAM,CAAC,EAAE;AAC1C,QAAQ,MAAM,CAAC,iBAAiB,CAAC,GAAG,mBAAmB,CAAC;AACxD,OAAO;AACP,KAAK;AACL,IAAI,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACzC,IAAI,OAAO,MAAM,CAAC;AAClB,GAAG,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,CAAC,KAAK,GAAG,SAAS,GAAG,EAAE;AAChC,IAAI,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;AAC5B,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,aAAa,CAAC,SAAS,EAAE,WAAW,EAAE;AACjD,IAAI,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE;AAClD,MAAM,IAAI,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;AAC/D,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,QAAQ,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC3B,OAAO,MAAM;AACb,QAAQ,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;AAChC,QAAQ,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;AACjC,QAAQ,IAAI,KAAK;AACjB,YAAY,OAAO,KAAK,KAAK,QAAQ;AACrC,YAAY,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE;AAC3C,UAAU,OAAO,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,EAAE;AACzE,YAAY,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AACnD,WAAW,EAAE,SAAS,GAAG,EAAE;AAC3B,YAAY,MAAM,CAAC,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAClD,WAAW,CAAC,CAAC;AACb,SAAS;AACT;AACA,QAAQ,OAAO,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,SAAS,EAAE;AACnE;AACA;AACA;AACA,UAAU,MAAM,CAAC,KAAK,GAAG,SAAS,CAAC;AACnC,UAAU,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,SAAS,EAAE,SAAS,KAAK,EAAE;AAC3B;AACA;AACA,UAAU,OAAO,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AACzD,SAAS,CAAC,CAAC;AACX,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,eAAe,CAAC;AACxB;AACA,IAAI,SAAS,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE;AAClC,MAAM,SAAS,0BAA0B,GAAG;AAC5C,QAAQ,OAAO,IAAI,WAAW,CAAC,SAAS,OAAO,EAAE,MAAM,EAAE;AACzD,UAAU,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/C,SAAS,CAAC,CAAC;AACX,OAAO;AACP;AACA,MAAM,OAAO,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,eAAe,GAAG,eAAe,CAAC,IAAI;AAC9C,UAAU,0BAA0B;AACpC;AACA;AACA,UAAU,0BAA0B;AACpC,SAAS,GAAG,0BAA0B,EAAE,CAAC;AACzC,KAAK;AACL;AACA;AACA;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,GAAG;AACH;AACA,EAAE,qBAAqB,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;AACjD,EAAE,aAAa,CAAC,SAAS,CAAC,mBAAmB,CAAC,GAAG,YAAY;AAC7D,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC;AACJ,EAAE,OAAO,CAAC,aAAa,GAAG,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA,EAAE,OAAO,CAAC,KAAK,GAAG,SAAS,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,WAAW,EAAE;AAC7E,IAAI,IAAI,WAAW,KAAK,KAAK,CAAC,EAAE,WAAW,GAAG,OAAO,CAAC;AACtD;AACA,IAAI,IAAI,IAAI,GAAG,IAAI,aAAa;AAChC,MAAM,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,CAAC;AAC/C,MAAM,WAAW;AACjB,KAAK,CAAC;AACN;AACA,IAAI,OAAO,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC;AAC/C,QAAQ,IAAI;AACZ,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,MAAM,EAAE;AAC1C,UAAU,OAAO,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;AAC1D,SAAS,CAAC,CAAC;AACX,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;AACpD,IAAI,IAAI,KAAK,GAAG,sBAAsB,CAAC;AACvC;AACA,IAAI,OAAO,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE;AACxC,MAAM,IAAI,KAAK,KAAK,iBAAiB,EAAE;AACvC,QAAQ,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;AACxD,OAAO;AACP;AACA,MAAM,IAAI,KAAK,KAAK,iBAAiB,EAAE;AACvC,QAAQ,IAAI,MAAM,KAAK,OAAO,EAAE;AAChC,UAAU,MAAM,GAAG,CAAC;AACpB,SAAS;AACT;AACA;AACA;AACA,QAAQ,OAAO,UAAU,EAAE,CAAC;AAC5B,OAAO;AACP;AACA,MAAM,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC9B,MAAM,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AACxB;AACA,MAAM,OAAO,IAAI,EAAE;AACnB,QAAQ,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;AACxC,QAAQ,IAAI,QAAQ,EAAE;AACtB,UAAU,IAAI,cAAc,GAAG,mBAAmB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACtE,UAAU,IAAI,cAAc,EAAE;AAC9B,YAAY,IAAI,cAAc,KAAK,gBAAgB,EAAE,SAAS;AAC9D,YAAY,OAAO,cAAc,CAAC;AAClC,WAAW;AACX,SAAS;AACT;AACA,QAAQ,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM,EAAE;AACvC;AACA;AACA,UAAU,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC;AACrD;AACA,SAAS,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AAC/C,UAAU,IAAI,KAAK,KAAK,sBAAsB,EAAE;AAChD,YAAY,KAAK,GAAG,iBAAiB,CAAC;AACtC,YAAY,MAAM,OAAO,CAAC,GAAG,CAAC;AAC9B,WAAW;AACX;AACA,UAAU,OAAO,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACjD;AACA,SAAS,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,QAAQ,EAAE;AAChD,UAAU,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAChD,SAAS;AACT;AACA,QAAQ,KAAK,GAAG,iBAAiB,CAAC;AAClC;AACA,QAAQ,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACtD,QAAQ,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AACtC;AACA;AACA,UAAU,KAAK,GAAG,OAAO,CAAC,IAAI;AAC9B,cAAc,iBAAiB;AAC/B,cAAc,sBAAsB,CAAC;AACrC;AACA,UAAU,IAAI,MAAM,CAAC,GAAG,KAAK,gBAAgB,EAAE;AAC/C,YAAY,SAAS;AACrB,WAAW;AACX;AACA,UAAU,OAAO;AACjB,YAAY,KAAK,EAAE,MAAM,CAAC,GAAG;AAC7B,YAAY,IAAI,EAAE,OAAO,CAAC,IAAI;AAC9B,WAAW,CAAC;AACZ;AACA,SAAS,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AAC5C,UAAU,KAAK,GAAG,iBAAiB,CAAC;AACpC;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AACnC,UAAU,OAAO,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AACnC,SAAS;AACT,OAAO;AACP,KAAK,CAAC;AACN,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE,SAAS,mBAAmB,CAAC,QAAQ,EAAE,OAAO,EAAE;AAClD,IAAI,IAAI,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACnD,IAAI,IAAI,MAAM,KAAKA,WAAS,EAAE;AAC9B;AACA;AACA,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B;AACA,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AACtC;AACA,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;AACzC;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;AACpC,UAAU,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAClC,UAAU,mBAAmB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACjD;AACA,UAAU,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,EAAE;AAC1C;AACA;AACA,YAAY,OAAO,gBAAgB,CAAC;AACpC,WAAW;AACX,SAAS;AACT;AACA,QAAQ,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AACjC,QAAQ,OAAO,CAAC,GAAG,GAAG,IAAI,SAAS;AACnC,UAAU,gDAAgD,CAAC,CAAC;AAC5D,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAClE;AACA,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACjC,MAAM,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AAC/B,MAAM,OAAO,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/B,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1B;AACA,IAAI,IAAI,EAAE,IAAI,EAAE;AAChB,MAAM,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;AAC/B,MAAM,OAAO,CAAC,GAAG,GAAG,IAAI,SAAS,CAAC,kCAAkC,CAAC,CAAC;AACtE,MAAM,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC9B,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE;AACnB;AACA;AACA,MAAM,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AAChD;AACA;AACA,MAAM,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,QAAQ,EAAE;AACvC,QAAQ,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAChC,QAAQ,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAChC,OAAO;AACP;AACA,KAAK,MAAM;AACX;AACA,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK;AACL;AACA;AACA;AACA,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC5B,IAAI,OAAO,gBAAgB,CAAC;AAC5B,GAAG;AACH;AACA;AACA;AACA,EAAE,qBAAqB,CAAC,EAAE,CAAC,CAAC;AAC5B;AACA,EAAE,EAAE,CAAC,iBAAiB,CAAC,GAAG,WAAW,CAAC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,CAAC,cAAc,CAAC,GAAG,WAAW;AAClC,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG,CAAC;AACJ;AACA,EAAE,EAAE,CAAC,QAAQ,GAAG,WAAW;AAC3B,IAAI,OAAO,oBAAoB,CAAC;AAChC,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE;AAC9B,IAAI,IAAI,KAAK,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;AACpC;AACA,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAC/B,KAAK;AACL;AACA,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACjC,MAAM,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAC/B,KAAK;AACL;AACA,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChC,GAAG;AACH;AACA,EAAE,SAAS,aAAa,CAAC,KAAK,EAAE;AAChC,IAAI,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC;AACxC,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;AAC3B,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC;AACtB,IAAI,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;AAC9B,GAAG;AACH;AACA,EAAE,SAAS,OAAO,CAAC,WAAW,EAAE;AAChC;AACA;AACA;AACA,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;AAC3C,IAAI,WAAW,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC5C,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACrB,GAAG;AACH;AACA,EAAE,OAAO,CAAC,IAAI,GAAG,SAAS,MAAM,EAAE;AAClC,IAAI,IAAI,IAAI,GAAG,EAAE,CAAC;AAClB,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;AAC5B,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB;AACA;AACA;AACA,IAAI,OAAO,SAAS,IAAI,GAAG;AAC3B,MAAM,OAAO,IAAI,CAAC,MAAM,EAAE;AAC1B,QAAQ,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AAC7B,QAAQ,IAAI,GAAG,IAAI,MAAM,EAAE;AAC3B,UAAU,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;AAC3B,UAAU,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAC5B,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK,CAAC;AACN,GAAG,CAAC;AACJ;AACA,EAAE,SAAS,MAAM,CAAC,QAAQ,EAAE;AAC5B,IAAI,IAAI,QAAQ,EAAE;AAClB,MAAM,IAAI,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC;AACpD,MAAM,IAAI,cAAc,EAAE;AAC1B,QAAQ,OAAO,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7C,OAAO;AACP;AACA,MAAM,IAAI,OAAO,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE;AAC/C,QAAQ,OAAO,QAAQ,CAAC;AACxB,OAAO;AACP;AACA,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;AACnC,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,SAAS,IAAI,GAAG;AAC3C,UAAU,OAAO,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE;AACxC,YAAY,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE;AAC1C,cAAc,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACvC,cAAc,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAChC,cAAc,OAAO,IAAI,CAAC;AAC1B,aAAa;AACb,WAAW;AACX;AACA,UAAU,IAAI,CAAC,KAAK,GAAGA,WAAS,CAAC;AACjC,UAAU,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAC3B;AACA,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS,CAAC;AACV;AACA,QAAQ,OAAO,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAChC,OAAO;AACP,KAAK;AACL;AACA;AACA,IAAI,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;AAChC,GAAG;AACH,EAAE,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAC1B;AACA,EAAE,SAAS,UAAU,GAAG;AACxB,IAAI,OAAO,EAAE,KAAK,EAAEA,WAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;AAC5C,GAAG;AACH;AACA,EAAE,OAAO,CAAC,SAAS,GAAG;AACtB,IAAI,WAAW,EAAE,OAAO;AACxB;AACA,IAAI,KAAK,EAAE,SAAS,aAAa,EAAE;AACnC,MAAM,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACpB,MAAM,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACpB;AACA;AACA,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAGA,WAAS,CAAC;AACzC,MAAM,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AACxB,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC3B;AACA,MAAM,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC3B,MAAM,IAAI,CAAC,GAAG,GAAGA,WAAS,CAAC;AAC3B;AACA,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AAC7C;AACA,MAAM,IAAI,CAAC,aAAa,EAAE;AAC1B,QAAQ,KAAK,IAAI,IAAI,IAAI,IAAI,EAAE;AAC/B;AACA,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;AACpC,cAAc,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;AACrC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;AACtC,YAAY,IAAI,CAAC,IAAI,CAAC,GAAGA,WAAS,CAAC;AACnC,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,EAAE,WAAW;AACrB,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB;AACA,MAAM,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACzC,MAAM,IAAI,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC;AAC5C,MAAM,IAAI,UAAU,CAAC,IAAI,KAAK,OAAO,EAAE;AACvC,QAAQ,MAAM,UAAU,CAAC,GAAG,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,IAAI,CAAC,IAAI,CAAC;AACvB,KAAK;AACL;AACA,IAAI,iBAAiB,EAAE,SAAS,SAAS,EAAE;AAC3C,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;AACrB,QAAQ,MAAM,SAAS,CAAC;AACxB,OAAO;AACP;AACA,MAAM,IAAI,OAAO,GAAG,IAAI,CAAC;AACzB,MAAM,SAAS,MAAM,CAAC,GAAG,EAAE,MAAM,EAAE;AACnC,QAAQ,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;AAC9B,QAAQ,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AAC/B,QAAQ,OAAO,CAAC,IAAI,GAAG,GAAG,CAAC;AAC3B;AACA,QAAQ,IAAI,MAAM,EAAE;AACpB;AACA;AACA,UAAU,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AAClC,UAAU,OAAO,CAAC,GAAG,GAAGA,WAAS,CAAC;AAClC,SAAS;AACT;AACA,QAAQ,OAAO,CAAC,EAAE,MAAM,CAAC;AACzB,OAAO;AACP;AACA,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;AACtC;AACA,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM,EAAE;AACrC;AACA;AACA;AACA,UAAU,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;AAC/B,SAAS;AACT;AACA,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;AACvC,UAAU,IAAI,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;AACxD,UAAU,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;AAC5D;AACA,UAAU,IAAI,QAAQ,IAAI,UAAU,EAAE;AACtC,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE;AAC5C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAClD,aAAa,MAAM,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AACrD,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC9C,aAAa;AACb;AACA,WAAW,MAAM,IAAI,QAAQ,EAAE;AAC/B,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE;AAC5C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAClD,aAAa;AACb;AACA,WAAW,MAAM,IAAI,UAAU,EAAE;AACjC,YAAY,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AAC9C,cAAc,OAAO,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC9C,aAAa;AACb;AACA,WAAW,MAAM;AACjB,YAAY,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;AACtE,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,MAAM,EAAE,SAAS,IAAI,EAAE,GAAG,EAAE;AAChC,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI;AACrC,YAAY,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,YAAY,CAAC;AAC5C,YAAY,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE;AAC1C,UAAU,IAAI,YAAY,GAAG,KAAK,CAAC;AACnC,UAAU,MAAM;AAChB,SAAS;AACT,OAAO;AACP;AACA,MAAM,IAAI,YAAY;AACtB,WAAW,IAAI,KAAK,OAAO;AAC3B,WAAW,IAAI,KAAK,UAAU,CAAC;AAC/B,UAAU,YAAY,CAAC,MAAM,IAAI,GAAG;AACpC,UAAU,GAAG,IAAI,YAAY,CAAC,UAAU,EAAE;AAC1C;AACA;AACA,QAAQ,YAAY,GAAG,IAAI,CAAC;AAC5B,OAAO;AACP;AACA,MAAM,IAAI,MAAM,GAAG,YAAY,GAAG,YAAY,CAAC,UAAU,GAAG,EAAE,CAAC;AAC/D,MAAM,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,MAAM,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;AACvB;AACA,MAAM,IAAI,YAAY,EAAE;AACxB,QAAQ,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC7B,QAAQ,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,UAAU,CAAC;AAC5C,QAAQ,OAAO,gBAAgB,CAAC;AAChC,OAAO;AACP;AACA,MAAM,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACnC,KAAK;AACL;AACA,IAAI,QAAQ,EAAE,SAAS,MAAM,EAAE,QAAQ,EAAE;AACzC,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC;AACzB,OAAO;AACP;AACA,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO;AACjC,UAAU,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;AACtC,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/B,OAAO,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC3C,QAAQ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1C,QAAQ,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC/B,QAAQ,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAC1B,OAAO,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,QAAQ,EAAE;AACvD,QAAQ,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL;AACA,IAAI,MAAM,EAAE,SAAS,UAAU,EAAE;AACjC,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE;AAC7C,UAAU,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC1D,UAAU,aAAa,CAAC,KAAK,CAAC,CAAC;AAC/B,UAAU,OAAO,gBAAgB,CAAC;AAClC,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,OAAO,EAAE,SAAS,MAAM,EAAE;AAC9B,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAC5D,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACvC,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM,EAAE;AACrC,UAAU,IAAI,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;AACxC,UAAU,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE;AACvC,YAAY,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;AACpC,YAAY,aAAa,CAAC,KAAK,CAAC,CAAC;AACjC,WAAW;AACX,UAAU,OAAO,MAAM,CAAC;AACxB,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,MAAM,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;AAC/C,KAAK;AACL;AACA,IAAI,aAAa,EAAE,SAAS,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE;AAC3D,MAAM,IAAI,CAAC,QAAQ,GAAG;AACtB,QAAQ,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC;AAClC,QAAQ,UAAU,EAAE,UAAU;AAC9B,QAAQ,OAAO,EAAE,OAAO;AACxB,OAAO,CAAC;AACR;AACA,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;AAClC;AACA;AACA,QAAQ,IAAI,CAAC,GAAG,GAAGA,WAAS,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,OAAO,gBAAgB,CAAC;AAC9B,KAAK;AACL,GAAG,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,OAAO,CAAC;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,CAA6B,MAAM,CAAC,OAAO,CAAK;AAClD,CAAC,CAAC,CAAC;AACH;AACA,IAAI;AACJ,EAAE,kBAAkB,GAAG,OAAO,CAAC;AAC/B,CAAC,CAAC,OAAO,oBAAoB,EAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,QAAQ,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAAC,OAAO,CAAC,CAAC;AACnD;;;ACttBA,IAAMC,WAAW,GAAgB,SAA3BA,WAA2B,CAACC,KAAD,EAAQC,MAAR,EAAgBC,WAAhB;AAC/B,MAAMC,OAAO,GAAGD,WAAhB;;AACA,MAAIC,OAAO,CAACC,OAAR,CAAgBH,MAAM,CAACI,IAAvB,MAAiC,CAAC,CAAtC,EAAyC;AACvC,QAAMC,IAAI,GAAGL,MAAM,CAACM,OAApB;AACAP,IAAAA,KAAK,gBAAQA,KAAR,EAAkBM,IAAlB,CAAL;AACD;;AACD,SAAON,KAAP;AACD,CAPD;;ACEA,IAAMQ,WAAW,GAAoB,CACnC,kBADmC,EAEnC,cAFmC,EAGnC,eAHmC,EAInC,kBAJmC,EAKnC,kBALmC,EAMnC,oBANmC,EAOnC,qBAPmC,EAQnC,eARmC,EASnC,mBATmC,EAUnC,eAVmC,EAWnC,sBAXmC,EAYnC,oBAZmC,EAanC,yBAbmC,EAcnC,iBAdmC,EAenC,iBAfmC,EAgBnC,uBAhBmC,EAiBnC,sBAjBmC,EAkBnC,eAlBmC,EAmBnC,qBAnBmC,EAoBnC,oBApBmC,EAqBnC,sBArBmC,EAsBnC,wBAtBmC,EAuBnC,aAvBmC,EAwBnC,qBAxBmC,EAyBnC,WAzBmC,EA0BnC,kBA1BmC,EA2BnC,gBA3BmC,EA4BnC,wBA5BmC,EA6BnC,QA7BmC,EA8BnC,uBA9BmC,CAArC;;AA0CA,IAAMC,aAAa,GAAkB,SAA/BA,aAA+B,CAACC,IAAD;AACnC,MAAIC,OAAO,GAAG,EAAd;AACAH,EAAAA,WAAW,CAACI,GAAZ,CAAgB,UAACC,CAAD;AACd,QAAMC,SAAS,GAAa,EAA5B;AACA,QAAMC,KAAK,GAAGF,CAAC,CAACG,KAAF,CAAQ,GAAR,CAAd;AACAD,IAAAA,KAAK,CAACH,GAAN,CAAU,UAACK,CAAD;AACR,UAAMC,GAAG,GAAG,IAAIC,MAAJ,WAAmBF,CAAnB,QAAyB,GAAzB,CAAZ;AACA,UAAMG,CAAC,GAAGV,IAAI,CAACW,KAAL,CAAWH,GAAX,CAAV;;AACA,UAAIE,CAAC,IAAI,CAAAA,CAAC,QAAD,YAAAA,CAAC,CAAEE,MAAH,IAAY,CAArB,EAAwB;AACtBR,QAAAA,SAAS,CAACS,IAAV,CAAeH,CAAC,CAAC,CAAD,CAAhB;AACD;AACF,KAND;;AAOA,QAAIN,SAAS,CAACQ,MAAV,KAAqBP,KAAK,CAACO,MAA/B,EAAuC;AACrCX,MAAAA,OAAO,GAAGE,CAAV;AACD;AACF,GAbD;AAcA,SAAOF,OAAP;AACD,CAjBD;;AAmBA,IAAMa,qBAAqB,GAA0B,SAA/CA,qBAA+C,CACnDC,UADmD,EAEnDC,YAFmD;AAInD,MAAMC,MAAM,GAAgB,EAA5B;;AACA,MAAIC,CAAC,CAACC,GAAF,CAAMJ,UAAN,EAAkB,QAAlB,KAA+B,CAACA,UAAU,CAACE,MAAX,GAAoBG,KAApB,EAApC,EAAiE;AAC/DL,IAAAA,UAAU,CACPE,MADH,GAEGI,OAFH,GAGGnB,GAHH,CAGO,UAACoB,KAAD;AACH;AACA,UAAIA,KAAK,CAAC,OAAD,CAAL,KAAmB,gBAAvB,EAAyCA,KAAK,CAAC,OAAD,CAAL,GAAiB,OAAjB;AACzCL,MAAAA,MAAM,CAACJ,IAAP,CAAY;AACVU,QAAAA,EAAE,EAAER,UAAU,CAAC,IAAD,CADJ;AAEVf,QAAAA,IAAI,EAAED,aAAa,CAACuB,KAAK,CAAC,MAAD,CAAN,CAFT;AAGVE,QAAAA,KAAK,EAAEF,KAAK,CAAC,OAAD,CAAL,KAAmB,gBAAnB,GAAsC,OAAtC,GAAgDA,KAAK,CAAC,OAAD,CAHlD;AAIVG,QAAAA,QAAQ,EAAET,YAJA;AAKVU,QAAAA,OAAO,EAAEJ,KAAK,CAAC,SAAD;AALJ,OAAZ;AAOD,KAbH;AAcD,GAfD,MAeO,IAAIJ,CAAC,CAACS,OAAF,CAAUZ,UAAV,CAAJ,EAA2B;AAChCA,IAAAA,UAAU,CAACb,GAAX,CAAe,UAACoB,KAAD;AACbL,MAAAA,MAAM,CAACJ,IAAP,CAAY;AACV;AACAb,QAAAA,IAAI,EAAED,aAAa,CAACuB,KAAK,CAAC,MAAD,CAAN,CAFT;AAGVE,QAAAA,KAAK,EAAEF,KAAK,CAAC,OAAD,CAAL,KAAmB,gBAAnB,GAAsC,OAAtC,GAAgDA,KAAK,CAAC,OAAD,CAHlD;AAIVG,QAAAA,QAAQ,EAAET,YAJA;AAKVU,QAAAA,OAAO,EAAEJ,KAAK,CAAC,SAAD;AALJ,OAAZ;AAOD,KARD;AASD;;AACD,SAAOL,MAAP;AACD,CAhCD;;ACuEA,IAAMW,UAAU,GAAsB,CACpC,YADoC,EAEpC,YAFoC,EAGpC,UAHoC,EAIpC,mBAJoC,EAKpC,oBALoC,EAMpC,qBANoC,EAOpC,WAPoC,EAQpC,gBARoC,EASpC,8BAToC,CAAtC;AAYA,AAAO,IAAMC,WAAW;AAAA,yEAAgB,iBAAOC,MAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEpCC,YAAAA,UAFoC,GASlCD,MATkC,CAEpCC,UAFoC,EAGpCzC,KAHoC,GASlCwC,MATkC,CAGpCxC,KAHoC,EAIpC0C,QAJoC,GASlCF,MATkC,CAIpCE,QAJoC,EAKpCC,MALoC,GASlCH,MATkC,CAKpCG,MALoC,EAMrBC,QANqB,GASlCJ,MATkC,CAMpCK,aANoC,0BASlCL,MATkC,CAOpCM,eAPoC,EAOpCA,eAPoC,sCAOlB,EAPkB,0BAQpCC,aARoC,GASlCP,MATkC,CAQpCO,aARoC;;AAAA,iBAUlC/C,KAAK,CAACgD,OAV4B;AAAA;AAAA;AAAA;;AAAA,6CAUZhD,KAAK,CAACgD,OAVM;;AAAA;AAAA;AAAA,mBAWtBC,MAAM,CAACC,KAAP,CAAaC,eAAb,CAA6BR,MAA7B,EAAqCS,MAArC;AACdR,cAAAA,QAAQ,EAARA;AADc,eAEXE,eAFW,EAXsB;;AAAA;AAWhCO,YAAAA,CAXgC;;AAAA,gBAejCA,CAAC,CAACpB,EAf+B;AAAA;AAAA;AAAA;;AAAA,6CAepB,EAfoB;;AAAA;AAgBtCS,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,YADC;AAEPE,cAAAA,OAAO,EAAE;AACPyC,gBAAAA,OAAO,EAAEK,CAAC,CAACpB;AADJ;AAFF,aAAD,CAAR;AAMAS,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,UADC;AAEPE,cAAAA,OAAO,EAAE;AACP+C,gBAAAA,KAAK,EAAED;AADA;AAFF,aAAD,CAAR;AAMAZ,YAAAA,UAAU,IAAIM,aAAd,IAA+BA,aAAa,CAACN,UAAD,EAAaY,CAAC,CAACpB,EAAf,CAA5C;AA5BsC,6CA6B/BoB,CAAC,CAACpB,EA7B6B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAAA,kBAAXM,WAAW;AAAA;AAAA;AAAA,GAAjB;AAgCP,AAAO,IAAMgB,WAAW;AAAA,0EAAa,kBAAOf,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjCP,YAAAA,EAFiC,GAQ/BO,MAR+B,CAEjCP,EAFiC,EAGjCS,QAHiC,GAQ/BF,MAR+B,CAGjCE,QAHiC,EAIjCC,MAJiC,GAQ/BH,MAR+B,CAIjCG,MAJiC,EAKjCa,eALiC,GAQ/BhB,MAR+B,CAKjCgB,eALiC,EAMjCf,UANiC,GAQ/BD,MAR+B,CAMjCC,UANiC,EAOjCgB,gBAPiC,GAQ/BjB,MAR+B,CAOjCiB,gBAPiC;AAAA;AAAA;AAAA,mBAUjBP,KAAK,CAACC,eAAN,CAAsBR,MAAtB,EACbe,QADa,CACJ,gBADI,EACc,iBADd,EAEbC,IAFa,CAER1B,EAFQ,CAViB;;AAAA;AAU3BoB,YAAAA,CAV2B;AAajC,gBAAIA,CAAJ,EACE,IACGG,eAAe,IAAIH,CAAC,CAACO,MAAF,KAAa,QAAjC,IACAP,CAAC,CAACO,MAAF,KAAa,UADb,IAEAP,CAAC,CAACO,MAAF,KAAa,WAHf,EAIE;AACAnB,cAAAA,UAAU,IAAIgB,gBAAd,IAAkCA,gBAAgB,CAAChB,UAAD,CAAlD;AACAC,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,UADC;AAEPE,gBAAAA,OAAO,EAAE;AACP+C,kBAAAA,KAAK,EAAExD,SADA;AAEPkD,kBAAAA,OAAO,EAAE;AAFF;AAFF,eAAD,CAAR;AAOD,aAbD,MAaO;AACLN,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,UADC;AAEPE,gBAAAA,OAAO,EAAE;AACP+C,kBAAAA,KAAK,EAAED;AADA;AAFF,eAAD,CAAR;AAMD;AAlC8B;AAAA;;AAAA;AAAA;AAAA;AAoCjCZ,YAAAA,UAAU,IAAIgB,gBAAd,IAAkCA,gBAAgB,CAAChB,UAAD,CAAlD;AACAC,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,UADC;AAEPE,cAAAA,OAAO,EAAE;AACP+C,gBAAAA,KAAK,EAAExD,SADA;AAEPkD,gBAAAA,OAAO,EAAE;AAFF;AAFF,aAAD,CAAR;;AArCiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAAA,kBAAXO,WAAW;AAAA;AAAA;AAAA,GAAjB;AA+CP,AAAO,IAAMM,SAAS;AAAA,0EAAc,kBAAOrB,MAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEhCsB,YAAAA,OAFgC,GAU9BtB,MAV8B,CAEhCsB,OAFgC,EAGhCC,KAHgC,GAU9BvB,MAV8B,CAGhCuB,KAHgC,EAIhCC,QAJgC,GAU9BxB,MAV8B,CAIhCwB,QAJgC,EAKhCC,MALgC,GAU9BzB,MAV8B,CAKhCyB,MALgC,EAMhCtB,MANgC,GAU9BH,MAV8B,CAMhCG,MANgC,EAOhCD,QAPgC,GAU9BF,MAV8B,CAOhCE,QAPgC,EAQhCwB,QARgC,GAU9B1B,MAV8B,CAQhC0B,QARgC,EAShCvC,MATgC,GAU9Ba,MAV8B,CAShCb,MATgC;AAAA;AAAA;AAAA,mBAYfY,WAAW,CAACC,MAAD,CAZI;;AAAA;AAY1BP,YAAAA,EAZ0B;AAa1BqB,YAAAA,KAb0B,GAalBL,MAAM,CAACC,KAAP,CAAaiB,KAAb,CAAmB;AAAElC,cAAAA,EAAE,EAAFA;AAAF,aAAnB,CAbkB;AAc1BmC,YAAAA,IAd0B,GAcnBF,QAdmB,oBAcnBA,QAAQ,CAAEE,IAdS;AAe1BC,YAAAA,QAf0B,GAefH,QAfe,oBAefA,QAAQ,CAAEG,QAfK;AAgB1BC,YAAAA,KAhB0B,GAgBG;AACjChB,cAAAA,KAAK,EAALA,KADiC;AAEjCQ,cAAAA,OAAO,EAAPA,OAFiC;AAGjCM,cAAAA,IAAI,EAAJA,IAHiC;AAIjCC,cAAAA,QAAQ,EAARA,QAJiC;AAKjCL,cAAAA,QAAQ,EAAEA,QAAQ,IAAI,CALW;AAMjCO,cAAAA,eAAe,EAAE;AANgB,aAhBH;;AAwBhC,gBAAIR,KAAJ,EAAW;AACTO,cAAAA,KAAK,CAAC,MAAD,CAAL,GAAgBrB,MAAM,CAACuB,GAAP,CAAWL,KAAX,CAAiB;AAAElC,gBAAAA,EAAE,EAAE8B;AAAN,eAAjB,CAAhB;AACD;;AA1B+B;AAAA,mBA2BDd,MAAM,CAACwB,QAAP,CAAgBtB,eAAhB,CAC7BR,MAD6B,EAE7BS,MAF6B,CAEtBkB,KAFsB,CA3BC;;AAAA;AA2B1BI,YAAAA,gBA3B0B;;AAAA,gBA8B3B9C,CAAC,CAAC+C,OAAF,CAAUV,MAAV,CA9B2B;AAAA;AAAA;AAAA;;AA+B1BpD,YAAAA,CA/B0B,GA+BtB,CA/BsB;;AAgC9Be,YAAAA,CAAC,CAAChB,GAAF,CAAMqD,MAAN;AAAA,yEAAc,kBAAOW,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJC,wBAAAA,OADI,GACqBD,GADrB,CACJC,OADI,EACKC,WADL,GACqBF,GADrB,CACKE,WADL;AAENC,wBAAAA,SAFM,GAEM9B,MAAM,CAAC+B,SAAP,CAAiBb,KAAjB,CAAuB;AAAElC,0BAAAA,EAAE,EAAE6C;AAAN,yBAAvB,CAFN;AAAA;AAAA,+BAGN7B,MAAM,CAACgC,cAAP,CAAsB9B,eAAtB,CAAsCR,MAAtC,EAA8CS,MAA9C,CAAqD;AACzDY,0BAAAA,QAAQ,EAAE,CAD+C;AAEzDa,0BAAAA,OAAO,EAAPA,OAFyD;AAGzDX,0BAAAA,QAAQ,EAAEQ,gBAH+C;AAIzDK,0BAAAA,SAAS,EAATA;AAJyD,yBAArD,CAHM;;AAAA;AASZlE,wBAAAA,CAAC,IAAI,CAAL;;AATY,8BAURA,CAAC,KAAKe,CAAC,CAACsD,IAAF,CAAOjB,MAAP,CAVE;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAWJV,WAAW;AAAGtB,0BAAAA,EAAE,EAAFA;AAAH,2BAAUO,MAAV,EAXP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAd;;AAAA;AAAA;AAAA;AAAA;;AAhC8B;AAAA;;AAAA;AAAA;AAAA,mBA+CxBe,WAAW;AAAGtB,cAAAA,EAAE,EAAFA;AAAH,eAAUO,MAAV,EA/Ca;;AAAA;AAiDhC,gBAAI,CAACZ,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtBe,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,WADC;AAEPE,gBAAAA,OAAO,EAAE;AACPoB,kBAAAA,MAAM,EAAE;AADD;AAFF,eAAD,CAAR;AAMD;;AAxD+B,8CAyDzB;AAAEwD,cAAAA,OAAO,EAAE;AAAX,aAzDyB;;AAAA;AAAA;AAAA;AA2D1BxD,YAAAA,OA3D0B,GA2DjBH,qBAAqB,eAAM,OAAN,CA3DJ;AA4DhCkB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,WADC;AAEPE,cAAAA,OAAO,EAAE;AACPoB,gBAAAA,MAAM,EAANA;AADO;AAFF,aAAD,CAAR;AA5DgC,8CAkEzB;AAAEwD,cAAAA,OAAO,EAAE;AAAX,aAlEyB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AAAA,kBAATtB,SAAS;AAAA;AAAA;AAAA,GAAf;AAsEP,AAAO,IAAMuB,eAAe,GAAoB,SAAnCA,eAAmC,CAAC1C,QAAD;AAC9CA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,YADC;AAEPE,IAAAA,OAAO,EAAE;AACPyC,MAAAA,OAAO,EAAE;AADF;AAFF,GAAD,CAAR;AAMAN,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,UADC;AAEPE,IAAAA,OAAO,EAAE;AACP+C,MAAAA,KAAK,EAAExD;AADA;AAFF,GAAD,CAAR;AAMD,CAbM;AAeP,AAAO,IAAMuF,cAAc,GAAmB,SAAjCA,cAAiC;MAAG3C,iBAAAA;MAAUjB,mBAAAA;AACzD,MAAME,MAAM,GAAGH,qBAAqB,CAACC,UAAD,EAAa,OAAb,CAApC;AACAiB,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,WADC;AAEPE,IAAAA,OAAO,EAAE;AACPoB,MAAAA,MAAM,EAANA;AADO;AAFF,GAAD,CAAR;AAMA,SAAO;AAAEwD,IAAAA,OAAO,EAAE;AAAX,GAAP;AACD,CATM;AAiBP,AAAO,IAAMG,yBAAyB,GAA8B,SAAvDA,yBAAuD;;;MAClEjF,aAAAA;MACAkF,cAAAA;MACA7C,iBAAAA;AAEAA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,8BADC;AAEPE,IAAAA,OAAO,oCACGF,IADH,uBAC0BkF,KAD1B;AAFA,GAAD,CAAR;AAMD,CAXM;AAaP,AAAO,IAAMC,iBAAiB,GAAwB;AACpDC,EAAAA,OAAO,EAAE,KAD2C;AAEpDzC,EAAAA,OAAO,EAAE,EAF2C;AAGpDM,EAAAA,KAAK,EAAExD,SAH6C;AAIpD6B,EAAAA,MAAM,EAAE;AAJ4C,CAA/C;;AAOP,IAAM+D,YAAY,GAAG,SAAfA,YAAe,CACnB1F,KADmB,EAEnB2F,OAFmB;AAAA,SAInB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,UAHS,CAJQ;AAAA,CAArB;;AC1VA,IAAMsD,YAAY,gBAAGC,aAAa,CAAaL,iBAAb,CAAlC;;ACgBO,IAAMM,kBAAkB,GAAoB;AACjDC,EAAAA,IAAI,EAAE,EAD2C;AAEjDC,EAAAA,KAAK,EAAE,EAF0C;AAGjDhC,EAAAA,QAAQ,EAAE,EAHuC;AAIjDC,EAAAA,MAAM,EAAE,EAJyC;AAKjDgC,EAAAA,MAAM,EAAE,EALyC;AAMjDC,EAAAA,SAAS,EAAE;AANsC,CAA5C;AASP,IAAMC,WAAW,gBAAGN,aAAa,CAAkBC,kBAAlB,CAAjC;;ACrBA,IAAMM,iBAAiB,GAAsB,SAAvCA,iBAAuC,CAACL,IAAD;AAC3C,SAAOnE,CAAC,CAACyE,KAAF,CAAQzE,CAAC,CAAC0E,IAAF,CAAOP,IAAP,CAAR,KAAyB,EAAhC;AACD,CAFD;;ACQA,IAAMQ,kBAAkB,GAAuB,SAAzCA,kBAAyC,CAC7C5G,KAD6C,EAE7C6G,QAF6C,EAG7CC,aAH6C;AAK7C,MAAIzE,KAAK,GAAiB,IAA1B;AACA,MAAMzC,QAAQ,GAAGI,KAAK,CAAC6G,QAAD,CAAtB;AACA,MAAME,MAAM,GAAGD,aAAa,CAACE,OAAd,CAAsB,IAAtB,EAA4B,EAA5B,CAAf;AACA,MAAI/E,CAAC,CAAC+C,OAAF,CAAUpF,QAAV,KAAuBI,KAAK,CAAC,YAAD,CAAhC,EACEqC,KAAK,GAAG,IAAI4E,KAAJ,gBACOJ,QADP,oCAC8CE,MAD9C,6BAC4EnH,QAD5E,QAAR;AAGFsH,EAAAA,QAAQ,CAACjG,GAAT,CAAarB,QAAb,EAAuB,UAACsB,CAAD;AACrB,QAAImB,KAAJ,EAAW,OAAOA,KAAP;AACX,QAAM3B,IAAI,GAAGQ,CAAC,CAACR,IAAf;AACA,QAAMyG,SAAS,GAAGC,UAAU,CAACL,MAAD,CAAV,CAAmBM,iBAArC;AACA,QAAMC,QAAQ,sBAAoBT,QAApB,sBAA6CE,MAA7C,0BAAwEI,SAAS,CAACI,IAAV,CACpF,IADoF,CAAxE,kBAAd;;AAGA,QAAItF,CAAC,CAACuF,UAAF,CAAa9G,IAAb,KAAsBuB,CAAC,CAACC,GAAF,CAAMxB,IAAN,EAAY,aAAZ,CAA1B,EAAsD;AACpD,UAAM+G,WAAW,GAAW/G,IAAI,CAAC,aAAD,CAAhC;AACA,UAAMgH,kBAAkB,GAAGhH,IAAI,CAAC+D,IAAhC;;AACA,UAAIgD,WAAW,IAAIA,WAAW,UAAQC,kBAAtC,EAA4D;AAC1D,YAAI,CAACP,SAAS,CAACpD,QAAV,CAAmB2D,kBAAnB,CAAL,EAA6C;AAC3CrF,UAAAA,KAAK,GAAG,IAAI4E,KAAJ,CAAUK,QAAV,CAAR;AACD;AACF;AACF;;AACD,QAAI,eAACK,cAAc,CAACzG,CAAD,CAAnB,EAAwB;AACtBmB,MAAAA,KAAK,GAAG,IAAI4E,KAAJ,CAAUK,QAAV,CAAR;AACD;AACF,GAnBD;AAoBA,SAAOjF,KAAP;AACD,CAjCD;;AAmCA,IAAMuF,aAAa,GAAGhB,kBAAtB;;AACAgB,aAAa,CAAC,YAAD,CAAb,GAA8B,UAC5B5H,KAD4B,EAE5B6G,QAF4B,EAG5BC,aAH4B,EAI5Be,QAJ4B,EAK5BC,YAL4B;AAAA,SAO5BlB,kBAAkB,cACX5G,KADW;AACJ+H,IAAAA,UAAU,EAAE;AADR,MAEhBlB,QAFgB,EAGhBC,aAHgB,AAAA,CAPU;AAAA,CAA9B;;AC/CO,IAAMkB,EAAE,GAAG;AAChB1F,EAAAA,EAAE,EAAEzC,SAAS,CAACoI,MADE;AAEhBC,EAAAA,SAAS,EAAErI,SAAS,CAACoI,MAFL;AAGhBE,EAAAA,KAAK,EAAEtI,SAAS,CAACuI,MAHD;AAIhB3D,EAAAA,IAAI,EAAE5E,SAAS,CAACoI;AAJA,CAAX;AAOP,AAAO,IAAMI,QAAQ,gBAAGxI,SAAS,CAACyI,SAAV,CAAoB,CAC1CzI,SAAS,CAAC0I,OADgC,EAE1C1I,SAAS,CAACoI,MAFgC,CAApB,CAAjB;AAKP,AAAO,IAAMO,4BAA4B,GAAG;AAC1C5I,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IADsB;AAE1CoF,EAAAA,OAAO,eAAErF,SAAS,CAAC4I,OAAV,eACP5I,SAAS,CAAC6I,KAAV,CAAgB;AACdC,IAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF,UADV;AAEdnC,IAAAA,KAAK,eAAE/F,SAAS,CAACyI,SAAV,CAAoB,CAACzI,SAAS,CAACoI,MAAX,EAAmBpI,SAAS,CAAC+I,MAA7B,CAApB,EACJb,UAHW;AAIdc,IAAAA,QAAQ,EAAEhJ,SAAS,CAACiJ;AAJN,GAAhB,EAKGf,UANI,EAOPA,UATwC;AAU1CgB,EAAAA,WAAW,eAAElJ,SAAS,CAAC6I,KAAV,CAAgB;AAC3BC,IAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF,UADG;AAE3BnC,IAAAA,KAAK,eAAE/F,SAAS,CAACyI,SAAV,CAAoB,CAACzI,SAAS,CAACoI,MAAX,EAAmBpI,SAAS,CAAC+I,MAA7B,CAApB,EAA0Db;AAFtC,GAAhB,CAV6B;AAc1CnC,EAAAA,KAAK,EAAE/F,SAAS,CAACoI,MAdyB;AAe1CxD,EAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF;AAfmB,CAArC;AAuCP,AAAO,IAAMiB,2BAA2B,GAAG;AACzCpJ,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IADqB;AAEzC2E,EAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UAFkB;AAGzCrH,EAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA+B,CACnC,MADmC,EAEnC,OAFmC,EAGnC,QAHmC,EAInC,MAJmC,EAKnC,UALmC,EAMnC,UANmC,CAA/B,EAOHlB,UAVsC;AAWzCmB,EAAAA,QAAQ,EAAErJ,SAAS,CAACC,IAXqB;AAYzCiJ,EAAAA,WAAW,EAAElJ,SAAS,CAACoI;AAZkB,CAApC;AA6FP,AAAO,IAAMkB,QAAQ,gBAAGtJ,SAAS,CAACuJ,QAAV,CAAmBvJ,SAAS,CAACoI,MAA7B,CAAjB;AA2CP,AAAO,IAAMoB,uBAAuB;AAClCC,EAAAA,IAAI,EAAEzJ,SAAS,CAACoI,MAAV,CAAiBF,UADW;AAElCrH,EAAAA,IAAI,EAAEb,SAAS,CAACoI,MAAV,CAAiBF,UAFW;AAGlCnI,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IAHc;AAIlCyJ,EAAAA,MAAM,eAAE1J,SAAS,CAACoJ,KAAV,CAAiC,CAAC,WAAD,EAAc,OAAd,EAAuB,OAAvB,CAAjC;AAJ0B,GAK/BjB,EAL+B,CAA7B;AAQP,AAAO,IAAMwB,gCAAgC;AAC3C5J,EAAAA,QAAQ,EAAEyJ,uBAAuB,CAAC,UAAD,CADU;AAE3CE,EAAAA,MAAM,EAAEF,uBAAuB,CAAC,QAAD;AAFY,GAGxCrB,EAHwC,CAAtC;;ACxJP,IAAMyB,MAAM,GAAoB,CAC9B,aAD8B,EAE9B,oBAF8B,EAG9B,WAH8B,EAI9B,uBAJ8B,EAK9B,qBAL8B,EAM9B,eAN8B,EAO9B,sBAP8B,EAQ9B,qBAR8B,EAS9B,wBAT8B,EAU9B,sBAV8B,EAW9B,iBAX8B,EAY9B,sBAZ8B,EAa9B,qBAb8B,EAc9B,oBAd8B,EAe9B,kBAf8B,EAgB9B,uBAhB8B,EAiB9B,eAjB8B,EAkB9B,yBAlB8B,EAmB9B,oBAnB8B,EAoB9B,QApB8B,EAqB9B,gBArB8B,EAsB9B,eAtB8B,EAuB9B,mBAvB8B,EAwB9B,kBAxB8B,EAyB9B,kBAzB8B,EA0B9B,iBA1B8B,EA2B9B,aA3B8B,EA4B9B,eA5B8B,EA6B9B,cA7B8B,EA8B9B,wBA9B8B,EA+B9B,kBA/B8B,CAAhC;AA0CA,AAAO,IAAMC,MAAM,GAAwB,CACzC,OADyC,EAEzC,UAFyC,EAGzC,UAHyC,EAIzC,SAJyC,EAKzC,OALyC,EAMzC,WANyC,CAApC;AASP,AAAO,IAAMC,eAAe,gBAAG9J,SAAS,CAAC6I,KAAV,CAAgB;AAC7C3H,EAAAA,IAAI,eAAElB,SAAS,CAACoJ,KAAV,CAAgBQ,MAAhB,EAAwB1B,UADe;AAE7CtF,EAAAA,OAAO,EAAE5C,SAAS,CAACoI,MAAV,CAAiBF,UAFmB;AAG7CvF,EAAAA,QAAQ,eAAE3C,SAAS,CAACoJ,KAAV,CAAgBS,MAAhB,CAHmC;AAI7CnH,EAAAA,KAAK,EAAE1C,SAAS,CAACoI,MAJ4B;AAK7C3F,EAAAA,EAAE,EAAEzC,SAAS,CAACoI;AAL+B,CAAhB,CAAxB;AAQP,AAAO,IAAM2B,cAAc,GAAG;AAC5BpH,EAAAA,QAAQ,eAAE3C,SAAS,CAACoJ,KAAV,CAAmC,CAC3C,OAD2C,EAE3C,UAF2C,EAG3C,UAH2C,EAI3C,SAJ2C,EAK3C,OAL2C,EAM3C,WAN2C,EAO3C,gBAP2C,EAQ3C,iBAR2C,CAAnC,EASPlB,UAVyB;AAW5BnI,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IAXQ;AAY5ByC,EAAAA,KAAK,EAAE1C,SAAS,CAACoI;AAZW,CAAvB;;ACrFP,IAAMb,UAAU,GAAG;AACjByC,EAAAA,OAAO,EAAE;AACPxC,IAAAA,iBAAiB,EAAE,CAAC,cAAD,EAAiB,WAAjB,CADZ;AAEPI,IAAAA,WAAW,EAAE,SAFN;AAGPvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAHJ,GADQ;AAQjB+B,EAAAA,sBAAsB,EAAE;AACtBrC,IAAAA,WAAW,EAAE,wBADS;AAEtBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETiJ,MAAAA,WAAW,eAAElJ,SAAS,CAAC6I,KAAV,CAAgB;AAC3BC,QAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF,UADG;AAE3BnC,QAAAA,KAAK,eAAE/F,SAAS,CAACyI,SAAV,CAAoB,CAACzI,SAAS,CAACoI,MAAX,EAAmBpI,SAAS,CAAC+I,MAA7B,CAApB,EACJb;AAHwB,OAAhB,CAFJ;AAOTnC,MAAAA,KAAK,EAAE/F,SAAS,CAACoI,MAPR;AAQTxD,MAAAA,IAAI,eAAE5E,SAAS,CAACoJ,KAAV,CAA0C,CAC9C,8BAD8C,EAE9C,+BAF8C,CAA1C,EAGHlB,UAXM;AAYTgC,MAAAA,QAAQ,EAAElK,SAAS,CAACiJ;AAZX,KAFW;AAgBtBkB,IAAAA,YAAY,EAAE;AACZD,MAAAA,QAAQ,EAAE;AADE;AAhBQ,GARP;AA4BjBE,EAAAA,YAAY,EAAE;AACZxC,IAAAA,WAAW,EAAE,cADD;AAEZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AADX;AAFC,GA5BG;AAkCjBoK,EAAAA,YAAY,EAAE;AACZzC,IAAAA,WAAW,EAAE,cADD;AAEZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET2E,MAAAA,IAAI,eAAE5E,SAAS,CAACoJ,KAAV,CAAkC,CACtC,sBADsC,EAEtC,yBAFsC,EAGtC,uBAHsC,EAItC,4BAJsC,EAKtC,2BALsC,EAMtC,wBANsC,EAOtC,wBAPsC,EAQtC,uBARsC,EAStC,4BATsC,EAUtC,0BAVsC,EAWtC,uCAXsC,EAYtC,uBAZsC,EAatC,0BAbsC,EActC,wBAdsC,EAetC,6BAfsC,EAgBtC,4BAhBsC,EAiBtC,yBAjBsC,EAkBtC,yBAlBsC,EAmBtC,wBAnBsC,EAoBtC,6BApBsC,EAqBtC,2BArBsC,EAsBtC,wCAtBsC,CAAlC,EAuBHlB,UAzBM;AA0BTrH,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA+B,CACnC,UADmC,EAEnC,MAFmC,EAGnC,OAHmC,EAInC,QAJmC,EAKnC,KALmC,EAMnC,MANmC,EAOnC,UAPmC,CAA/B,EAQHlB,UAlCM;AAmCTgB,MAAAA,WAAW,EAAElJ,SAAS,CAACoI,MAnCd;AAoCTkC,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ,IApCX;AAqCTiB,MAAAA,QAAQ,EAAElK,SAAS,CAACiJ;AArCX,KAFC;AAyCZkB,IAAAA,YAAY,EAAE;AACZD,MAAAA,QAAQ,EAAE;AADE;AAzCF,GAlCG;AA+EjBK,EAAAA,eAAe,EAAE;AACf3C,IAAAA,WAAW,EAAE,iBADE;AAEfvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAFR;AAGT9D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MAHV;AAITkC,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ,IAJX;AAKTvE,MAAAA,QAAQ,eAAE1E,SAAS,CAAC6I,KAAV,CAAgB;AACxBjE,QAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UADC;AAExBrD,QAAAA,QAAQ,EAAE7E,SAAS,CAACoI;AAFI,OAAhB;AALD,KAFI;AAYf+B,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AAZC,GA/EA;AA+FjB0B,EAAAA,kBAAkB,EAAE;AAClB5C,IAAAA,WAAW,EAAE,oBADK;AAElBJ,IAAAA,iBAAiB,EAAE,CACjB,oBADiB,EAEjB,yBAFiB,EAGjB,qBAHiB,EAIjB,0BAJiB,EAKjB,qBALiB,EAMjB,WANiB,CAFD;AAUlBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETuC,MAAAA,sBAAsB,EAAEzK,SAAS,CAACiJ;AAFzB;AAVO,GA/FH;AA8GjByB,EAAAA,qBAAqB,EAAE;AACrB9C,IAAAA,WAAW,EAAE,uBADQ;AAErBJ,IAAAA,iBAAiB,EAAE,CAAC,sBAAD,EAAyB,WAAzB,CAFE;AAGrBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET5D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI;AAFV;AAHU,GA9GN;AAsHjBuC,EAAAA,oBAAoB,EAAE;AACpB/C,IAAAA,WAAW,EAAE,sBADO;AAEpBvH,IAAAA,SAAS,EAAE;AACTuK,MAAAA,UAAU,eAAE5K,SAAS,CAACoJ,KAAV,CAA4B,CAAC,MAAD,EAAS,OAAT,CAA5B,CADH;AAETyB,MAAAA,sBAAsB,EAAE7K,SAAS,CAACiJ,IAFzB;AAGTlJ,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AAHX,KAFS;AAOpBkK,IAAAA,YAAY,EAAE;AACZS,MAAAA,UAAU,EAAE,MADA;AAEZC,MAAAA,sBAAsB,EAAE;AAFZ;AAPM,GAtHL;AAkIjBC,EAAAA,uBAAuB,EAAE;AACvBtD,IAAAA,iBAAiB,EAAE,CAAC,SAAD,EAAY,WAAZ,CADI;AAEvBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAFY,GAlIR;AAwIjB6C,EAAAA,kBAAkB,EAAE;AAClBvD,IAAAA,iBAAiB,EAAE,CAAC,cAAD,EAAiB,WAAjB,CADD;AAElBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAFO,GAxIH;AA8IjB8C,EAAAA,YAAY,EAAE;AACZpD,IAAAA,WAAW,EAAE,cADD;AAEZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI;AAFR,KAFC;AAMZ+B,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AANF,GA9IG;AAwJjBmC,EAAAA,aAAa,EAAE;AACbzD,IAAAA,iBAAiB,EAAE,CACjB,gBADiB,EAEjB,iBAFiB,EAGjB,mBAHiB,EAIjB,WAJiB,CADN;AAObnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETgD,MAAAA,WAAW,EAAElL,SAAS,CAACoI,MAAV,CAAiBF,UAFrB;AAGTiD,MAAAA,QAAQ,EAAEnL,SAAS,CAACoI,MAAV,CAAiBF;AAHlB;AAPE,GAxJE;AAqKjBkD,EAAAA,iBAAiB,EAAE;AACjBxD,IAAAA,WAAW,EAAE,mBADI;AAEjBJ,IAAAA,iBAAiB,EAAE,CACjB,eADiB,EAEjB,oBAFiB,EAGjB,oBAHiB,EAIjB,WAJiB,CAFF;AAQjBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETmD,MAAAA,OAAO,EAAErL,SAAS,CAACiJ;AAFV;AARM,GArKF;AAkLjBqC,EAAAA,aAAa,EAAE;AACb1D,IAAAA,WAAW,EAAE,eADA;AAEbvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET2E,MAAAA,IAAI,eAAE5E,SAAS,CAACoJ,KAAV,CAAgB,CAAC,eAAD,CAAhB,CAFG;AAGTvI,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAAgB,CAAC,OAAD,CAAhB,CAHG;AAITF,MAAAA,WAAW,EAAElJ,SAAS,CAACoI,MAJd;AAKTkC,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ,IALX;AAMTiB,MAAAA,QAAQ,EAAElK,SAAS,CAACiJ,IANX;AAOTsC,MAAAA,UAAU,EAAEvL,SAAS,CAACiJ;AAPb,KAFE;AAWbkB,IAAAA,YAAY,EAAE;AACZD,MAAAA,QAAQ,EAAE;AADE;AAXD,GAlLE;AAiMjBsB,EAAAA,gBAAgB,EAAE;AAChB5D,IAAAA,WAAW,EAAE,kBADG;AAEhBvH,IAAAA,SAAS,EAAE;AACTQ,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAAuC,CAC3C,SAD2C,EAE3C,UAF2C,EAG3C,SAH2C,EAI3C,UAJ2C,CAAvC,EAKHlB,UANM;AAOTnI,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AAPX;AAFK,GAjMD;AA6MjBwL,EAAAA,cAAc,EAAE;AACd7D,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAEsJ,gCAFG;AAGdQ,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE;AADI;AAHA,GA7MC;AAoNjBgC,EAAAA,MAAM,EAAE;AACN9D,IAAAA,WAAW,EAAE,QADP;AAENvH,IAAAA,SAAS,EAAE0J,cAFL;AAGNI,IAAAA,YAAY,EAAE;AACZwB,MAAAA,QAAQ,EAAE,EADE;AAEZjJ,MAAAA,KAAK,EAAE;AAFK;AAHR,GApNS;AA4NjBkJ,EAAAA,gBAAgB,EAAE;AAChBhE,IAAAA,WAAW,EAAE,kBADG;AAEhBJ,IAAAA,iBAAiB,EAAE,CAAC,iBAAD,EAAoB,WAApB,CAFH;AAGhBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET2D,MAAAA,GAAG,EAAE7L,SAAS,CAACoI,MAAV,CAAiBF;AAFb;AAHK,GA5ND;AAoOjB4D,EAAAA,QAAQ,EAAE;AACRtE,IAAAA,iBAAiB,EAAE,CACjB,0BADiB,EAEjB,eAFiB,EAGjB,QAHiB,EAIjB,eAJiB,EAKjB,cALiB,EAMjB,WANiB,CADX;AASRI,IAAAA,WAAW,EAAE,UATL;AAURvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET6D,MAAAA,QAAQ,EAAE/L,SAAS,CAACC;AAFX,KAVH;AAcRkK,IAAAA,YAAY,EAAE;AACZ4B,MAAAA,QAAQ,EAAEzL;AADE;AAdN,GApOO;AAsPjB0L,EAAAA,cAAc,EAAE;AACdpE,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAEsJ;AAFG,GAtPC;AA0PjBsC,EAAAA,iBAAiB,EAAE;AACjBzE,IAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,QAAb,EAAuB,WAAvB,CADF;AAEjBI,IAAAA,WAAW,EAAE,mBAFI;AAGjBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAHM,GA1PF;AAiQjBgE,EAAAA,wBAAwB,EAAE;AACxBtE,IAAAA,WAAW,EAAE,0BADW;AAExBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETiJ,MAAAA,WAAW,eAAElJ,SAAS,CAAC6I,KAAV,CAAgB;AAC3B9C,QAAAA,KAAK,eAAE/F,SAAS,CAACyI,SAAV,CAAoB,CAACzI,SAAS,CAACoI,MAAX,EAAmBpI,SAAS,CAAC+I,MAA7B,CAApB,EACJb,UAFwB;AAG3BY,QAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF;AAHG,OAAhB,CAFJ;AAOTnC,MAAAA,KAAK,EAAE/F,SAAS,CAACoI,MAPR;AAQT8B,MAAAA,QAAQ,EAAElK,SAAS,CAACiJ;AARX,KAFa;AAYxBkB,IAAAA,YAAY,EAAE;AACZD,MAAAA,QAAQ,EAAE;AADE;AAZU,GAjQT;AAiRjBiC,EAAAA,aAAa,EAAE;AACbvE,IAAAA,WAAW,EAAE,eADA;AAEbvH,IAAAA,SAAS,EAAE;AACTQ,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA+B,CACnC,MADmC,EAEnC,OAFmC,EAGnC,QAHmC,EAInC,MAJmC,EAKnC,UALmC,CAA/B,EAMHlB,UAPM;AAQTtD,MAAAA,IAAI,eAAE5E,SAAS,CAACoJ,KAAV,CAAmC,CACvC,cADuC,EAEvC,iBAFuC,EAGvC,WAHuC,EAIvC,cAJuC,EAKvC,UALuC,EAMvC,WANuC,EAOvC,iBAPuC,EAQvC,OARuC,EASvC,WATuC,EAUvC,UAVuC,EAWvC,WAXuC,CAAnC,EAYHlB,UApBM;AAqBTnI,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IArBX;AAsBTiJ,MAAAA,WAAW,EAAElJ,SAAS,CAACoI;AAtBd;AAFE,GAjRE;AA4SjBgE,EAAAA,aAAa,EAAE;AACb5E,IAAAA,iBAAiB,EAAE,CACjB,iBADiB,EAEjB,mBAFiB,EAGjB,oBAHiB,EAIjB,kBAJiB,EAKjB,iBALiB,EAMjB,uBANiB,EAOjB,mBAPiB,EAQjB,WARiB,CADN;AAWbI,IAAAA,WAAW,EAAE,eAXA;AAYbvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET5D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MAFV;AAGT1D,MAAAA,QAAQ,eAAE1E,SAAS,CAAC6I,KAAV,CAAgB;AACxBjE,QAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UADC;AAExBrD,QAAAA,QAAQ,EAAE7E,SAAS,CAACoI;AAFI,OAAhB;AAHD;AAZE,GA5SE;AAiUjBnD,EAAAA,QAAQ,EAAE;AACRuC,IAAAA,iBAAiB,EAAE,CACjB,eADiB,EAEjB,cAFiB,EAGjB,iBAHiB,EAIjB,kBAJiB,EAKjB,gBALiB,EAMjB,oBANiB,EAOjB,eAPiB,EAQjB,QARiB,EASjB,WATiB,CADX;AAYRI,IAAAA,WAAW,EAAE,UAZL;AAaRvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETrH,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA8B,CAClC,MADkC,EAElC,YAFkC,EAGlC,WAHkC,EAIlC,gBAJkC,EAKlC,YALkC,CAA9B;AAFG,KAbH;AAuBRe,IAAAA,YAAY,EAAE;AACZtJ,MAAAA,IAAI,EAAE;AADM;AAvBN,GAjUO;AA4VjBwL,EAAAA,cAAc,EAAE;AACdzE,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,4BACJsJ,gCADI;AAEP9I,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA+B,CAAC,OAAD,EAAU,MAAV,EAAkB,QAAlB,CAA/B;AAFC,MAFK;AAMde,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE,WADI;AAEZ7I,MAAAA,IAAI,EAAE;AAFM;AANA,GA5VC;AAuWjByL,EAAAA,aAAa,EAAE;AACb1E,IAAAA,WAAW,EAAE,eADA;AAEbvH,IAAAA,SAAS,EAAE;AACTkM,MAAAA,KAAK,EAAEvM,SAAS,CAAC+I,MADR;AAEThJ,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AAFX;AAFE,GAvWE;AA8WjBuM,EAAAA,YAAY,EAAE;AACZ5E,IAAAA,WAAW,EAAE,cADD;AAEZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AADX;AAFC,GA9WG;AAoXjBwF,EAAAA,cAAc,EAAE;AACdmC,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAE;AACTuE,MAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UADd;AAETnI,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IAFX;AAGTwM,MAAAA,cAAc,EAAEzM,SAAS,CAACoI,MAHjB;AAITsE,MAAAA,YAAY,EAAE1M,SAAS,CAACoI,MAJf;AAKTuE,MAAAA,KAAK,EAAE3M,SAAS,CAACoI,MALR;AAMTwE,MAAAA,QAAQ,EAAE5M,SAAS,CAACuI;AANX;AAFG,GApXC;AA+XjBsE,EAAAA,eAAe,EAAE;AACfrF,IAAAA,iBAAiB,EAAE,CAAC,gBAAD,EAAmB,WAAnB,CADJ;AAEfI,IAAAA,WAAW,EAAE,iBAFE;AAGfvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET4E,MAAAA,KAAK,EAAE9M,SAAS,CAACoI,MAFR;AAGT2E,MAAAA,QAAQ,EAAE/M,SAAS,CAACiJ,IAHX;AAIT3D,MAAAA,WAAW,EAAEtF,SAAS,CAACoI,MAAV,CAAiBF;AAJrB,KAHI;AASfiC,IAAAA,YAAY,EAAE;AACZ4C,MAAAA,QAAQ,EAAE;AADE;AATC,GA/XA;AA4YjBC,EAAAA,gBAAgB,EAAE;AAChBpF,IAAAA,WAAW,EAAE,kBADG;AAEhBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETgN,MAAAA,GAAG,EAAEjN,SAAS,CAAC+I,MAFN;AAGTuB,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ,IAHX;AAITiE,MAAAA,QAAQ,EAAElN,SAAS,CAACiJ;AAJX,KAFK;AAQhBkB,IAAAA,YAAY,EAAE;AACZ8C,MAAAA,GAAG,EAAE;AADO;AARE,GA5YD;AAwZjBE,EAAAA,kBAAkB,EAAE;AAClBvF,IAAAA,WAAW,EAAE,oBADK;AAElBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI;AAFR,KAFO;AAMlB+B,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AANI,GAxZH;AAkajBsE,EAAAA,kBAAkB,EAAE;AAClB5F,IAAAA,iBAAiB,EAAE,CAAC,gBAAD,EAAmB,UAAnB,EAA+B,WAA/B,CADD;AAElBI,IAAAA,WAAW,EAAE,oBAFK;AAGlBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETmF,MAAAA,OAAO,EAAErN,SAAS,CAACuI,MAFV;AAGT+E,MAAAA,MAAM,EAAE9E;AAHC,KAHO;AAQlB2B,IAAAA,YAAY,EAAE;AACZkD,MAAAA,OAAO,EAAE,EADG;AAEZC,MAAAA,MAAM,EAAE;AAFI;AARI,GAlaH;AA+ajBC,EAAAA,cAAc,EAAE;AACd3F,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETwC,MAAAA,EAAE,EAAEzC,SAAS,CAACoI,MAFL;AAGTC,MAAAA,SAAS,EAAErI,SAAS,CAACoI,MAHZ;AAITxD,MAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAJP;AAKTE,MAAAA,KAAK,EAAEtI,SAAS,CAACuI;AALR;AAFG,GA/aC;AAybjBiF,EAAAA,aAAa,EAAE;AACb5F,IAAAA,WAAW,EAAE,eADA;AAEbvH,IAAAA,SAAS,EAAE8I;AAFE,GAzbE;AA6bjBsE,EAAAA,cAAc,EAAE;AACdjG,IAAAA,iBAAiB,EAAE,CACjB,oBADiB,EAEjB,mBAFiB,EAGjB,eAHiB,EAIjB,oBAJiB,EAKjB,gBALiB,EAMjB,gBANiB,EAOjB,gBAPiB,EAQjB,aARiB,EASjB,gBATiB,EAUjB,aAViB,EAWjB,cAXiB,EAYjB,mBAZiB,EAajB,oBAbiB,EAcjB,WAdiB,CADL;AAiBdI,IAAAA,WAAW,EAAE,gBAjBC;AAkBdvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET1E,MAAAA,OAAO,EAAExD,SAAS,CAACoI,MAFV;AAGThF,MAAAA,QAAQ,EAAEkG,QAHD;AAIToE,MAAAA,UAAU,EAAE1N,SAAS,CAACuI;AAJb,KAlBG;AAwBd4B,IAAAA,YAAY,EAAE;AACZ/G,MAAAA,QAAQ,EAAE;AADE;AAxBA,GA7bC;AAydjBuK,EAAAA,YAAY,EAAE;AACZnG,IAAAA,iBAAiB,EAAE,CAAC,gBAAD,EAAmB,WAAnB,CADP;AAEZI,IAAAA,WAAW,EAAE,cAFD;AAGZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETlE,MAAAA,eAAe,EAAEhE,SAAS,CAACiJ,IAFlB;AAGThG,MAAAA,UAAU,EAAEjD,SAAS,CAACoI,MAAV,CAAiBF;AAHpB;AAHC,GAzdG;AAkejB0F,EAAAA,KAAK,EAAE;AACLhG,IAAAA,WAAW,EAAE,OADR;AAELvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET4N,MAAAA,gBAAgB,EAAE7N,SAAS,CAACoI,MAFnB;AAGT9D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MAHV;AAIT0F,MAAAA,WAAW,EAAE9N,SAAS,CAACiJ;AAJd,KAFN;AAQLkB,IAAAA,YAAY,EAAE;AACZ7F,MAAAA,OAAO,EAAE;AADG;AART,GAleU;AA8ejByJ,EAAAA,eAAe,EAAE;AACfvG,IAAAA,iBAAiB,EAAE,CAAC,OAAD,EAAU,WAAV,CADJ;AAEfI,IAAAA,WAAW,EAAE,iBAFE;AAGfvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET5D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MAFV;AAGTkF,MAAAA,MAAM,EAAE9E,QAHC;AAITwF,MAAAA,OAAO,EAAEhO,SAAS,CAAC+I,MAJV;AAKTsE,MAAAA,OAAO,EAAErN,SAAS,CAACuI;AALV,KAHI;AAUf4B,IAAAA,YAAY,EAAE;AACZ6D,MAAAA,OAAO,EAAE,EADG;AAEZX,MAAAA,OAAO,EAAE,EAFG;AAGZC,MAAAA,MAAM,EAAE,YAHI;AAIZhJ,MAAAA,OAAO,EAAE;AAJG;AAVC,GA9eA;AA+fjB2J,EAAAA,gBAAgB,EAAE;AAChBrG,IAAAA,WAAW,EAAE,kBADG;AAEhBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETiO,MAAAA,GAAG,EAAElO,SAAS,CAAC+I,MAFN;AAGTkE,MAAAA,GAAG,EAAEjN,SAAS,CAAC+I,MAHN;AAIThD,MAAAA,KAAK,EAAE/F,SAAS,CAACoI,MAJR;AAKT9D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MALV;AAMTkC,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ;AANX,KAFK;AAUhBkB,IAAAA,YAAY,EAAE;AACZ+D,MAAAA,GAAG,EAAE;AADO;AAVE,GA/fD;AA6gBjBC,EAAAA,mBAAmB,EAAE;AACnBvG,IAAAA,WAAW,EAAE,qBADM;AAEnBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAFR;AAGTgG,MAAAA,OAAO,EAAEpO,SAAS,CAACC,IAHV;AAITqK,MAAAA,QAAQ,EAAEtK,SAAS,CAACiJ;AAJX,KAFQ;AAQnBkB,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AARK,GA7gBJ;AAyhBjBuF,EAAAA,QAAQ,EAAE;AACR7G,IAAAA,iBAAiB,EAAE,CACjB,oBADiB,EAEjB,UAFiB,EAGjB,gBAHiB,EAIjB,WAJiB,CADX;AAORI,IAAAA,WAAW,EAAE,UAPL;AAQRvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AARH,GAzhBO;AAqiBjBoG,EAAAA,kBAAkB,EAAE;AAClB1G,IAAAA,WAAW,EAAE,oBADK;AAElBJ,IAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,WAAb,CAFD;AAGlBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAHO,GAriBH;AA4iBjBqG,EAAAA,wBAAwB,EAAE;AACxB/G,IAAAA,iBAAiB,EAAE,CAAC,SAAD,EAAY,WAAZ,CADK;AAExBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAFa,GA5iBT;AAkjBjBsG,EAAAA,kBAAkB,EAAE;AAClB5G,IAAAA,WAAW,EAAE,oBADK;AAElBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAFR;AAGTgG,MAAAA,OAAO,EAAEpO,SAAS,CAACC;AAHV,KAFO;AAOlBkK,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AAPI,GAljBH;AA6jBjB2F,EAAAA,mBAAmB,EAAE;AACnBjH,IAAAA,iBAAiB,EAAE,CAAC,cAAD,EAAiB,WAAjB,CADA;AAEnBnH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAFQ,GA7jBJ;AAmkBjBwG,EAAAA,cAAc,EAAE;AACd9G,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAEsJ;AAFG,GAnkBC;AAukBjBgF,EAAAA,cAAc,EAAE;AACdnH,IAAAA,iBAAiB,EAAE,CACjB,oBADiB,EAEjB,qBAFiB,EAGjB,2BAHiB,EAIjB,kBAJiB,EAKjB,WALiB,CADL;AAQdI,IAAAA,WAAW,EAAE,gBARC;AASdvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETgF,MAAAA,QAAQ,EAAElN,SAAS,CAACiJ;AAFX;AATG,GAvkBC;AAqlBjB2F,EAAAA,kBAAkB,EAAE;AAClBhH,IAAAA,WAAW,EAAE,oBADK;AAElBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AADX;AAFO,GArlBH;AA2lBjB4O,EAAAA,yBAAyB,EAAE;AACzBjH,IAAAA,WAAW,EAAE,2BADY;AAEzBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC;AADX;AAFc,GA3lBV;AAimBjB6O,EAAAA,mBAAmB,EAAE;AACnBlH,IAAAA,WAAW,EAAE,qBADM;AAEnBvH,IAAAA,SAAS,4BACJsJ,gCADI;AAEP9I,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAA0B,CAAC,QAAD,CAA1B;AAFC,MAFU;AAMnBe,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE,WADI;AAEZ7I,MAAAA,IAAI,EAAE;AAFM;AANK,GAjmBJ;AA4mBjBkO,EAAAA,OAAO,EAAE;AACPvH,IAAAA,iBAAiB,EAAE,CAAC,iBAAD,EAAoB,kBAApB,EAAwC,WAAxC,CADZ;AAEPI,IAAAA,WAAW,EAAE,SAFN;AAGPvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETzF,MAAAA,EAAE,EAAEzC,SAAS,CAACoI,MAAV,CAAiBF;AAFZ;AAHJ,GA5mBQ;AAonBjB8G,EAAAA,iBAAiB,EAAE;AACjBxH,IAAAA,iBAAiB,EAAE,CAAC,SAAD,EAAY,WAAZ,CADF;AAEjBI,IAAAA,WAAW,EAAE,mBAFI;AAGjBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAHM,GApnBF;AA2nBjB1C,EAAAA,SAAS,EAAE;AACTgC,IAAAA,iBAAiB,EAAE,CAAC,gBAAD,EAAmB,WAAnB,CADV;AAETI,IAAAA,WAAW,EAAE,WAFJ;AAGTvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAETzF,MAAAA,EAAE,EAAEzC,SAAS,CAACoI,MAAV,CAAiBF;AAFZ;AAHF,GA3nBM;AAmoBjB+G,EAAAA,cAAc,EAAE;AACdrH,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAE8I;AAFG,GAnoBC;AAuoBjB+F,EAAAA,mBAAmB,EAAE;AACnB1H,IAAAA,iBAAiB,EAAE,CAAC,WAAD,EAAc,WAAd,CADA;AAEnBI,IAAAA,WAAW,EAAE,qBAFM;AAGnBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET5D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI;AAFV;AAHQ,GAvoBJ;AA+oBjB+G,EAAAA,aAAa,EAAE;AACb3H,IAAAA,iBAAiB,EAAE,CAAC,oBAAD,EAAuB,WAAvB,CADN;AAEbI,IAAAA,WAAW,EAAE,eAFA;AAGbvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG;AADf;AAHE,GA/oBE;AAspBjBkH,EAAAA,kBAAkB,EAAE;AAClBxH,IAAAA,WAAW,EAAE,oBADK;AAElBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAETY,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAAwC,CAAC,UAAD,EAAa,SAAb,CAAxC,EACHlB;AAHM;AAFO,GAtpBH;AA8pBjBmH,EAAAA,YAAY,EAAE;AACZzH,IAAAA,WAAW,EAAE,cADD;AAEZvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IADX;AAET6I,MAAAA,KAAK,EAAE9I,SAAS,CAACoI;AAFR,KAFC;AAMZ+B,IAAAA,YAAY,EAAE;AACZrB,MAAAA,KAAK,EAAE;AADK;AANF,GA9pBG;AAwqBjBwG,EAAAA,cAAc,EAAE;AACd1H,IAAAA,WAAW,EAAE,gBADC;AAEdvH,IAAAA,SAAS,EAAEsJ,gCAFG;AAGdQ,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE;AADI;AAHA,GAxqBC;AA+qBjB6F,EAAAA,WAAW,EAAE;AACX3H,IAAAA,WAAW,EAAE,aADF;AAEXvH,IAAAA,SAAS,EAAEsJ,gCAFA;AAGXQ,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE;AADI;AAHH,GA/qBI;AAsrBjB8F,EAAAA,WAAW,EAAE;AACX5H,IAAAA,WAAW,EAAE,aADF;AAEXvH,IAAAA,SAAS,EAAEsJ,gCAFA;AAGXQ,IAAAA,YAAY,EAAE;AACZT,MAAAA,MAAM,EAAE;AADI;AAHH,GAtrBI;AA6rBjB+F,EAAAA,iBAAiB,EAAE;AACjBjI,IAAAA,iBAAiB,EAAE,CAAC,iBAAD,EAAoB,WAApB,CADF;AAEjBI,IAAAA,WAAW,EAAE,mBAFI;AAGjBvH,IAAAA,SAAS,EAAE;AACTN,MAAAA,QAAQ,EAAEgI,aAAa,CAACG,UADf;AAET5D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI,MAFV;AAGTiF,MAAAA,OAAO,EAAErN,SAAS,CAACuI;AAHV,KAHM;AAQjB4B,IAAAA,YAAY,EAAE;AACZ7F,MAAAA,OAAO,EAAE,EADG;AAEZ+I,MAAAA,OAAO,EAAE;AAFG;AARG,GA7rBF;AA0sBjBqC,EAAAA,eAAe,EAAE;AACf9H,IAAAA,WAAW,EAAE,iBADE;AAEfvH,IAAAA,SAAS,EAAE;AACTgF,MAAAA,OAAO,eAAErF,SAAS,CAAC4I,OAAV,eACP5I,SAAS,CAAC6I,KAAV,CAAgB;AACdC,QAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF,UADV;AAEdhH,QAAAA,IAAI,EAAElB,SAAS,CAACoI,MAAV,CAAiBF,UAFT;AAGdxD,QAAAA,QAAQ,eAAE1E,SAAS,CAAC6I,KAAV,CAAgB;AACxBjE,UAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UADC;AAExBrD,UAAAA,QAAQ,EAAE7E,SAAS,CAACoI;AAFI,SAAhB;AAHI,OAAhB,EAOGF,UARI,EASPA,UAVO;AAWTtD,MAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAXP;AAYTrI,MAAAA,QAAQ,EAAEC,SAAS,CAACC,IAZX;AAaTY,MAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAAkC,CAAC,QAAD,EAAW,OAAX,CAAlC,CAbG;AAcTkE,MAAAA,MAAM,EAAEtN,SAAS,CAAC0I,OAdT;AAeTQ,MAAAA,WAAW,EAAElJ,SAAS,CAACoI,MAfd;AAgBT9D,MAAAA,OAAO,EAAEtE,SAAS,CAACoI;AAhBV,KAFI;AAoBf+B,IAAAA,YAAY,EAAE;AACZjB,MAAAA,WAAW,EAAE,kBADD;AAEZrI,MAAAA,IAAI,EAAE;AAFM;AApBC;AA1sBA,CAAnB;;ACdA,IAAMiC,YAAU,GAAyB,CAAC,YAAD,EAAe,YAAf,CAAzC;AAOA,AAAO,IAAM6M,oBAAoB,GAAkB;AACjDC,EAAAA,OAAO,EAAE,EADwC;AAEjDC,EAAAA,QAAQ,EAAE;AAFuC,CAA5C;AAmBP,AAAO,IAAMC,UAAU;AAAA,0EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AACpCF,YAAAA,OADoC,QACpCA,OADoC,EAEpCzM,MAFoC,QAEpCA,MAFoC,EAGpCD,QAHoC,QAGpCA,QAHoC;AAM9B2M,YAAAA,QAN8B,GAME,EANF;AAAA;AAQlCD,YAAAA,OAAO,CAACxO,GAAR;AAAA,yEAAY,iBAAOqB,EAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACYsM,SAAO,CAACpL,eAAR,CAAwBR,MAAxB,EACnBe,QADmB,CACV,MADU,EAEnB6L,MAFmB,CAEZ;AAAEC,0BAAAA,IAAI,EAAE,CAAC,MAAD;AAAR,yBAFY,EAGnB7L,IAHmB,CAGd1B,EAHc,CADZ;;AAAA;AACJwN,wBAAAA,OADI;AAKJC,wBAAAA,QALI,oBAKOD,OAAO,CACrBD,IADc,EALP,qBAKO,cAEbzN,OAFa,GAGdnB,GAHc,CAGV,UAAC+O,GAAD;AAAA,iCAASA,GAAG,CAACjP,IAAb;AAAA,yBAHU,CALP;AASV2O,wBAAAA,QAAQ,CAACpN,EAAD,CAAR,GAAeyN,QAAf;;AATU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAZ;;AAAA;AAAA;AAAA;AAAA;AAWAhN,YAAAA,QAAQ,CAAC;AACPnC,cAAAA,OAAO,EAAE;AACP8O,gBAAAA,QAAQ,EAARA;AADO,eADF;AAIPhP,cAAAA,IAAI,EAAE;AAJC,aAAD,CAAR;AAnBkC;AAAA;;AAAA;AAAA;AAAA;AA0BlCuP,YAAAA,OAAO,CAAC5N,KAAR;AA1BkC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAAA,kBAAVsN,UAAU;AAAA;AAAA;AAAA,GAAhB;;AA+BP,IAAMO,eAAe,GAAG,SAAlBA,eAAkB,CACtB7P,KADsB,EAEtB2F,OAFsB;AAAA,SAItB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,YAHS,CAJW;AAAA,CAAxB;;AC7DO,IAAMwN,eAAe,gBAAGjK,aAAa,CAACsJ,oBAAD,CAArC;;ACUA,IAAMY,oBAAoB;AAAA,0EAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AACxD1E,YAAAA,GADwD,QACxDA,GADwD,EAExD/K,IAFwD,QAExDA,IAFwD;AAAA,6CAGpD0P,KAAK,CAACC,IAAN,CAAW5E,GAAX,EAAgB/K,IAAhB,CAHoD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AAAA,kBAApByP,oBAAoB;AAAA;AAAA;AAAA,GAA1B;AAKP,IAAMG,uBAAuB,gBAAGrK,aAAa,CAAU;AACrDwF,EAAAA,GAAG,EAAE,IADgD;AAErD0E,EAAAA,oBAAoB,EAApBA;AAFqD,CAAV,CAA7C;;ACLA,IAAMlQ,SAAS,GAAGkH,UAAU,CAACgD,eAAX,CAA2BlK,SAA7C;AACA,IAAM8J,YAAY,GAAG5C,UAAU,CAACgD,eAAX,CAA2BJ,YAAhD;AACA,IAAMvC,WAAW,GAAGL,UAAU,CAACgD,eAAX,CAA2B3C,WAA/C;;AAkBA,IAAM2C,eAAe,GAA4C,SAA3DA,eAA2D,CAACpK,KAAD;;;qBAS3DA,MAPF2I;MAAAA,kCAAQ;MACR/I,WAMEI,MANFJ;MACAuE,UAKEnE,MALFmE;MACAgG,WAIEnK,MAJFmK;MACAqG,YAGExQ,MAHFwQ;MACAjM,WAEEvE,MAFFuE;MACGkM,kCACDzQ;;oBACqD0Q,UAAU,CACjEzK,YADiE;MAA3D/B,wBAAAA;MAAWb,sBAAAA;MAASsN,uBAAAA;MAAUjL,6BAAAA;;qBAGAgL,UAAU,CAACH,uBAAD;MAAxC7E,mBAAAA;MAAK0E,oCAAAA;;qBAUTM,UAAU,CAAClK,WAAD;MARZJ,oBAAAA;MACAC,qBAAAA;MACAhC,wBAAAA;MACAC,sBAAAA;MACAgC,sBAAAA;MACAC,yBAAAA;MACUqK,+BAAVrM;MACSsM,2BAAT1M;;qBAEmBuM,UAAU,CAACP,eAAD;MAAvBT,wBAAAA;;AACR,MAAMoB,KAAK,GACT,CAAC7O,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqBlC,OAArB,qBACIkC,KAAK,CAAClC,OAAD,CADT,qBACI,eAAgBpD,IADpB,GAEIoD,OAAO,IAAIsC,iBAAiB,CAACL,IAAD,CAA5B,IAAuCyK,WAH7C;;AAIA,MAAME,WAAW,GAAG,SAAdA,WAAc;;;AAClB,QAAMC,GAAG,GAAG3M,QAAQ,CAACyM,KAAD,CAApB;AACA,QAAM7L,GAAG,GAAGX,MAAM,CAACwM,KAAD,CAAlB;AACA,QAAMG,cAAc,GAAG,CAAChP,CAAC,CAAC+C,OAAF,CAAUT,QAAQ,IAAIqM,eAAtB,CAAD,GACnBrM,QAAQ,IAAIqM,eADO,GAEnBrK,SAAS,CAACuK,KAAD,CAFb;;AAGA,QAAI,CAAC7O,CAAC,CAAC+C,OAAF,CAAU0K,QAAV,CAAD,IAAwBc,SAAxB,IAAqC9E,GAAzC,EAA8C;AAC5C,UAAMwF,KAAK,GAAG7M,QAAQ,CAACmM,SAAD,CAAR,IAAuB,CAArC;;AACA,UAAIvO,CAAC,CAACC,GAAF,CAAMwN,QAAN,EAAgBc,SAAhB,CAAJ,EAAgC;AAC9B,YAAMjK,UAAS,GAAGmJ,QAAQ,CAACc,SAAD,CAAR,CAAoBvP,GAApB,CAAwB,UAACkD,OAAD;AACxC,iBAAO;AACLA,YAAAA,OAAO,EAAPA,OADK;AAELE,YAAAA,QAAQ,EAAE6M,KAFL;AAGLC,YAAAA,gBAAgB,EAAE;AAHb,WAAP;AAKD,SANiB,CAAlB;;AAOA,eAAOf,oBAAoB,CAAC;AAC1B1E,UAAAA,GAAG,EAAHA,GAD0B;AAE1B/K,UAAAA,IAAI,EAAE;AACJoB,YAAAA,YAAY,EAAE,QADV;AAEJqP,YAAAA,MAAM,EAAE,CACN;AACE9O,cAAAA,EAAE,EAAEe,OADN;AAEEkD,cAAAA,SAAS,EAATA;AAFF,aADM;AAFJ;AAFoB,SAAD,CAApB,CAYJ8K,IAZI,CAYC,UAACC,GAAD;AACJX,UAAAA,QAAQ,IAAItN,OAAZ,IAAuBsN,QAAQ,CAACtN,OAAD,CAA/B;AACA,iBAAOiO,GAAP;AACD,SAfI,WAgBE;cAAGC,gBAAAA;AACR7L,UAAAA,cAAc,IAAIA,cAAc,CAAC6L,QAAQ,CAAC,MAAD,CAAT,CAAhC;AACA,iBAAOA,QAAP;AACD,SAnBI,CAAP;AAoBD;AACF;;AACD,WAAO,CAAC7F,GAAD,GACHxH,SAAS,IACPA,SAAS,CAAC;AACRC,MAAAA,OAAO,EAAE2M,KADD;AAER1M,MAAAA,KAAK,iBAAEgC,IAAI,CAAC0K,KAAD,CAAN,qBAAE,YAAaxO,EAFZ;AAGR+B,MAAAA,QAAQ,EAAE2M,GAHF;AAIR1M,MAAAA,MAAM,EAAEW,GAJA;AAKRV,MAAAA,QAAQ,EAAE0M;AALF,KAAD,CAFR,GASHb,oBAAoB,CAAC;AACnB1E,MAAAA,GAAG,EAAHA,GADmB;AAEnB/K,MAAAA,IAAI,EAAE;AACJwD,QAAAA,OAAO,EAAE2M,KADL;AAEJ1M,QAAAA,KAAK,kBAAEgC,IAAI,CAAC0K,KAAD,CAAN,qBAAE,aAAaxO,EAFhB;AAGJ+B,QAAAA,QAAQ,EAAE2M,GAHN;AAIJ1M,QAAAA,MAAM,EAAEW,GAJJ;AAKJV,QAAAA,QAAQ,EAAE0M;AALN;AAFa,KAAD,CAApB,CAUGI,IAVH,CAUQ,UAACC,GAAD;AACJX,MAAAA,QAAQ,IAAItN,OAAZ,IAAuBsN,QAAQ,CAACtN,OAAD,CAA/B;AACA,aAAOiO,GAAP;AACD,KAbH,WAcS;UAAGC,iBAAAA;AACR7L,MAAAA,cAAc,IAAIA,cAAc,CAAC6L,QAAQ,CAAC,MAAD,CAAT,CAAhC;AACA,aAAOA,QAAP;AACD,KAjBH,CATJ;AA2BD,GAjED;;AAkEA,MAAMC,YAAY,GAChB,CAACvP,CAAC,CAAC+C,OAAF,CAAU0K,QAAV,CAAD,IAAwBc,SAAxB,GACI,KADJ,GAEIrG,QAAQ,IAAI,CAAC7D,MAAM,CAACwK,KAAD,CAAnB,IAA8B,CAACA,KAHrC;;AAIA,MAAMW,WAAW;AACfV,IAAAA,WAAW,EAAXA,WADe;AAEf5G,IAAAA,QAAQ,EAAEA,QAAQ,IAAIqH,YAFP;AAGf7I,IAAAA,KAAK,EAALA;AAHe,KAIZ3I,KAJY,CAAjB;;AAMA,SAAOJ,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAQ,IAAA,QAAQ,EAAE4R,YAAlB;AAAgC,IAAA,OAAO,EAAET;AAAzC,KAA0DN,CAA1D,GACG9H,KADH,CAHF;AAOD,CAhHD;;AAkHAyB,eAAe,CAAClK,SAAhB,GAA4BA,SAA5B;AACAkK,eAAe,CAACJ,YAAhB,GAA+BA,YAA/B;AACAI,eAAe,CAAC3C,WAAhB,GAA8BA,WAA9B;;AC9IA,IAAMiK,OAAO,GAA0B;AACrCC,EAAAA,OAAO,EAAE;AAD4B,CAAvC;AAIA,IAAMC,sBAAsB,gBAAG1L,aAAa,CAAwBwL,OAAxB,CAA5C;;ACgCO,IAAMG,gBAAgB;AAAA,0EAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAChD7O,YAAAA,MADgD,QAChDA,MADgD,EAEhD8O,aAFgD,QAEhDA,aAFgD,EAGhD/O,QAHgD,QAGhDA,QAHgD,EAIhDY,KAJgD,QAIhDA,KAJgD,EAKhDgN,QALgD,QAKhDA,QALgD;AAAA;;AAAA,iBAQ1ChN,KAR0C;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAS5BA,KAAK,CAACH,eAAN,CAAsBR,MAAtB,EAA8B+O,MAA9B,CAAqC;AAAED,cAAAA,aAAa,EAAbA;AAAF,aAArC,CAT4B;;AAAA;AAStCpO,YAAAA,CATsC;AAU5CiN,YAAAA,QAAQ,CAACjN,CAAC,CAACpB,EAAH,CAAR;AACAS,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,kBADC;AAEPE,cAAAA,OAAO,EAAE;AAAEkR,gBAAAA,aAAa,EAAbA;AAAF;AAFF,aAAD,CAAR;;AAX4C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAiB9C7B,YAAAA,OAAO,CAAC5N,KAAR;;AAjB8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAAA,kBAAhBwP,gBAAgB;AAAA;AAAA;AAAA,GAAtB;AAyBP,AAAO,IAAMG,iBAAiB,GAAsB,SAAvCA,iBAAuC,CAAChQ,MAAD,EAASe,QAAT;AAClDA,EAAAA,QAAQ,IACNA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,WADC;AAEPE,IAAAA,OAAO,EAAE;AACPoB,MAAAA,MAAM,EAANA;AADO;AAFF,GAAD,CADV;AAOD,CARM;AAeP,AAAO,IAAMiQ,gBAAgB,GAAqB,SAArCA,gBAAqC,CAACH,aAAD,EAAgB/O,QAAhB;AAChDA,EAAAA,QAAQ,IACNA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,kBADC;AAEPE,IAAAA,OAAO,EAAE;AACPkR,MAAAA,aAAa,EAAbA;AADO;AAFF,GAAD,CADV;AAOD,CARM;AAeP,AAAO,IAAMI,oBAAoB;AAAA,0EAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AACxDlP,YAAAA,MADwD,SACxDA,MADwD,EAExDD,QAFwD,SAExDA,QAFwD;AAAA;AAAA;AAAA,mBAKtBoP,eAAe,CAAC3O,eAAhB,CAAgCR,MAAhC,EAC7Be,QAD6B,CACpB,SADoB,EAE7BqO,GAF6B,EALsB;;AAAA;AAKhDC,YAAAA,iBALgD;AAQhDC,YAAAA,SARgD,GAQ/BD,iBAAiB,CACrCjQ,OADoB,GAEpBnB,GAFoB,CAEhB,UAACsR,eAAD;AAAA,qBAAqBA,eAAe,CAACZ,OAAhB,EAArB;AAAA,aAFgB,CAR+B;AAWtD5O,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,cADC;AAEPE,cAAAA,OAAO,EAAE;AAAE0R,gBAAAA,SAAS,EAATA;AAAF;AAFF,aAAD,CAAR;AAXsD;AAAA;;AAAA;AAAA;AAAA;AAgBhDtQ,YAAAA,MAhBgD,GAgBvCH,qBAAqB,eAAM,SAAN,CAhBkB;AAiBtDkB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,WADC;AAEPE,cAAAA,OAAO,EAAE;AACPoB,gBAAAA,MAAM,EAANA;AADO;AAFF,aAAD,CAAR;;AAjBsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AAAA,kBAApBkQ,oBAAoB;AAAA;AAAA;AAAA,GAA1B;AA0BP,AAAO,IAAMM,oBAAoB,GAAkB;AACjDxQ,EAAAA,MAAM,EAAE,EADyC;AAEjDsQ,EAAAA,SAAS,EAAE;AAFsC,CAA5C;AAKP,IAAM5R,IAAI,GAAyB,CACjC,WADiC,EAEjC,kBAFiC,EAGjC,cAHiC,CAAnC;;AAMA,IAAM+R,eAAe,GAAG,SAAlBA,eAAkB,CACtBpS,KADsB,EAEtB2F,OAFsB;AAAA,SAItB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTtF,IAHS,CAJW;AAAA,CAAxB;;ACpHO,IAAMgS,sBAAsB,GAAG;AACpCb,EAAAA,gBAAgB;AAAA,wFAAE;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADoB;AAIpCG,EAAAA,iBAAiB,EAAjBA,iBAJoC;AAKpCC,EAAAA,gBAAgB,EAAhBA;AALoC,CAA/B;AAQP,IAAMU,eAAe,gBAAGzM,aAAa,CAAiBwM,sBAAjB,CAArC;;ACfO,IAAME,4BAA4B,GAAG;AAC1CC,EAAAA,iBAAiB,EAAE;AACjB;AACD;AAHyC,CAArC;AAMP,IAAMC,qBAAqB,gBAAG5M,aAAa,CACzC0M,4BADyC,CAA3C;;ACNO,IAAMG,6BAA6B,GAAG,EAAtC;AAEP,IAAMC,sBAAsB,gBAAG9M,aAAa,CAC1C6M,6BAD0C,CAA5C;;ACaO,IAAME,aAAa,GAAmB,CAC3C,MAD2C,EAE3C,SAF2C,EAG3C,cAH2C,EAI3C,YAJ2C,EAK3C,WAL2C,EAM3C,QAN2C,EAO3C,QAP2C,EAQ3C,OAR2C,EAS3C,YAT2C,EAU3C,UAV2C,CAAtC;AAiCP,AAAO,IAAMC,mBAAmB,GAAiB;AAC/ClR,EAAAA,MAAM,EAAE;AADuC,CAA1C;AA+BP,AAAO,IAAMmR,gBAAgB,GAAqB,SAArCA,gBAAqC,CAACnR,MAAD,EAASe,QAAT;AAChDA,EAAAA,QAAQ,IACNA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,WADC;AAEPE,IAAAA,OAAO,EAAE;AACPoB,MAAAA,MAAM,EAANA;AADO;AAFF,GAAD,CADV;AAOD,CARM;AAUP,AAAO,IAAMoR,UAAU,GAAe,SAAzBA,UAAyB;;;MAAGC,cAAAA;MAAQ7Q,gBAAAA;MAAUO,gBAAAA;AACzDA,EAAAA,QAAQ,IACNA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,YADC;AAEPE,IAAAA,OAAO,gCACD4B,QADC,IACY6Q,MADZ;AAFA,GAAD,CADV;AAOD,CARM;AAgBP,AAAO,IAAMC,eAAe,GAAoB,SAAnCA,eAAmC,CAAChR,EAAD,EAAKE,QAAL,EAAeO,QAAf;;;AAC9CA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,iBADC;AAEPE,IAAAA,OAAO,6BACD4B,QADC,WACcF,EADd;AAFA,GAAD,CAAR;AAMD,CAPM;AASP,AAAO,IAAMiR,aAAa;AAAA,0EAAkB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAC1CvQ,YAAAA,MAD0C,SAC1CA,MAD0C,EAE1C2N,QAF0C,SAE1CA,QAF0C,EAG1ChN,KAH0C,SAG1CA,KAH0C,EAI1CtD,KAJ0C,SAI1CA,KAJ0C;AAOxCiK,YAAAA,sBAPwC,GAYtCjK,KAZsC,CAOxCiK,sBAPwC,EAQxCkJ,cARwC,GAYtCnT,KAZsC,CAQxCmT,cARwC,EASxCC,eATwC,GAYtCpT,KAZsC,CASxCoT,eATwC,EAUxCC,gBAVwC,GAYtCrT,KAZsC,CAUxCqT,gBAVwC,EAWxCC,iBAXwC,GAYtCtT,KAZsC,CAWxCsT,iBAXwC;AAAA;AAclCC,YAAAA,wBAdkC,GAcPjQ,KAdO,6CAcPA,KAAK,CAAE6P,cAAP,EAdO,qBAcP,sBAAyBK,SAdlB;AAelC1Q,YAAAA,eAfkC,GAec;AACpD2Q,cAAAA,sBAAsB,EAAEJ,gBAD4B;AAEpDK,cAAAA,uBAAuB,EAAEL;AAF2B,aAfd;;AAmBxC,gBAAIE,wBAAwB,KAAKF,gBAAjC,EAAmD;AACjDvQ,cAAAA,eAAe,CAAC2Q,sBAAhB,GAAyCnQ,KAAzC,8CAAyCA,KAAK,CAAE6P,cAAP,EAAzC,qBAAyC,uBAAyBlR,EAAlE;AACAa,cAAAA,eAAe,CAAC4Q,uBAAhB,GAA0CpQ,KAA1C,8CAA0CA,KAAK,CAAE6P,cAAP,EAA1C,qBAA0C,uBAAyBlR,EAAnE;AACD;;AAtBuC,kBAuBpC,CAACL,CAAC,CAAC+C,OAAF,CAAUwO,cAAV,CAAD,IAA8BA,cAvBM;AAAA;AAAA;AAAA;;AAwBtC,mBAAOrQ,eAAe,CAAC2Q,sBAAvB;AACA,mBAAO3Q,eAAe,CAAC4Q,uBAAvB;AACA5Q,YAAAA,eAAe,CAAC6Q,6BAAhB,GAAgD,IAAhD;AA1BsC;AAAA,mBA2BCnK,SAAO,CAACrG,eAAR,CACrCR,MADqC,EAErCS,MAFqC,CAE9B+P,cAF8B,CA3BD;;AAAA;AA2BtCrQ,YAAAA,eAAe,CAACqQ,cA3BsB;;AAAA;AAAA,iBA+BpClJ,sBA/BoC;AAAA;AAAA;AAAA;;AAgCtC,mBAAOnH,eAAe,CAAC6Q,6BAAvB;AACA,gBAAIL,iBAAJ,EACExQ,eAAe,CAAC4Q,uBAAhB,GAA0CJ,iBAA1C;;AAlCoC,kBAmClC,CAAC1R,CAAC,CAAC+C,OAAF,CAAUyO,eAAV,CAAD,IAA+BA,eAnCG;AAAA;AAAA;AAAA;;AAoCpC,mBAAOtQ,eAAe,CAAC4Q,uBAAvB;AApCoC;AAAA,mBAqCIlK,SAAO,CAACrG,eAAR,CACtCR,MADsC,EAEtCS,MAFsC,CAE/BgQ,eAF+B,CArCJ;;AAAA;AAqCpCtQ,YAAAA,eAAe,CAACsQ,eArCoB;;AAAA;AAAA,kBA0CpC9P,KAAK,IAAIgN,QAAT,IAAqB,CAAC1O,CAAC,CAAC+C,OAAF,CAAU7B,eAAV,CA1Cc;AAAA;AAAA;AAAA;;AAAA;AAAA,mBA2CtBI,KAAK,CAACC,eAAN,CAAsBR,MAAtB,EAA8BgB,IAA9B,CAAmCL,KAAK,CAACrB,EAAzC,CA3CsB;;AAAA;AA2ChCoB,YAAAA,CA3CgC;AAAA;AAAA,mBA4ChCA,CAAC,CAACF,eAAF,CAAkBR,MAAlB,EAA0B+O,MAA1B,CAAiC5O,eAAjC,CA5CgC;;AAAA;AAAA;AAAA,mBA6ChCwN,QAAQ,CAAChN,KAAK,CAACrB,EAAP,CA7CwB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAgDxC2N,YAAAA,OAAO,CAAC5N,KAAR;;AAhDwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA,kBAAbkR,aAAa;AAAA;AAAA;AAAA,GAAnB;AAoDP,IAAM7S,MAAI,GAAwB,CAChC,WADgC,EAEhC,YAFgC,EAGhC,2BAHgC,EAIhC,iBAJgC,CAAlC;;AAOA,IAAMuT,cAAc,GAAG,SAAjBA,cAAiB,CACrB5T,KADqB,EAErB2F,OAFqB;AAAA,SAIrB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTtF,MAHS,CAJU;AAAA,CAAvB;;ACtKO,IAAMwT,qBAAqB,GAAG;AACnCX,EAAAA,aAAa,EAAE;AACb;AACD,GAHkC;AAInCD,EAAAA,eAAe,EAAE;AACf;AACD,GANkC;AAOnCF,EAAAA,UAAU,EAAVA,UAPmC;AAQnCD,EAAAA,gBAAgB,EAAhBA;AARmC,CAA9B;AAWP,IAAMgB,gBAAgB,gBAAGjO,aAAa,CAAiBgO,qBAAjB,CAAtC;;ACZA,IAAMhU,WAAS,GAAGkH,UAAU,CAACyC,OAAX,CAAmB3J,SAArC;;AAWA,IAAM2J,OAAO,GAA6B,SAApCA,OAAoC,CAAC7J,KAAD;MAEtCJ,WAQEI,MARFJ;MACAsI,YAOElI,MAPFkI;8BAOElI,MANFoU;MAAAA,uDAAoB;8BAMlBpU,MALFqU;MAAAA,uDAAoB;MACpBC,WAIEtU,MAJFsU;yBAIEtU,MAHFsS;MAAAA,0CAAY;wBAGVtS,MAFFuU;MAAAA,wCAAW;MACR9D,kCACDzQ;;oBACoC0Q,UAAU,CAACiC,eAAD;MAA/B6B,+BAAXlC;;qBACgD5B,UAAU,CAChEoC,qBADgE;MAA1DD,iCAAAA;MAAmB4B,wCAAAA;;qBAG+B/D,UAAU,CAClEsC,sBADkE;MAA5D0B,kCAAAA;MAAoBC,yCAAAA;;qBASxBjE,UAAU,CAACkE,gBAAD;MALZtK,sCAAAA;MACAoJ,gCAAAA;MACAC,iCAAAA;;qBAIgBjD,UAAU,CAACzK,YAAD;MAApBtC,qBAAAA;;kBACwBkR,QAAQ,CAA4B,IAA5B;MAAjChM;MAAUiM;;AACjB,MAAMzO,KAAK,GAAG,CAACpE,CAAC,CAAC+C,OAAF,CAAUsN,SAAV,CAAD,GACVA,SADU,GAETkC,gBAAgB,IAAIA,gBAArB,IAA0C,EAF9C;AAGAO,EAAAA,SAAS,CAAC;AACR,QAAI1O,KAAK,IAAI,CAACkO,QAAd,EAAwB;AACtBlO,MAAAA,KAAK,CAACpF,GAAN,CAAU,UAAC0Q,OAAD,EAAUqD,CAAV;AACR,YAAIP,wBAAJ,EAA8B;AAC5B,cAAMQ,WAAW,GAAGtD,OAAO,CAACkC,SAAR,KAAsBY,wBAA1C;;AACA,cAAIQ,WAAW,IAAIpM,QAAQ,KAAK,IAAhC,EAAsC;AACpCiM,YAAAA,WAAW,CAACE,CAAD,CAAX;AACD;AACF;;AACD,YAAI,CAACtB,gBAAD,IAAqBsB,CAAC,KAAKnM,QAA/B,EAAyC;AACvCgK,UAAAA,iBAAiB,IACfA,iBAAiB,CAAClB,OAAO,CAACrP,EAAT,EAAa;AAC5B4S,YAAAA,iBAAiB,EAAEvD,OAAO,CAACuD;AADC,WAAb,CADnB;AAID;;AACD,YAAIP,yBAAJ,EAA+B;AAC7B,cAAMM,YAAW,GAAGtD,OAAO,CAACkC,SAAR,KAAsBc,yBAA1C;;AACAM,UAAAA,YAAW,IAAIpM,QAAQ,KAAK,IAA5B,IAAoCiM,WAAW,CAACE,CAAD,CAA/C;AACD;;AACD,YAAI,CAACrB,iBAAD,IAAsBqB,CAAC,KAAKnM,QAAhC,EAA0C;AACxC6L,UAAAA,kBAAkB,IAChBA,kBAAkB,CAAC/C,OAAO,CAACrP,EAAT,EAAa;AAC7B4S,YAAAA,iBAAiB,EAAEvD,OAAO,CAACuD;AADE,WAAb,CADpB;AAID;AACF,OAvBD;AAwBD;;AACD,QAAIX,QAAJ,EAAc;AACZ,UAAMY,kBAAkB;AAAA,kEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,gCACzBtC,iBADyB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBACGA,iBAAiB,CAAC,EAAD,CADpB;;AAAA;AAAA,gCAEzB6B,kBAFyB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAEIA,kBAAkB,CAAC,EAAD,CAFtB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAH;;AAAA,wBAAlBS,kBAAkB;AAAA;AAAA;AAAA,SAAxB;;AAIAA,MAAAA,kBAAkB;AACnB;AACF,GAlCQ,EAkCN,CACDZ,QADC,EAEDE,wBAFC,EAGDE,yBAHC,EAIDH,gBAJC,EAKDlK,sBALC,CAlCM,CAAT;;AAyCA,MAAM8K,YAAY;AAAA,+DAAG,kBACnBJ,CADmB,EAEnBK,SAFmB,EAGnBH,iBAHmB,EAInB/K,QAJmB;AAAA;AAAA;AAAA;AAAA;AAMnB,eAACA,QAAD,IAAa2K,WAAW,CAACE,CAAD,CAAxB;AANmB,6BAOnBnC,iBAPmB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAQVA,iBAAiB,CAACwC,SAAD,EAAY;AAAEH,gBAAAA,iBAAiB,EAAjBA;AAAF,eAAZ,CARP;;AAAA;AAAA,6BASnB,CAAC/K,QAAD,IACEuK,kBAViB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAWVA,kBAAkB,CAACW,SAAD,EAAY;AAAEH,gBAAAA,iBAAiB,EAAjBA;AAAF,eAAZ,CAXR;;AAAA;AAYnBZ,cAAAA,QAAQ,IAAIA,QAAQ,EAApB;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZc,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAcA,MAAMhO,UAAU,GAAGf,KAAK,CAACpF,GAAN,CAAU,UAAC0Q,OAAD,EAAUqD,CAAV;AAC3B,QAAMM,YAAY,GAAG;AACnB3D,MAAAA,OAAO,EAAPA;AADmB,KAArB;AAGA,QAAM4D,WAAW,GAAG5R,KAAH,oBAAGA,KAAK,CAAE6R,uBAA3B;AACA,QAAMrL,QAAQ,GACXuK,kBAAkB,IACjBa,WADD,IAECA,WAAW,KAAK5D,OAAO,CAAC8D,WAF1B,IAGA,KAJF;AAKA,QAAMC,aAAa,GAAGnB,QAAQ,GAAG,EAAH,GAAQH,iBAAtC;AACA,QAAMuB,oBAAoB,GACxB9M,QAAQ,KAAKmM,CAAb,GAAoB9M,SAApB,SAAiCwN,aAAjC,GAAmDxN,SADrD;AAEA,QAAMgN,iBAAiB,GAAW,CAAAvD,OAAO,QAAP,YAAAA,OAAO,CAAEuD,iBAAT,KAA8B,EAAhE;AACA,QAAMU,cAAc,GAAGzL,QAAQ,GACxBjC,SADwB,SACXmM,iBADW,GAE3BsB,oBAFJ;AAGA,wBACE,oBAAC,sBAAD,CAAwB,QAAxB;AAAiC,MAAA,GAAG,EAAEX,CAAtC;AAAyC,MAAA,KAAK,EAAEM;AAAhD,oBACE;AACE,MAAA,SAAS,EAAEM,cADb;AAEE,MAAA,OAAO,EAAE;AAAA,eACPR,YAAY,CAACJ,CAAD,EAAIrD,OAAO,CAACrP,EAAZ,EAAgB4S,iBAAhB,EAAmC/K,QAAnC,CADL;AAAA,OAFX;AAKE,uBAAeA;AALjB,OAMMsG,CANN,GAQG7Q,QARH,CADF,CADF;AAcD,GA/BkB,CAAnB;AAgCA,sBAAO,oBAAC,QAAD,QAAWwH,UAAX,CAAP;AACD,CAtHD;;AAwHAyC,OAAO,CAAC3J,SAAR,GAAoBA,WAApB;;AC9IA,IAAM2V,UAAU,GAAmD,SAA7DA,UAA6D,CACjE7V,KADiE,EAEjE8V,GAFiE;uBAU7D9V,MALFkF;MAAAA,sCAAU;MACVtF,WAIEI,MAJFJ;2BAIEI,MAHF+I;MAAAA,8CAAc;AAAEJ,IAAAA,KAAK,EAAE,kBAAT;AAA6B/C,IAAAA,KAAK,EAAE;AAApC;qBAGZ5F,MAFF4F;MAAAA,kCAAQ;MACL6K,kCACDzQ;;AACJ,MAAIiC,CAAC,CAAC8T,SAAF,CAAY7Q,OAAZ,EAAqB6D,WAArB,MAAsC,CAAC,CAA3C,EAA8C;AAC5C7D,IAAAA,OAAO,CAAC8Q,OAAR,CAAgBjN,WAAhB;AACD,GAFD,MAEO;AACL7D,IAAAA,OAAO,CAAC,CAAD,CAAP,GAAa6D,WAAb;AACD;;AACD,MAAMkN,OAAO,GAAG/Q,OAAO,CAACjE,GAAR,CAAY,UAACyC,CAAD,EAAIsR,CAAJ;QAClBrM,QAAqBjF,EAArBiF;QAAUrE,uCAAWZ;;AAC7B,wBACE;AAAQ,MAAA,GAAG,EAAEsR;AAAb,OAAoB1Q,MAApB,GACGqE,KADH,CADF;AAKD,GAPe,CAAhB;;AAQA,MAAM8I,WAAW;AACfvM,IAAAA,OAAO,EAAPA,OADe;AAEf4Q,IAAAA,GAAG,EAAHA;AAFe,KAGZrF,CAHY,CAAjB;;AAKA,SAAO7Q,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAQ,IAAA,GAAG,EAAEkW,GAAb;AAAkB,IAAA,YAAY,EAAElQ;AAAhC,KAA2C6K,CAA3C,GACGwF,OADH,CAHF;AAOD,CApCD;;AAsCA,gCAAeC,KAAK,CAACC,UAAN,CAAiBN,UAAjB,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCA,IAAMO,yBAAyB,gBAAGlQ,aAAa,CAAiB,EAAjB,CAA/C;;ACAA,IAAMmQ,0BAA0B,gBAAGnQ,aAAa,CAAiB,EAAjB,CAAhD;;ACJA,IAAMhG,WAAS,GAAGkH,UAAU,CAAC0C,sBAAX,CAAkC5J,SAApD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC0C,sBAAX,CAAkCE,YAAvD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC0C,sBAAX,CAAkCrC,WAAtD;;AAUA,IAAMqC,sBAAsB,GAAmD,SAAzEA,sBAAyE,CAC7E9J,KAD6E;wBAGpCA,MAAjC+J;MAAAA,wCAAW;MAAMnE,QAAgB5F,MAAhB4F;MAAOnB,OAASzE,MAATyE;AAChC,MAAM+O,cAAc,GAAG9C,UAAU,CAAC0F,yBAAD,CAAjC;AACA,MAAM3C,eAAe,GAAG/C,UAAU,CAAC2F,0BAAD,CAAlC;AACAtB,EAAAA,SAAS,CAAC;AACR,QAAInP,KAAK,IAAI4N,cAAJ,YAAIA,cAAc,CAAE8C,QAA7B,EAAuC;AACrC9C,MAAAA,cAAc,CAAC8C,QAAf,CAAwB7R,IAAxB,EAA8BmB,KAA9B;AACD;;AACD,QAAIA,KAAK,IAAI6N,eAAJ,YAAIA,eAAe,CAAE6C,QAA9B,EAAwC;AACtC7C,MAAAA,eAAe,CAAC6C,QAAhB,CAAyB7R,IAAzB,EAA+BmB,KAA/B;AACD;AACF,GAPQ,EAON,CAACA,KAAD,CAPM,CAAT;AAQA,sBACE,oBAACiQ,YAAD;AACE,IAAA,GAAG,EAAE,CAAArC,cAAc,QAAd,YAAAA,cAAc,CAAE+C,UAAhB,MAA8B9C,eAA9B,oBAA8BA,eAAe,CAAE8C,UAA/C,CADP;AAEE,IAAA,QAAQ,EAAExM,QAFZ;AAGE,IAAA,OAAO,EAAEyM;AAHX,KAIMxW,KAJN,EADF;AAQD,CAtBD;;AAwBA8J,sBAAsB,CAAC5J,SAAvB,GAAmCA,WAAnC;AACA4J,sBAAsB,CAACE,YAAvB,GAAsCA,cAAtC;AACAF,sBAAsB,CAACrC,WAAvB,GAAqCA,aAArC;;ACvCA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC6C,YAAX,CAAwB/J,SAA1C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC6C,YAAX,CAAwBxC,WAA5C;;AASA,IAAMwC,YAAY,GAAyC,SAArDA,YAAqD,CAACjK,KAAD;MACjDyE,OAASzE,MAATyE;;oBACYiM,UAAU,CAACkB,sBAAD;MAAtBD,sBAAAA;;AACR,MAAM8E,GAAG,GAAGxU,CAAC,CAACyU,SAAF,CAAYjS,IAAZ,CAAZ;;AACA,MAAMkS,IAAI,GAAG1U,CAAC,CAAC2U,GAAF,CAAMjF,OAAN,EAAe8E,GAAf,CAAb;;AACA,MAAMhF,WAAW,gBACZzR,KADY,CAAjB;;AAGA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,yBAAOI,KAAP,EAAe2W,IAAf,CAHF;AAKD,CAbD;;AAeA1M,YAAY,CAAC/J,SAAb,GAAyBA,WAAzB;AACA+J,YAAY,CAACxC,WAAb,GAA2BA,aAA3B;;ACzBA,IAAMoP,SAAS,GAAkD,SAA3DA,SAA2D,CAC/D7W,KAD+D,EAE/D8V,GAF+D;MAIvDlW,WAAmBI,MAAnBJ;MAAa6Q,kCAAMzQ;;AAC3B,MAAM8W,KAAK,GACT9W,KAAK,CAACU,IAAN,KAAe,UAAf,gBACE;AAAU,IAAA,GAAG,EAAEoV;AAAf,KAAwBrF,CAAxB,EADF,gBAGE;AAAO,IAAA,GAAG,EAAEqF;AAAZ,KAAqBrF,CAArB,EAJJ;AAMA,SAAO7Q,QAAQ,gBAAG,oBAAC,MAAD,EAAY6Q,CAAZ,EAAgB7Q,QAAhB,CAAH,GAAwCkX,KAAvD;AACD,CAZD;;AAcA,+BAAeZ,KAAK,CAACC,UAAN,CAAiBU,SAAjB,CAAf;;ACfA,IAAM3W,WAAS,GAAGkH,UAAU,CAAC8C,YAAX,CAAwBhK,SAA1C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC8C,YAAX,CAAwBzC,WAA5C;;AAQA,IAAMyC,YAAY,GAAyC,SAArDA,YAAqD,CAAClK,KAAD;2BACLA,MAA5C+I;MAAAA,8CAAc;MAAIgB,WAA0B/J,MAA1B+J;MAAUnE,QAAgB5F,MAAhB4F;MAAU6K,kCAAMzQ;;AACpD,MAAMwT,cAAc,GAAG9C,UAAU,CAAC0F,yBAAD,CAAjC;AACA,MAAM3C,eAAe,GAAG/C,UAAU,CAAC2F,0BAAD,CAAlC;AACAtB,EAAAA,SAAS,CAAC;AACR,QAAInP,KAAK,IAAI4N,cAAJ,YAAIA,cAAc,CAAE8C,QAA7B,EAAuC;AACrC9C,MAAAA,cAAc,CAAC8C,QAAf,CAAwB7F,CAAC,CAAChM,IAA1B,EAAgCmB,KAAhC;AACD;;AACD,QAAIA,KAAK,IAAI6N,eAAJ,YAAIA,eAAe,CAAE6C,QAA9B,EAAwC;AACtC7C,MAAAA,eAAe,CAAC6C,QAAhB,CAAyB7F,CAAC,CAAChM,IAA3B,EAAiCmB,KAAjC;AACD;AACF,GAPQ,EAON,CAACA,KAAD,CAPM,CAAT;AAQA,sBACE,oBAACiR,WAAD;AACE,IAAA,GAAG,EAAE,CAAArD,cAAc,QAAd,YAAAA,cAAc,CAAE+C,UAAhB,MAA8B9C,eAA9B,oBAA8BA,eAAe,CAAE8C,UAA/C,CADP;AAEE,IAAA,QAAQ,EAAExM,QAAQ,KAAK5J,SAAb,GAAyB4J,QAAzB,GAAoC,IAFhD;AAGE,IAAA,WAAW,EAAEhB,WAHf;AAIE,IAAA,YAAY,EAAEnD;AAJhB,KAKM6K,CALN,EADF;AASD,CArBD;;AAuBAvG,YAAY,CAAChK,SAAb,GAAyBA,WAAzB;AACAgK,YAAY,CAACzC,WAAb,GAA2BA,aAA3B;;AChCA,IAAMiK,SAAO,GAAwB;AACnC3G,EAAAA,WAAW,EAAE,EADsB;AAEnCC,EAAAA,QAAQ,EAAE,EAFyB;AAGnC+L,EAAAA,KAAK,EAAE;AAH4B,CAArC;AAMA,IAAMC,oBAAoB,gBAAG9Q,aAAa,CAACwL,SAAD,CAA1C;;ACQA,IAAMxR,WAAS,GAAGkH,UAAU,CAACiD,kBAAX,CAA8BnK,SAAhD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACiD,kBAAX,CAA8B5C,WAAlD;;AAMA,IAAM4C,kBAAkB,GAA0C,SAA5DA,kBAA4D,CAACrK,KAAD;MACxDJ,WAA6CI,MAA7CJ;8BAA6CI,MAAnCsK;MAAAA,4DAAyB;;oBACjB2M,UAAU,CAAChD,cAAD,EAAiBf,mBAAjB;MAA7B7S;MAAO0C;;oBACuB2N,UAAU,CAACzK,YAAD;MAAvCtC,oBAAAA;MAAON,sBAAAA;MAASsN,uBAAAA;;AACxB,MAAM3N,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;AACAjC,EAAAA,SAAS,CAAC;AACRhS,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,2BADC;AAEPE,MAAAA,OAAO,EAAE;AACP0J,QAAAA,sBAAsB,EAAtBA;AADO;AAFF,KAAD,CAAR;AAMD,GAPQ,EAON,CAACA,sBAAD,CAPM,CAAT;;AAQA,MAAM4M,YAAY,gBACb7W,KADa;AAEhB8S,IAAAA,gBAAgB,EAAE,0BAACnR,MAAD;AAAA,aAChBkS,qBAAqB,CAAC,kBAAD,CAArB,CAA0ClS,MAA1C,EAAkDe,QAAlD,CADgB;AAAA,KAFF;AAIhBqQ,IAAAA,UAAU,EAAE,oBAACvQ,MAAD;AAAA,aACVqR,qBAAqB,CAAC,YAAD,CAArB,cAAyCrR,MAAzC;AAAiDE,QAAAA,QAAQ,EAARA;AAAjD,SADU;AAAA,KAJI;AAMhBwQ,IAAAA,aAAa;AAAA,2EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACPA,aAAa,CAAC;AAClBvQ,kBAAAA,MAAM,EAANA,MADkB;AAElBD,kBAAAA,QAAQ,EAARA,QAFkB;AAGlB4N,kBAAAA,QAAQ,EAARA,QAHkB;AAIlBhN,kBAAAA,KAAK,EAALA,KAJkB;AAKlBN,kBAAAA,OAAO,EAAPA,OALkB;AAMlBhD,kBAAAA,KAAK,EAALA;AANkB,iBAAD,CADN;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,OANG;AAehBiT,IAAAA,eAAe,EAAE,2BACfhR,EADe,EAEfE,QAFe;AAAA,aAGN8Q,eAAe,CAAChR,EAAD,EAAKE,QAAL,EAAeO,QAAf,CAHT;AAAA;AAfD,IAAlB;;AAoBA,sBACE,oBAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAEmU;AAAlC,KACGtX,QADH,CADF;AAKD,CAtCD;;AAwCAyK,kBAAkB,CAACnK,SAAnB,GAA+BA,WAA/B;AACAmK,kBAAkB,CAAC5C,WAAnB,GAAiCA,aAAjC;;ACjCO,IAAM0P,wBAAwB,GAAsB;AACzD9S,EAAAA,QAAQ,EAAE,IAD+C;AAEzD0J,EAAAA,GAAG,EAAE;AACHqJ,IAAAA,IAAI,EAAE,CADH;AAEHC,IAAAA,KAAK,EAAE;AAFJ,GAFoD;AAMzDvK,EAAAA,GAAG,EAAE;AACHsK,IAAAA,IAAI,EAAE,CADH;AAEHC,IAAAA,KAAK,EAAE;AAFJ,GANoD;AAUzDrV,EAAAA,MAAM,EAAE;AAViD,CAApD;AAqBP,AAAO,IAAMsV,eAAe;AAAA,0EAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9CnT,YAAAA,OAD8C,QAC9CA,OAD8C,EAE9CpB,QAF8C,QAE9CA,QAF8C,EAG9CC,MAH8C,QAG9CA,MAH8C;AAAA;AAAA,mBAK5B6B,GAAG,CAACrB,eAAJ,CAAoBR,MAApB,EACf4M,MADe,CACR,IADQ,EAEf2H,KAFe,CAET;AAAEC,cAAAA,MAAM,EAAErT;AAAV,aAFS,EAGfuC,KAHe,EAL4B;;AAAA;AAKxCsJ,YAAAA,GALwC;AAAA;AAAA,mBASnBnL,GAAG,CAACrB,eAAJ,CAAoBR,MAApB,EACxB4M,MADwB,CACjB,WADiB,EAExB5L,IAFwB,CAEnBgM,GAAG,CAAC1N,EAFe,CATmB;;AAAA;AASxCmV,YAAAA,YATwC;AAYxCC,YAAAA,UAZwC,GAY3BzV,CAAC,CAACyE,KAAF,CAAQ+Q,YAAR,6CAAQA,YAAY,CAAEE,SAAtB,qBAAQ,sBAAyBC,MAAjC,CAZ2B;AAaxCC,YAAAA,aAbwC,GAaxB5V,CAAC,CAACyE,KAAF,CAAQgR,UAAR,oBAAQA,UAAU,CAAEI,iBAApB,CAbwB;AAc9C/U,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,iBADC;AAEPE,cAAAA,OAAO,eAAOiX,aAAP;AAAsBxT,gBAAAA,QAAQ,EAAEqT,UAAF,oBAAEA,UAAU,CAAErT;AAA5C;AAFA,aAAD,CAAR;;AAd8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAAA,kBAAfiT,eAAe;AAAA;AAAA;AAAA,GAArB;AAsBP,IAAMS,UAAU,GAA6B,CAAC,iBAAD,EAAoB,WAApB,CAA7C;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAC1B3X,KAD0B,EAE1B2F,OAF0B;AAAA,SAI1B5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGT+R,UAHS,CAJe;AAAA,CAA5B;;AC/EA,IAAME,mBAAmB,gBAAG/R,aAAa,CAACiR,wBAAD,CAAzC;;ACeA,IAAMjX,WAAS,GAAGkH,UAAU,CAACmD,qBAAX,CAAiCrK,SAAnD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACmD,qBAAX,CAAiC9C,WAArD;;AAOA,IAAM8C,qBAAqB,GAAkD,SAAvEA,qBAAuE,CAC3EvK,KAD2E;MAGnEJ,WAAsBI,MAAtBJ;MAAUuE,UAAYnE,MAAZmE;;oBACqBuM,UAAU,CAAClK,WAAD;MAAzCJ,mBAAAA;MAAeyK,0BAAT1M;;AACd,MAAMnB,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAC0BC,UAAU,CAClCe,mBADkC,EAElCb,wBAFkC;MAA7B9W;MAAO0C;;AAIdgS,EAAAA,SAAS,CAAC;AACR,QAAMjE,KAAK,GAAG3M,OAAO,IAAIsC,iBAAiB,CAACL,IAAD,CAA5B,IAAsCyK,WAApD;;AACA,QAAIC,KAAJ,EAAW;AAAA;;AACT,UAAM4G,UAAU,GAAGzV,CAAC,CAACyE,KAAF,gBAAQN,IAAI,CAAC0K,KAAD,CAAZ,8CAAQ,YAAa6G,SAArB,qBAAQ,sBAAwBC,MAAhC,KAA2C;AAC5DvT,QAAAA,QAAQ,EAAE,IADkD;AAE5DyT,QAAAA,iBAAiB,EAAE;AAFyC,OAA9D;;AAIA,UAAI,CAAC7V,CAAC,CAAC+C,OAAF,CAAU0S,UAAV,CAAD,IAA0BA,UAAU,CAACI,iBAAX,CAA6BnW,MAA7B,GAAsC,CAApE,EAAuE;AACrE,YAAMkW,aAAa,GAAG5V,CAAC,CAACyE,KAAF,CAAQgR,UAAU,CAACI,iBAAnB,CAAtB;;AACA/U,QAAAA,QAAQ,CAAC;AACPrC,UAAAA,IAAI,EAAE,iBADC;AAEPE,UAAAA,OAAO,eAAOiX,aAAP;AAAsBxT,YAAAA,QAAQ,EAAEqT,UAAF,oBAAEA,UAAU,CAAErT;AAA5C;AAFA,SAAD,CAAR;AAID,OAND,MAMO,IAAIrB,MAAM,CAAC+H,WAAX,EAAwB;AAC7BuM,QAAAA,eAAe,CAAC;AAAEnT,UAAAA,OAAO,EAAE2M,KAAX;AAAkB9N,UAAAA,MAAM,EAANA,MAAlB;AAA0BD,UAAAA,QAAQ,EAARA;AAA1B,SAAD,CAAf;AACD;AACF;;AACD,WAAO;AACLA,MAAAA,QAAQ,CAAC;AACPrC,QAAAA,IAAI,EAAE,iBADC;AAEPE,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAID,KALD;AAMD,GAvBQ,EAuBN,CAACoC,MAAM,CAAC+H,WAAR,EAAqB3E,IAArB,EAA2ByK,WAA3B,CAvBM,CAAT;AAwBA,sBACE,oBAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,eAAOxQ,KAAP;AAAnC,KACGT,QADH,CADF;AAKD,CAvCD;;AAyCA2K,qBAAqB,CAACrK,SAAtB,GAAkCA,WAAlC;AACAqK,qBAAqB,CAAC9C,WAAtB,GAAoCA,aAApC;;AC5DA,IAAMvH,WAAS,GAAGkH,UAAU,CAACoD,oBAAX,CAAgCtK,SAAlD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACoD,oBAAX,CAClBR,YADH;AAEA,IAAMvC,aAAW,GAAGL,UAAU,CAACoD,oBAAX,CAAgC/C,WAApD;;AAgBA,IAAM+C,oBAAoB,GAAiD,SAArEA,oBAAqE,CACzExK,KADyE;MAGjEyK,aAAuDzK,MAAvDyK;MAAYC,yBAA2C1K,MAA3C0K;MAAwB9K,WAAmBI,MAAnBJ;MAAa6Q,kCAAMzQ;;oBAChB0Q,UAAU,CAACuH,mBAAD;MAAjDlK,kBAAAA;MAAKjB,kBAAAA;MAAKoL,6BAAAA;MAAgB7T,uBAAAA;;AAClC,MAAM8T,EAAE,GAAG,CAAClW,CAAC,CAAC+C,OAAF,CAAU+I,GAAV,CAAD,GAAkBA,GAAG,MAAItD,UAAJ,CAArB,GAAyC,EAApD;AACA,MAAM2N,EAAE,GAAG,CAACnW,CAAC,CAAC+C,OAAF,CAAU8H,GAAV,CAAD,GAAkBA,GAAG,MAAIrC,UAAJ,CAArB,GAAyC,EAApD;AACA,MAAMkM,IAAI,GAAa,EAAvB;AACA,MAAMlS,IAAI,GACRiG,sBAAsB,IAAIwN,cAA1B,aACYA,cAAc,CAACzT,IAD3B,GAEI,EAHN;;AAIA,MAAIJ,QAAQ,IAAIA,QAAQ,GAAG,CAA3B,EAA8B;AAC5BsS,IAAAA,IAAI,CAAC/U,IAAL,CAAU,WAAV;;AACA,QAAIuW,EAAE,IAAIC,EAAV,EAAc;AACZzB,MAAAA,IAAI,CAAC/U,IAAL,SAAgBuW,EAAhB,WAAwBC,EAAxB,SAA8B3N,UAA9B,SAA4ChG,IAA5C;AACD;AACF,GALD,MAKO,IAAIJ,QAAQ,KAAK,CAAjB,EAAoB;AACzBsS,IAAAA,IAAI,CAAC/U,IAAL,CAAU,cAAV;AACD;;AACD,MAAM6P,WAAW;AACf1D,IAAAA,GAAG,EAAHA,GADe;AAEfjB,IAAAA,GAAG,EAAHA,GAFe;AAGfoL,IAAAA,cAAc,EAAdA,cAHe;AAIf7T,IAAAA,QAAQ,EAARA;AAJe,KAKZrE,KALY,CAAjB;;AAOA,SAAOJ,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb,yBAAO6Q,CAAP,EAAWkG,IAAI,CAACpP,IAAL,CAAU,GAAV,CAAX,CAHF;AAKD,CAhCD;;AAkCAiD,oBAAoB,CAACtK,SAArB,GAAiCA,WAAjC;AACAsK,oBAAoB,CAACR,YAArB,GAAoCA,cAApC;AACAQ,oBAAoB,CAAC/C,WAArB,GAAmCA,aAAnC;;ACzCO,IAAM4Q,0BAA0B,GAAwB;AAC7DvE,EAAAA,sBAAsB,EAAE;AADqC,CAAxD;AAgBP,AAAO,IAAMjB,iBAAiB;AAAA,yEAAsB,iBAAOvQ,EAAP,EAAW4C,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,kBAE5CA,OAF4C,YAE5CA,OAAO,CAAEvB,KAFmC;AAAA;AAAA;AAAA;;AAAA,iBAG1CuB,OAAO,CAACgQ,iBAHkC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAItBrL,SAAO,CAACrG,eAAR,CAAwB0B,OAAO,CAAClC,MAAhC,EAAwCgB,IAAxC,CAA6C1B,EAA7C,CAJsB;;AAAA;AAItCqP,YAAAA,OAJsC;;AAAA,kBAKxCA,OAAO,CAACkC,SAAR,KAAsB3O,OAAO,CAACgQ,iBALU;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMpCvD,OAAO,CAACnO,eAAR,CAAwB0B,OAAO,CAAClC,MAAhC,EAAwC+O,MAAxC,CAA+C;AACnD8B,cAAAA,SAAS,EAAE3O,OAAO,CAACgQ;AADgC,aAA/C,CANoC;;AAAA;AAW9ChQ,YAAAA,OAAO,CAACnC,QAAR,CAAiB;AACfrC,cAAAA,IAAI,EAAE,mBADS;AAEfE,cAAAA,OAAO,EAAE;AACPkT,gBAAAA,sBAAsB,EAAExR;AADjB;AAFM,aAAjB;;AAX8C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmBhD2N,YAAAA,OAAO,CAAC5N,KAAR;;AAnBgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAAA,kBAAjBwQ,iBAAiB;AAAA;AAAA;AAAA,GAAvB;AA4BP,AAAO,IAAMyF,2BAA2B,GAAgC,SAA3DA,2BAA2D;MACtEpD,0BAAAA;MACAnS,iBAAAA;AAEAA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,6BADC;AAEPE,IAAAA,OAAO,EAAE;AAAE6T,MAAAA,wBAAwB,EAAES;AAA5B;AAFF,GAAD,CAAR;AAID,CARM;AAUP,IAAMxU,MAAI,GAA+B,CACvC,mBADuC,EAEvC,6BAFuC,CAAzC;;AAKA,IAAM6X,qBAAqB,GAAG,SAAxBA,qBAAwB,CAC5BlY,KAD4B,EAE5B2F,OAF4B;AAAA,SAI5B5F,WAAW,CAITC,KAJS,EAIF2F,OAJE,EAIOtF,MAJP,CAJiB;AAAA,CAA9B;;AC/DA,IAAMR,WAAS,GAAGkH,UAAU,CAACuD,uBAAX,CAAmCzK,SAArD;;AAKA,IAAMyK,uBAAuB,GAA6B,SAApDA,uBAAoD,CAAC3K,KAAD;MAChDJ,WAAaI,MAAbJ;;oBACkBqX,UAAU,CAClCsB,qBADkC,EAElCF,0BAFkC;MAA7BhY;MAAO0C;;AAId,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAC4BtG,UAAU,CAACzK,YAAD;MAA9BtC,oBAAAA;MAAOgN,uBAAAA;;qBACqCD,UAAU,CAACkE,gBAAD;MAAtDtK,sCAAAA;MAAwBgJ,+BAAAA;;AAChCyB,EAAAA,SAAS,CAAC;AACR,QAAIpR,KAAJ,EAAW;AAAA;;AACT,UAAMuR,iBAAiB,GAAG,0BAAAvR,KAAK,CAAC6P,cAAN,6CAAwBK,SAAxB,KAAqC,EAA/D;AACAyE,MAAAA,2BAA2B,CAAC;AAC1BpD,QAAAA,iBAAiB,EAAjBA,iBAD0B;AAE1BnS,QAAAA,QAAQ,EAARA;AAF0B,OAAD,CAA3B;AAIAuQ,MAAAA,eAAe,CAAC4B,iBAAD,EAAoB,gBAApB,CAAf;AACD;AACF,GATQ,EASN,CAACvR,KAAD,CATM,CAAT;;AAUA,MAAMuT,YAAY,gBACb7W,KADa;AAEhBwS,IAAAA,iBAAiB;AAAA,+EAAE,iBACjBvQ,EADiB,EAEjB4C,OAFiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIX2N,iBAAiB,CAACvQ,EAAD,EAAK;AAC1BU,kBAAAA,MAAM,EAANA,MAD0B;AAE1BD,kBAAAA,QAAQ,EAARA,QAF0B;AAG1BY,kBAAAA,KAAK,EAALA,KAH0B;AAI1BgN,kBAAAA,QAAQ,EAARA,QAJ0B;AAK1BrG,kBAAAA,sBAAsB,EAAtBA,sBAL0B;AAM1B4K,kBAAAA,iBAAiB,EAAEhQ,OAAF,oBAAEA,OAAO,CAAEgQ;AANF,iBAAL,CAJN;;AAAA;AAYjB5B,gBAAAA,eAAe,CAAChR,EAAD,EAAK,gBAAL,CAAf;;AAZiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAFD,IAAlB;;AAiBA,sBACE,oBAAC,qBAAD,CAAuB,QAAvB;AAAgC,IAAA,KAAK,EAAE4U;AAAvC,KACGtX,QADH,CADF;AAKD,CAzCD;;AA2CA+K,uBAAuB,CAACzK,SAAxB,GAAoCA,WAApC;;ACjDA,IAAMA,WAAS,GAAGkH,UAAU,CAACwD,kBAAX,CAA8B1K,SAAhD;;AAOA,IAAM0K,kBAAkB,GAA+C,SAAjEA,kBAAiE,CACrE5K,KADqE;MAG7DJ,WAAuDI,MAAvDJ;4BAAuDI,MAA7CwY;MAAAA,gDAAe;qBAA8BxY,MAAxByY;MAAAA,kCAAQ;MAAUhI,kCAAMzQ;;sBACN0Y,YAAY;MAA7DnC,2BAAAA;MAAYlD,uBAAAA;MAAQrR,uBAAAA;MAAe2W,0BAAPF;;oBACK/H,UAAU,CAACyD,gBAAD;MAA3ChB,+BAAAA;MAAkBC,yBAAAA;;qBACY1C,UAAU,CAACzK,YAAD;MAAxCN,yCAAAA;;AACR,MAAMmQ,GAAG,GAAG8C,MAAM,CAAkB,IAAlB,CAAlB;AACA7D,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtB,UAAM6W,UAAU,GAAgB,EAAhC;;AACA,WAAK,IAAMC,SAAX,IAAwB9W,MAAxB,EAAgC;AAAA,gCACJA,MAAM,CAAC8W,SAAD,CADF;AAAA,YACtB/X,IADsB,qBACtBA,IADsB;AAAA,YAChB0B,OADgB,qBAChBA,OADgB;AAE9BoW,QAAAA,UAAU,CAACjX,IAAX,CAAgB;AACdb,UAAAA,IAAI,EAAEA,IADQ;AAEd0B,UAAAA,OAAO,EAAPA,OAFc;AAGdD,UAAAA,QAAQ,EAAE,gBAHI;AAIdD,UAAAA,KAAK,EAAEuW;AAJO,SAAhB;AAMD;;AACD,OAAC7W,CAAC,CAAC+C,OAAF,CAAU6T,UAAV,CAAD,IAA0B1F,gBAAgB,CAAC0F,UAAD,CAA1C;AACD,KAZD,MAYO,IAAI,CAAC5W,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CAAL,EAAwB;AAC7BF,MAAAA,gBAAgB,CAAC,EAAD,CAAhB;;AACA,WAAK,IAAM1O,IAAX,IAAmB4O,MAAnB,EAA2B;AACzB,YAAM9Q,KAAK,GAAG8Q,MAAM,CAAC5O,IAAD,CAApB;;AACA,YAAIlC,KAAJ,YAAIA,KAAK,CAAEqD,KAAX,EAAkB;AAChByN,UAAAA,MAAM,CAAC5O,IAAI,CAACuC,OAAL,CAAa,kBAAb,EAAiC,EAAjC,CAAD,CAAN,GAA+CzE,KAAK,CAACqD,KAArD;AACA,iBAAOyN,MAAM,CAAC5O,IAAD,CAAb;AACD;;AACD,YAAI,CAAAlC,KAAK,QAAL,YAAAA,KAAK,CAAE7B,IAAP,MAAgB,UAApB,EAAgC;AAC9B,iBAAO2S,MAAM,CAAC5O,IAAD,CAAb;AACAkB,UAAAA,yBAAyB,CAAC,gBAAD,EAAmBpD,KAAK,CAACwW,OAAzB,CAAzB;AACD;AACF;;AACD3F,MAAAA,UAAU,CAAC;AAAEC,QAAAA,MAAM,EAANA,MAAF;AAAU7Q,QAAAA,QAAQ,EAAE;AAApB,OAAD,CAAV;AACD;;AACD,QAAIiW,KAAK,KAAK,CAACxW,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CAAD,IAAsB,CAACpR,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAA5B,CAAT,EAAyD;AACvD2D,MAAAA,yBAAyB,IACvBA,yBAAyB,CAAC,gBAAD,EAAmB,KAAnB,CAD3B;;AAEA,UAAImQ,GAAJ,EAAS;AAAA;;AACP;AACA,wBAAAA,GAAG,CAACkD,OAAJ,kCAAaP,KAAb;AACAE,QAAAA,SAAS,CAAC;AAAEM,UAAAA,MAAM,EAAEnD,GAAG,CAACkD;AAAd,SAAD,CAAT;AACA7F,QAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAC,QAAAA,UAAU,CAAC;AAAEC,UAAAA,MAAM,EAAE,EAAV;AAAc7Q,UAAAA,QAAQ,EAAE;AAAxB,SAAD,CAAV;AACD;AACF;AACF,GAvCQ,EAuCN,CAACR,MAAD,EAASqR,MAAT,EAAiBoF,KAAjB,CAvCM,CAAT;;AAwCA,MAAMnC,QAAQ,GAAG,SAAXA,QAAW,CACf7R,IADe,EAEfmB,KAFe;;;AAIf,QAAMrD,KAAK,wBACRkC,IAAI,CAACuC,OAAL,CAAa,kBAAb,EAAiC,EAAjC,CADQ,IAC+BpB,KAD/B,SAAX;AAGAwN,IAAAA,UAAU,CAAC;AAAEC,MAAAA,MAAM,eAAOA,MAAP,EAAkB9Q,KAAlB,CAAR;AAAmCC,MAAAA,QAAQ,EAAE;AAA7C,KAAD,CAAV;AACD,GARD;;AASA,sBACE,oBAAC,yBAAD,CAA2B,QAA3B;AAAoC,IAAA,KAAK,EAAE;AAAE+T,MAAAA,UAAU,EAAVA,UAAF;AAAcD,MAAAA,QAAQ,EAARA;AAAd;AAA3C,kBACE;AAAM,IAAA,GAAG,EAAER,GAAX;AAAgB,IAAA,YAAY,EAAE0C;AAA9B,KAAgD/H,CAAhD,GACG7Q,QADH,CADF,CADF;AAOD,CAhED;;AAkEAgL,kBAAkB,CAAC1K,SAAnB,GAA+BA,WAA/B;;ACpFA,IAAMA,WAAS,GAAGkH,UAAU,CAACyD,YAAX,CAAwB3K,SAA1C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACyD,YAAX,CAAwBb,YAA7C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACyD,YAAX,CAAwBpD,WAA5C;;AAaA,IAAMoD,YAAY,GAAyC,SAArDA,YAAqD,CAAC7K,KAAD;MACjD2I,QAA0B3I,MAA1B2I;MAAO/I,WAAmBI,MAAnBJ;MAAa6Q,kCAAMzQ;;oBAChB0Q,UAAU,CAACzK,YAAD;MAApBtC,oBAAAA;;AACR,MAAM8N,WAAW;AACfyH,IAAAA,WAAW,EAAEvV,KAAF,oBAAEA,KAAK,CAAEuV,WADL;AAEfvQ,IAAAA,KAAK,EAALA;AAFe,KAGZ8H,CAHY,CAAjB;;AAKA,SAAO7Q,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAG,IAAA,IAAI,EAAE+D,KAAF,oBAAEA,KAAK,CAAEuV;AAAhB,KAAiCzI,CAAjC,GACG9H,KADH,CAHF;AAOD,CAfD;;AAiBAkC,YAAY,CAAC3K,SAAb,GAAyBA,WAAzB;AACA2K,YAAY,CAACb,YAAb,GAA4BA,cAA5B;AACAa,YAAY,CAACpD,WAAb,GAA2BA,aAA3B;;ACpCA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC0D,aAAX,CAAyB5K,SAA3C;;AASA,IAAM4K,aAAa,GAA0C,SAAvDA,aAAuD,CAAC9K,KAAD;MACnDJ,WAAkCI,MAAlCJ;qBAAkCI,MAAxB+W;MAAAA,kCAAQ;MAAUtG,kCAAMzQ;;AAC1C,sBACE,oBAAC,oBAAD,CAAsB,QAAtB;AAA+B,IAAA,KAAK,eAAOyQ,CAAP;AAAUsG,MAAAA,KAAK,EAALA;AAAV;AAApC,KACGnX,QADH,CADF;AAKD,CAPD;;AASAkL,aAAa,CAAC5K,SAAd,GAA0BA,WAA1B;AACA4K,aAAa,CAACd,YAAd,GAA6B;AAC3B+M,EAAAA,KAAK,EAAE;AADoB,CAA7B;;ACFA,IAAM7W,WAAS,GAAGkH,UAAU,CAAC6D,iBAAX,CAA6B/K,SAA/C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC6D,iBAAX,CAA6BxD,WAAjD;;AAMA,IAAMwD,iBAAiB,GAAyC,SAA1DA,iBAA0D,CAACjL,KAAD;MACtDJ,WAA8BI,MAA9BJ;uBAA8BI,MAApBkL;MAAAA,sCAAU;;oBACF+L,UAAU,CAACxE,eAAD,EAAkBD,oBAAlB;MAA7BnS;MAAO0C;;oBACc2N,UAAU,CAACzK,YAAD;MAA9BtC,oBAAAA;MAAOgN,uBAAAA;;AACf,MAAM3N,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;AACAjC,EAAAA,SAAS,CAAC;AACR,QAAI/R,MAAM,CAAC+H,WAAP,IAAsB9I,CAAC,CAAC+C,OAAF,CAAU3E,KAAK,CAACiS,SAAhB,CAAtB,IAAoD,CAACpH,OAAzD,EAAkE;AAChEgH,MAAAA,oBAAoB,CAAC;AAAElP,QAAAA,MAAM,EAANA,MAAF;AAAUD,QAAAA,QAAQ,EAARA;AAAV,OAAD,CAApB;AACD;AACF,GAJQ,EAIN,CAACC,MAAM,CAAC+H,WAAR,CAJM,CAAT;;AAKA,MAAMmM,YAAY,gBACb7W,KADa;AAEhBwR,IAAAA,gBAAgB;AAAA,8EAAE,iBAAOC,aAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACVD,gBAAgB,CAAC;AACrB7O,kBAAAA,MAAM,EAANA,MADqB;AAErB8O,kBAAAA,aAAa,EAAbA,aAFqB;AAGrB/O,kBAAAA,QAAQ,EAARA,QAHqB;AAIrB4N,kBAAAA,QAAQ,EAAEA,QAJW;AAKrBhN,kBAAAA,KAAK,EAALA;AALqB,iBAAD,CADN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAFA;AAWhBqO,IAAAA,iBAAiB,EAAE,2BAAChQ,MAAD;AAAA,aACjB0Q,sBAAsB,CAAC,mBAAD,CAAtB,CAA4C1Q,MAA5C,EAAoDe,QAApD,CADiB;AAAA,KAXH;AAahBkP,IAAAA,gBAAgB,EAAE,0BAACH,aAAD;AAAA,aAChBY,sBAAsB,CAAC,kBAAD,CAAtB,CAA2CZ,aAA3C,EAA0D/O,QAA1D,CADgB;AAAA;AAbF,IAAlB;;AAgBA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEmU;AAAjC,KACGtX,QADH,CADF;AAKD,CA/BD;;AAiCAqL,iBAAiB,CAAC/K,SAAlB,GAA8BA,WAA9B;AACA+K,iBAAiB,CAACxD,WAAlB,GAAgCA,aAAhC;;ACrDA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC+D,aAAX,CAAyBjL,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC+D,aAAX,CAAyB1D,WAA7C;;AAWA,IAAM0D,aAAa,GAA0C,SAAvDA,aAAuD,CAACnL,KAAD;oBAUvDA,MARFyE;MAAAA,gCAAO;2BAQLzE,MAPF+I;MAAAA,8CAAc;wBAOZ/I,MANF+J;MAAAA,wCAAW;0BAMT/J,MALFoL;MAAAA,4CAAa;oBAKXpL,MAJFU;MAAAA,gCAAO;MACPkF,QAGE5F,MAHF4F;MACAuT,SAEEnZ,MAFFmZ;MACG1I,kCACDzQ;;sBACmC0Y,YAAY;MAA3CnC,2BAAAA;MAAYlD,uBAAAA;MAAQrR,uBAAAA;;oBACsC0O,UAAU,CAC1EiC,eAD0E;MAApEd,+BAAAA;MAAkBG,gCAAAA;MAAmBC,+BAAAA;;AAG7C,MAAMmH,YAAY;AAAA,8DAAG;AAAA;AAAA;AAAA;AAAA;AAAA,oBACfhO,UAAU,IAAInJ,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAd,IAAmC,CAACC,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CADrB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEXxB,gBAAgB,CAACwB,MAAM,CAAC5O,IAAD,CAAN,CAAamB,KAAd,CAFL;;AAAA;AAGjBuT,cAAAA,MAAM,IAAIA,MAAM,EAAhB;;AAHiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAMArE,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtB,UAAM6W,UAAU,GAAgB,EAAhC;;AACA,WAAK,IAAMC,SAAX,IAAwB9W,MAAxB,EAAgC;AAAA,gCACJA,MAAM,CAAC8W,SAAD,CADF;AAAA,YACtB/X,IADsB,qBACtBA,IADsB;AAAA,YAChB0B,OADgB,qBAChBA,OADgB;AAE9BoW,QAAAA,UAAU,CAACjX,IAAX,CAAgB;AACdb,UAAAA,IAAI,EAAEA,IADQ;AAEd0B,UAAAA,OAAO,EAAPA,OAFc;AAGdD,UAAAA,QAAQ,EAAE,OAHI;AAIdD,UAAAA,KAAK,EAAEuW;AAJO,SAAhB;AAMD;;AACD,OAAC7W,CAAC,CAAC+C,OAAF,CAAU6T,UAAV,CAAD,IAA0B7G,iBAAiB,CAAC6G,UAAD,CAA3C;AACD,KAZD,MAYO,IAAI,CAAC5W,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CAAL,EAAwB;AAC7BrB,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAC,MAAAA,gBAAgB,CAACoB,MAAM,CAAC5O,IAAD,CAAN,CAAamB,KAAd,CAAhB;AACD;AACF,GAjBQ,EAiBN,CAAC5D,MAAD,CAjBM,CAAT;AAkBA,sBACE,oBAAC6U,WAAD;AACE,IAAA,IAAI,EAAEpS,IADR;AAEE,IAAA,IAAI,EAAE/D,IAFR;AAGE,IAAA,GAAG,EAAE6V,UAHP;AAIE,IAAA,QAAQ,EAAExM,QAJZ;AAKE,IAAA,WAAW,EAAEhB,WALf;AAME,IAAA,YAAY,EAAEnD,KANhB;AAOE,IAAA,MAAM,EAAEwT;AAPV,KAQM3I,CARN,EADF;AAYD,CAnDD;;AAqDAtF,aAAa,CAACjL,SAAd,GAA0BA,WAA1B;AACAiL,aAAa,CAAC1D,WAAd,GAA4BA,aAA5B;;ACnEA,IAAM4R,SAAS,GAAuB,SAAhCA,SAAgC,CAAC/P,IAAD,EAAO5I,IAAP,EAAa6I,MAAb,EAAqB+P,GAArB;AACpC,MAAIC,CAAJ;;AACAtX,EAAAA,CAAC,CAAC0E,IAAF,CAAO2S,GAAP,EAAYrY,GAAZ,CAAgB,UAAC+T,CAAD;AACd,QAAMyB,GAAG,GAAGzB,CAAC,CAACwE,WAAF,EAAZ;AACA,QAAMC,OAAO,GAAG,MAAGlQ,MAAH,GAAY7I,IAAZ,GAAmB4I,IAAnB,EAA0BkQ,WAA1B,EAAhB;AACA,QAAME,OAAO,GAAG,MAAGhZ,IAAH,GAAU4I,IAAV,GAAiBC,MAAjB,EAA0BiQ,WAA1B,EAAhB;AACA,QAAMG,SAAS,GAAG,MAAGpQ,MAAH,GAAYD,IAAZ,GAAmB5I,IAAnB,EAA0B8Y,WAA1B,EAAlB;AACA,QAAMI,UAAU,GAAG,MAAGtQ,IAAH,GAAU5I,IAAV,GAAiB6I,MAAjB,EAA0BiQ,WAA1B,EAAnB;;AACA,QAAI/C,GAAG,KAAKgD,OAAZ,EAAqB;AACnBF,MAAAA,CAAC,GAAGD,GAAG,CAACtE,CAAD,CAAP;AACD;;AACD,QAAIyB,GAAG,KAAKiD,OAAZ,EAAqB;AACnBH,MAAAA,CAAC,GAAGD,GAAG,CAACtE,CAAD,CAAP;AACD;;AACD,QAAIyB,GAAG,KAAKkD,SAAZ,EAAuB;AACrBJ,MAAAA,CAAC,GAAGD,GAAG,CAACtE,CAAD,CAAP;AACD;;AACD,QAAIyB,GAAG,KAAKmD,UAAZ,EAAwB;AACtBL,MAAAA,CAAC,GAAGD,GAAG,CAACtE,CAAD,CAAP;AACD;AACF,GAlBD;;AAmBA,SAAOuE,CAAP;AACD,CAtBD;;ACQA,IAAMM,cAAc,GAA2C,SAAzDA,cAAyD,CAAC7Z,KAAD;MACrDuJ,SAAuCvJ,MAAvCuJ;MAAQD,OAA+BtJ,MAA/BsJ;MAAM5I,OAAyBV,MAAzBU;MAAMd,WAAmBI,MAAnBJ;MAAa6Q,kCAAMzQ;;oBAC7B0Q,UAAU,CAACzK,YAAD;MAApBtC,oBAAAA;;kBACkBkR,QAAQ,CAAC,EAAD;MAA3BiF;MAAOC;;AACdhF,EAAAA,SAAS,CAAC;AACR,QAAMtE,CAAC,GAAG4I,SAAS,CACjB/P,IADiB,EAEjB5I,IAFiB,EAGjB6I,MAAM,IAAI,WAHO,EAIjB5F,KAAK,IAAI,EAJQ,CAAnB;AAMAoW,IAAAA,QAAQ,CAACtJ,CAAD,CAAR;AACA,WAAO;AACL,UAAIxO,CAAC,CAAC+C,OAAF,CAAUrB,KAAV,CAAJ,EAAsB;AACpBoW,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACD;AACF,KAJD;AAKD,GAbQ,EAaN,CAACpW,KAAD,CAbM,CAAT;;AAcA,MAAM8N,WAAW;AACfqI,IAAAA,KAAK,EAALA;AADe,KAEZrJ,CAFY,CAAjB;;AAIA,SAAOzQ,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADK,gBAGL,4BAAU6Q,CAAV,EAAcqJ,KAAd,CAHF;AAKD,CA3BD;;AA6BAD,cAAc,CAAC3Z,SAAf,GAA2BmJ,uBAA3B;AACAwQ,cAAc,CAAC7P,YAAf,GAA8B;AAC5BT,EAAAA,MAAM,EAAE;AADoB,CAA9B;;ACzCA,IAAMrJ,WAAS,GAAGkH,UAAU,CAACkE,cAAX,CAA0BpL,SAA5C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACkE,cAAX,CAA0BtB,YAA/C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACkE,cAAX,CAA0B7D,WAA9C;;AAEA,IAAM6D,cAAc,GAA2C,SAAzDA,cAAyD,CAACtL,KAAD;AAC7D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,QAArB;AAA8B,IAAA,IAAI,EAAC;AAAnC,KAAkDA,KAAlD,EAAP;AACD,CAFD;;AAIAsL,cAAc,CAACpL,SAAf,GAA2BA,WAA3B;AACAoL,cAAc,CAACtB,YAAf,GAA8BA,cAA9B;AACAsB,cAAc,CAAC7D,WAAf,GAA6BA,aAA7B;;ACuDO,IAAMuS,oBAAoB,GAAkB;AACjDC,EAAAA,YAAY,EAAE,EADmC;AAEjDC,EAAAA,WAAW,EAAE,CAFoC;AAGjDC,EAAAA,SAAS,EAAE,KAHsC;AAIjDC,EAAAA,YAAY,EAAE,IAJmC;AAKjDtU,EAAAA,OAAO,EAAE,KALwC;AAMjDuU,EAAAA,SAAS,EAAE,IANsC;AAOjDrY,EAAAA,MAAM,EAAE;AAPyC,CAA5C;AAsCP,AAAO,IAAMsY,oBAAoB;AAAA,yEAAyB,iBACxDjH,MADwD,EAExDrQ,MAFwD,EAGxDD,QAHwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAM9BO,MAAM,CAACiX,iBAAP,CAAyB/W,eAAzB,CACtBR,MADsB,EAEtBS,MAFsB,CAEf4P,MAFe,CAN8B;;AAAA;AAMhDmH,YAAAA,SANgD;AAStDzX,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,sBADC;AAEPE,cAAAA,OAAO,EAAE;AACP6Z,gBAAAA,iBAAiB,EAAED;AADZ;AAFF,aAAD,CAAR;AATsD;AAAA;;AAAA;AAAA;AAAA;AAgBtDvK,YAAAA,OAAO,CAAC5N,KAAR;;AAhBsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AAAA,kBAApBiY,oBAAoB;AAAA;AAAA;AAAA,GAA1B;AAoBP,AAAO,IAAMI,kBAAkB,GAAuB,SAAzCA,kBAAyC,CAAC5U,OAAD,EAAU/C,QAAV;AACpDA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,oBADC;AAEPE,IAAAA,OAAO,EAAE;AACPkF,MAAAA,OAAO,EAAPA;AADO;AAFF,GAAD,CAAR;AAMD,CAPM;AASP,AAAO,IAAM6U,WAAW;AAAA,0EAAgB,kBACtCtH,MADsC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEpCrQ,YAAAA,MAFoC,SAEpCA,MAFoC,EAE5BD,QAF4B,SAE5BA,QAF4B,EAElB4N,QAFkB,SAElBA,QAFkB,EAER/N,WAFQ,SAERA,WAFQ;AAAA;AAKpC8X,YAAAA,kBAAkB,CAAC,IAAD,EAAO3X,QAAP,CAAlB;AACQ6X,YAAAA,SAN4B,GAMoBvH,MANpB,CAM5BuH,SAN4B,EAMjBC,QANiB,GAMoBxH,MANpB,CAMjBwH,QANiB,EAMPC,KANO,GAMoBzH,MANpB,CAMPyH,KANO,EAMAzX,OANA,GAMoBgQ,MANpB,CAMAhQ,OANA,EAMY0X,GANZ,iCAMoB1H,MANpB;AAO9B2H,YAAAA,aAP8B;AAQlCC,cAAAA,cAAc,EAAEH;AARkB,eAS/BC,GAT+B;AAW9BG,YAAAA,eAX8B,GAWP,EAXO;AAAA;AAAA,mBAYb5X,MAAM,CAACqI,QAAP,CAAgBnI,eAAhB,CAAgCR,MAAhC,EAAwCS,MAAxC,CACrBuX,aADqB,CAZa;;AAAA;AAY9BG,YAAAA,QAZ8B;AAepC,gBAAIP,SAAJ,EAAeM,eAAe,CAAC,WAAD,CAAf,GAA+BN,SAA/B;AACf,gBAAIC,QAAJ,EAAcK,eAAe,CAAC,UAAD,CAAf,GAA8BL,QAA9B;;AAhBsB,gBAiB/B5Y,CAAC,CAAC+C,OAAF,CAAUkW,eAAV,CAjB+B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAmB1BC,QAAQ,CAAC3X,eAAT,CAAyBR,MAAzB,EAAiCyX,iBAAjC,EAnB0B;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAkB5B,sBAEH1I,MAFG,CAEImJ,eAFJ,CAlB4B;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAsBhCtY,WAAW,IAAI+N,QAtBiB;AAAA;AAAA;AAAA;;AAAA,2BAuBvBtN,OAvBuB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAuBLT,WAAW,EAvBN;;AAAA;AAAA;;AAAA;AAuB5BN,YAAAA,EAvB4B;;AAAA,iBAwB9BA,EAxB8B;AAAA;AAAA;AAAA;;AAyB1BqB,YAAAA,KAzB0B,GAyBlBL,MAAM,CAACC,KAAP,CAAaiB,KAAb,CAAmB;AAAElC,cAAAA,EAAE,EAAFA;AAAF,aAAnB,CAzBkB;AA0B1B8D,YAAAA,IA1B0B,GA0BnB9C,MAAM,CAACqI,QAAP,CAAgBnH,KAAhB,CAAsB;AAAElC,cAAAA,EAAE,EAAE6Y,QAAQ,CAAC7Y;AAAf,aAAtB,CA1BmB;AAAA;AAAA,mBA2B1BgB,MAAM,CAACwB,QAAP,CAAgBtB,eAAhB,CAAgCR,MAAhC,EAAwCS,MAAxC,CAA+C;AACnDY,cAAAA,QAAQ,EAAE,CADyC;AAEnDV,cAAAA,KAAK,EAALA,KAFmD;AAGnDyC,cAAAA,IAAI,EAAJA;AAHmD,aAA/C,CA3B0B;;AAAA;AAgChCuK,YAAAA,QAAQ,IAAIA,QAAQ,CAACrO,EAAD,CAApB;;AAhCgC;AAmCpCS,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,sBADC;AAEPE,cAAAA,OAAO,eACFoa,aADE;AAFA,aAAD,CAAR;AAMAN,YAAAA,kBAAkB,CAAC,KAAD,EAAQ3X,QAAR,CAAlB;AAzCoC;AAAA;;AAAA;AAAA;AAAA;AA2C9Bf,YAAAA,MA3C8B,GA2CrBH,qBAAqB,eAAI,UAAJ,CA3CA;AA4CpCkB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,mBADC;AAEPE,cAAAA,OAAO,EAAE;AACPoB,gBAAAA,MAAM,EAANA;AADO;AAFF,aAAD,CAAR;AAMA0Y,YAAAA,kBAAkB,CAAC,KAAD,EAAQ3X,QAAR,CAAlB;;AAlDoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAAA,kBAAX4X,WAAW;AAAA;AAAA;AAAA,GAAjB;AAsDP,AAAO,IAAMS,gBAAgB,GAAqB,SAArCA,gBAAqC,CAACpZ,MAAD,EAASe,QAAT;AAChDA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,mBADC;AAEPE,IAAAA,OAAO,EAAE;AACPoB,MAAAA,MAAM,EAANA;AADO;AAFF,GAAD,CAAR;AAMD,CAPM;AASP,IAAMtB,MAAI,GAAyB,CACjC,iBADiC,EAEjC,sBAFiC,EAGjC,mBAHiC,EAIjC,oBAJiC,CAAnC;;AAOA,IAAM2a,eAAe,GAAG,SAAlBA,eAAkB,CACtBhb,KADsB,EAEtB2F,OAFsB;AAAA,SAItB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTtF,MAHS,CAJW;AAAA,CAAxB;;AC/LA,IAAM4a,eAAe,gBAAGpV,aAAa,CAAC8T,oBAAD,CAArC;;ACTA,IAAMuB,cAAc,GAAmB,SAAjCA,cAAiC,CAAC/P,QAAD,EAAgB+N,CAAhB;MAAC/N;AAAAA,IAAAA,WAAW;;;AACjD,SAAOvJ,CAAC,CAACyE,KAAF,CACL8E,QAAQ,CAACgQ,MAAT,CAAgB,UAAC/Z,CAAD;AACd,QAAIA,CAAC,CAACc,KAAF,KAAYgX,CAAC,CAAChX,KAAlB,EAAyB;AACvB,aAAOd,CAAC,CAACV,IAAF,KAAWwY,CAAC,CAACxY,IAApB;AACD;;AACD,QAAIU,CAAC,CAACe,QAAF,KAAe+W,CAAC,CAAC/W,QAArB,EAA+B;AAC7B,aAAOf,CAAC,CAACV,IAAF,KAAWwY,CAAC,CAACxY,IAApB;AACD;;AACD,WAAOU,CAAC,CAACV,IAAF,KAAWwY,CAAC,CAACxY,IAApB;AACD,GARD,CADK,CAAP;AAWD,CAZD;;ACWA,IAAM0a,YAAY,GAAiB,SAA7BA,YAA6B,CAAC5Y,MAAD;MACzB6Y,YAA0D7Y,OAA1D6Y;MAAWlQ,WAA+C3I,OAA/C2I;MAAUjJ,QAAqCM,OAArCN;MAAOvC,QAA8B6C,OAA9B7C;MAAOuE,WAAuB1B,OAAvB0B;MAAU/B,WAAaK,OAAbL;AACrD,SAAOkZ,SAAS,CAACza,GAAV,CAAc,UAACsY,CAAD,EAAIvE,CAAJ;AACnB,QAAM2G,MAAM,GAAGJ,cAAc,CAAC/P,QAAD,EAAW+N,CAAX,CAA7B;;AACA,QAAIhX,KAAJ,EAAW;AACT,UAAIgX,CAAC,CAAC/W,QAAF,KAAe,UAAnB,EAA+B;AAC7B,eACE+B,QAAQ,IACRgV,CAAC,CAACjX,EAAF,KAASiC,QAAQ,CAAC,IAAD,CADjB,iBAEE;AAAM,UAAA,GAAG,EAAEyQ;AAAX,WAAkBhV,KAAlB,GACG,CAAA2b,MAAM,QAAN,YAAAA,MAAM,CAAElZ,OAAR,KAAmB8W,CAAC,CAAC9W,OADxB,CAHJ;AAQD;;AACD,UAAIF,KAAK,KAAKgX,CAAC,CAAChX,KAAZ,IAAqBC,QAAQ,KAAK+W,CAAC,CAAC/W,QAAxC,EAAkD;AAChD,4BACE;AAAM,UAAA,GAAG,EAAEwS;AAAX,WAAkBhV,KAAlB,GACG,CAAA2b,MAAM,QAAN,YAAAA,MAAM,CAAElZ,OAAR,KAAmB8W,CAAC,CAAC9W,OADxB,CADF;AAKD;AACF;AACF,GArBM,CAAP;AAsBD,CAxBD;;ACVA,IAAMiP,SAAO,GAAyB;AACpCnL,EAAAA,SAAS,EAAE;AADyB,CAAtC;AAIA,IAAMqV,eAAe,gBAAG1V,aAAa,CAAuBwL,SAAvB,CAArC;;ACLA,IAAMA,SAAO,GAA2B;AACtCnN,EAAAA,QAAQ,EAAE;AAD4B,CAAxC;AAIA,IAAMsX,uBAAuB,gBAAG3V,aAAa,CAAyBwL,SAAzB,CAA7C;;ACCA,IAAMxR,WAAS,GAAGkH,UAAU,CAACmE,MAAX,CAAkBrL,SAApC;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACmE,MAAX,CAAkBvB,YAAvC;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACmE,MAAX,CAAkB9D,WAAtC;;AAIA,IAAM8D,MAAM,GAAmC,SAAzCA,MAAyC,CAACvL,KAAD;MACrCJ,WAA4DI,MAA5DJ;wBAA4DI,MAAlDwL;MAAAA,wCAAW;MAAIhJ,WAAmCxC,MAAnCwC;qBAAmCxC,MAAzBuC;MAAAA,kCAAQ;MAAWkO,kCAAMzQ;;oBACpC0Q,UAAU,CAACzK,YAAD;MAA1B6V,0BAAR9Z;;qBAC2B0O,UAAU,CAAC4K,eAAD;MAA7BS,8BAAR/Z;;qBAC2B0O,UAAU,CAACkL,eAAD;MAA7BI,8BAARha;;qBAC0B0O,UAAU,CAACkE,gBAAD;MAA5BqH,6BAARja;;qBAC2B0O,UAAU,CAACiC,eAAD;MAA7BuJ,8BAARla;;qBACa0O,UAAU,CAACmL,uBAAD;MAAvBtX,wBAAAA;;;AAER,MAAMmX,SAAS,aACTK,cAAc,IAAI,EADT,EAETD,WAAW,IAAI,EAFN,EAGTE,cAAc,IAAI,EAHT,EAITC,aAAa,IAAI,EAJR,EAKTC,cAAc,IAAI,EALT,CAAf;;AAOA,MAAMzK,WAAW;AAAKjG,IAAAA,QAAQ,EAARA,QAAL;AAAehJ,IAAAA,QAAQ,EAARA,QAAf;AAAyBD,IAAAA,KAAK,EAALA;AAAzB,KAAmCkO,CAAnC,CAAjB;;AACA,MAAM0L,SAAS,GAAGV,YAAY,CAAC;AAC7BC,IAAAA,SAAS,EAATA,SAD6B;AAE7BnZ,IAAAA,KAAK,EAALA,KAF6B;AAG7BiJ,IAAAA,QAAQ,EAARA,QAH6B;AAI7BxL,IAAAA,KAAK,EAAEyQ,CAJsB;AAK7BlM,IAAAA,QAAQ,EAARA,QAL6B;AAM7B/B,IAAAA,QAAQ,EAARA;AAN6B,GAAD,CAA9B;AAQA,SAAO5C,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb,oBAAC,QAAD,QAAWuc,SAAX,CAHF;AAKD,CA9BD;;AAgCA5Q,MAAM,CAACrL,SAAP,GAAmBA,WAAnB;AACAqL,MAAM,CAACvB,YAAP,GAAsBA,cAAtB;AACAuB,MAAM,CAAC9D,WAAP,GAAqBA,aAArB;;AC9CA,IAAMvH,WAAS,GAAGkH,UAAU,CAACqE,gBAAX,CAA4BvL,SAA9C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACqE,gBAAX,CAA4BhE,WAAhD;;AAOA,IAAMgE,gBAAgB,GAA6B,SAA7CA,gBAA6C;MAAG7L,gBAAAA;MAAU8L,WAAAA;AAC9D,sBACE,oBAAC,uBAAD,CAAyB,QAAzB;AAAkC,IAAA,KAAK,EAAE;AAAEA,MAAAA,GAAG,EAAHA,GAAF;AAAO0E,MAAAA,oBAAoB,EAApBA;AAAP;AAAzC,KACGxQ,QADH,CADF;AAKD,CAND;;AAQA6L,gBAAgB,CAACvL,SAAjB,GAA6BA,WAA7B;AACAuL,gBAAgB,CAAChE,WAAjB,GAA+BA,aAA/B;;ACdA,IAAM2U,aAAa,GAAG,yCAAtB;AA6BA,AAAO,IAAMC,aAAa,GAAkB,SAA/BA,aAA+B,CAACtB,GAAD,EAAMtW,IAAN,EAAY/D,IAAZ,EAAkBqB,YAAlB;AAC1C,MAAI,CAACgZ,GAAL,EAAU;AACR,WAAO;AACLxY,MAAAA,KAAK,EAAEkC,IADF;AAEL1D,MAAAA,IAAI,EAAE,kBAFD;AAGL0B,MAAAA,OAAO,EAAKgC,IAAL,mBAHF;AAIL1C,MAAAA,YAAY,EAAZA;AAJK,KAAP;AAMD;;AACD,MAAIrB,IAAI,KAAK,OAAT,IAAoBuB,CAAC,CAACqa,QAAF,CAAWvB,GAAX,CAApB,IAAuC,CAACA,GAAG,CAACrZ,KAAJ,CAAU0a,aAAV,CAA5C,EAAsE;AACpE,WAAO;AACL7Z,MAAAA,KAAK,EAAEkC,IADF;AAEL1D,MAAAA,IAAI,EAAE,kBAFD;AAGL0B,MAAAA,OAAO,EAAKgC,IAAL,oBAHF;AAIL1C,MAAAA,YAAY,EAAZA;AAJK,KAAP;AAMD;;AACD,SAAO,EAAP;AACD,CAlBM;;AAoBP,IAAMwa,kBAAkB,GAAuB,SAAzCA,kBAAyC,CAC7CC,MAD6C,EAE7CzS,QAF6C,EAG7ChI,YAH6C;AAK7C,MAAMC,MAAM,GAAgB,EAA5B;AACA,MAAIqR,MAAM,GAAG;AAAEpQ,IAAAA,QAAQ,EAAE;AAAZ,GAAb;;AACAhB,EAAAA,CAAC,CAAChB,GAAF,CAAMub,MAAN,EAAc,UAACjD,CAAD;AACZ,QAAMkD,MAAM,GAAG,CAAC,CAAClD,CAAC,CAAC,SAAD,CAAlB;AACA,QAAMwB,GAAG,GAAG0B,MAAM,GAAGA,MAAH,GAAYlD,CAAC,CAAC3T,KAAF,KAAY,IAAZ,GAAmB,KAAnB,GAA2B2T,CAAC,CAAC3T,KAA3D;AACA,QAAM8W,QAAQ,GAAGnD,CAAC,CAACoD,YAAF,CAAe,MAAf,CAAjB;;AACA,QAAKD,QAAQ,IAAI3S,QAAQ,CAACtJ,OAAT,CAAiBic,QAAjB,MAA+B,CAAC,CAA7C,IAAmDnD,CAAC,CAACxP,QAAzD,EAAmE;AAAA;;AACjE,UAAM1H,KAAK,GAAGga,aAAa,CAACtB,GAAD,EAAMxB,CAAC,CAAC9U,IAAR,EAAc8U,CAAC,CAAC7Y,IAAhB,EAAsBqB,YAAtB,CAA3B;;AACA,UAAI,CAACE,CAAC,CAAC+C,OAAF,CAAU3C,KAAV,CAAL,EAAuB;AACrBL,QAAAA,MAAM,CAACJ,IAAP,CAAYS,KAAZ;AACD;;AACDgR,MAAAA,MAAM,gBAAQA,MAAR,kCAAoBkG,CAAC,CAAC9U,IAAtB,IAA+BsW,GAA/B,aAAN;AACD;;AACD,QAAIxB,CAAC,CAACoD,YAAF,CAAe,MAAf,CAAJ,EAA4B;AAAA;;AAC1B,UAAMC,UAAU,GAAG,CAAC,CAACrD,CAAC,CAACoD,YAAF,CAAe,eAAf,CAArB;AACAtJ,MAAAA,MAAM,GAAGuJ,UAAU,gBAEVvJ,MAFU;AAGbpQ,QAAAA,QAAQ,eAAOoQ,MAAM,CAACpQ,QAAd,kCAA4BsW,CAAC,CAAC9U,IAA9B,IAAuCsW,GAAvC;AAHK,wBAKV1H,MALU,kCAKEkG,CAAC,CAAC9U,IALJ,IAKasW,GALb,aAAnB;AAMD;AACF,GApBD;;AAqBA,SAAO;AAAE/Y,IAAAA,MAAM,EAANA,MAAF;AAAUqR,IAAAA,MAAM,EAANA;AAAV,GAAP;AACD,CA7BD;;AAmCA,AAAO,IAAMwJ,WAAW,GAAgB,SAA3BA,WAA2B,CAACxJ,MAAD,EAASyJ,MAAT;MAASA;AAAAA,IAAAA,SAAS7J;;;AACxD,MAAI,CAACI,MAAM,CAAC,UAAD,CAAX,EAAyB;AACvB,QAAMtJ,QAAQ,GAAG9H,CAAC,CAAC8a,OAAF,CAAUD,MAAV,EAAkB,QAAlB,EAA4B,SAA5B,CAAjB;;AACA,WAAO/S,QAAQ,CAACpI,MAAT,GAAkBM,CAAC,CAAC0E,IAAF,CAAO0M,MAAP,EAAe1R,MAAxC;AACD,GAHD,MAGO;AACL,QAAMoI,SAAQ,GAAG9H,CAAC,CAAC8a,OAAF,CAAUD,MAAV,EAAkB,YAAlB,EAAgC,WAAhC,CAAjB;;AACA,WAAO/S,SAAQ,CAACpI,MAAT,GAAkBM,CAAC,CAAC0E,IAAF,CAAO0M,MAAP,EAAe1R,MAAxC;AACD;AACF,CARM;;AC5EP,IAAMzB,WAAS,GAAGkH,UAAU,CAACuE,QAAX,CAAoBzL,SAAtC;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACuE,QAAX,CAAoB3B,YAAzC;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACuE,QAAX,CAAoBlE,WAAxC;;AAOA,IAAMkE,QAAQ,GAAqC,SAA7CA,QAA6C,CAAC3L,KAAD;MACzCJ,WAAuBI,MAAvBJ;MAAUgM,WAAa5L,MAAb4L;AAClB,MAAMnH,IAAI,GAAG,cAAb;AACA,MAAMqR,GAAG,GAA+B8C,MAAM,CAAkB,IAAlB,CAA9C;;oBAC0ClI,UAAU,CAAC4K,eAAD;MAA5CX,0BAAAA;MAAaS,+BAAAA;;AACrB,MAAM4B,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAMC,WAAW,GAAGrH,GAAG,CAACkD,OAAxB;AACA,QAAMoE,QAAQ,GAAGD,WAAH,oBAAGA,WAAW,CAAEC,QAA9B;;8BAC2Bb,kBAAkB,CAC3Ca,QAD2C,EAE3C,CAAC,cAAD,EAAiB,cAAjB,CAF2C,EAG3C,UAH2C;QAArCpb,6BAAAA;QAAQqR,6BAAAA;;AAKhB,QAAIpR,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAJ,EAAuB;AACrB2Y,MAAAA,WAAW,CAACtH,MAAD,CAAX;AACA8J,MAAAA,WAAW,QAAX,YAAAA,WAAW,CAAE1E,KAAb;;AACA,UAAI7M,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACyH,MAAD,CAAR;AACD;AACF,KAND,MAMO;AACL+H,MAAAA,gBAAgB,CAACpZ,MAAD,CAAhB;AACD;AACF,GAlBD;;AAmBA,sBACE,oBAAC,QAAD,qBACE;AAAM,IAAA,GAAG,EAAEyC,IAAX;AAAiB,IAAA,IAAI,EAAEA,IAAvB;AAA6B,IAAA,GAAG,EAAEqR,GAAlC;AAAuC,IAAA,QAAQ,EAAEkH;AAAjD,KACGpd,QADH,CADF,CADF;AAOD,CA/BD;;AAiCA+L,QAAQ,CAACzL,SAAT,GAAqBA,WAArB;AACAyL,QAAQ,CAAC3B,YAAT,GAAwBA,cAAxB;AACA2B,QAAQ,CAAClE,WAAT,GAAuBA,aAAvB;;ACxDA,IAAMvH,WAAS,GAAGkH,UAAU,CAACyE,cAAX,CAA0B3L,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACyE,cAAX,CAA0BpE,WAA9C;;AAEA,IAAMoE,cAAc,GAA2C,SAAzDA,cAAyD,CAAC7L,KAAD;AAC7D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,QAArB;AAA8B,IAAA,IAAI,EAAC;AAAnC,KAAkDA,KAAlD,EAAP;AACD,CAFD;;AAIA6L,cAAc,CAAC3L,SAAf,GAA2BA,WAA3B;AACA2L,cAAc,CAACpE,WAAf,GAA6BA,aAA7B;;ACKA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC0E,iBAAX,CAA6B5L,SAA/C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC0E,iBAAX,CAA6BrE,WAAjD;;AAMA,IAAMqE,iBAAiB,GAAyC,SAA1DA,iBAA0D,CAAC9L,KAAD;MACtDJ,WAAaI,MAAbJ;;oBACkBqX,UAAU,CAACoE,eAAD,EAAkBrB,oBAAlB;MAA7B3Z;MAAO0C;;AACd,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAC2CtG,UAAU,CAACzK,YAAD;MAA7C5C,sBAAAA;MAASsN,uBAAAA;MAAU/N,0BAAAA;;AAC3B,MAAMoY,aAAa,gBACd3a,KADc;AAEjBia,IAAAA,oBAAoB,EAAE,gCAACjH,MAAD;AAAA,aACpBiH,oBAAoB,CAACjH,MAAD,EAASrQ,MAAT,EAAiBD,QAAjB,CADA;AAAA,KAFL;AAIjB4X,IAAAA,WAAW,EAAE,uBAACtH,MAAD;AAAA,aACXsH,WAAW,cACJtH,MADI;AACIhQ,QAAAA,OAAO,EAAPA;AADJ,UAET;AAAEL,QAAAA,MAAM,EAANA,MAAF;AAAUD,QAAAA,QAAQ,EAARA,QAAV;AAAoB4N,QAAAA,QAAQ,EAARA,QAApB;AAA8B/N,QAAAA,WAAW,EAAXA;AAA9B,OAFS,CADA;AAAA,KAJI;AASjBwY,IAAAA,gBAAgB,EAAE,4BAACpZ,MAAD;AAAA,aAAuBoZ,gBAAgB,CAACpZ,MAAD,EAASe,QAAT,CAAvC;AAAA,KATD;AAUjB2X,IAAAA,kBAAkB,EAAE,8BAAC5U,OAAD;AAAA,aAClB4U,kBAAkB,CAAC5U,OAAD,EAAU/C,QAAV,CADA;AAAA;AAVH,IAAnB;;AAaA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEiY;AAAjC,KACGpb,QADH,CADF;AAKD,CAvBD;;AAyBAkM,iBAAiB,CAAC5L,SAAlB,GAA8BA,WAA9B;AACA4L,iBAAiB,CAACrE,WAAlB,GAAgCA,aAAhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC2E,wBAAX,CAAoC7L,SAAtD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC2E,wBAAX,CAAoC/B,YAAzD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC2E,wBAAX,CAAoCtE,WAAxD;;AASA,IAAMsE,wBAAwB,GAAqD,SAA7EA,wBAA6E,CACjF/L,KADiF;AAGjF,sBAAO,oBAAC6V,YAAD;AAAY,IAAA,OAAO,EAAEwH,eAArB;AAAsC,IAAA,IAAI,EAAC;AAA3C,KAA8Drd,KAA9D,EAAP;AACD,CAJD;;AAMA+L,wBAAwB,CAAC7L,SAAzB,GAAqCA,WAArC;AACA6L,wBAAwB,CAAC/B,YAAzB,GAAwCA,cAAxC;AACA+B,wBAAwB,CAACtE,WAAzB,GAAuCA,aAAvC;;ACpBA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC4E,aAAX,CAAyB9L,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC4E,aAAX,CAAyBvE,WAA7C;;AAQA,IAAMuE,aAAa,GAA0C,SAAvDA,aAAuD,CAAChM,KAAD;2BACxBA,MAA3B+I;MAAAA,8CAAc;MAAO0H,kCAAMzQ;;AACnC,sBAAO,oBAAC6W,WAAD;AAAW,IAAA,WAAW,EAAE9N;AAAxB,KAAyC0H,CAAzC,EAAP;AACD,CAHD;;AAKAzE,aAAa,CAAC9L,SAAd,GAA0BA,WAA1B;AACA8L,aAAa,CAACvE,WAAd,GAA4BA,aAA5B;;AC8CO,IAAM6V,YAAY,GAAiB,SAA7BA,YAA6B,CAAC3c,IAAD,EAAOkC,MAAP,EAAeE,QAAf;;;AACxCA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAEmC,MAAM,CAACnC,IADN;AAEPE,IAAAA,OAAO,gCACDiC,MAAM,CAAC4T,GADN,IACc9V,IADd;AAFA,GAAD,CAAR;AAMD,CAPM;AASP,AAuEA,IAAMgC,YAAU,GAAqB,CACnC,SADmC,EAEnC,UAFmC,EAGnC,aAHmC,EAInC,WAJmC,EAKnC,WALmC,EAMnC,oBANmC,EAOnC,mBAPmC,EAQnC,YARmC,CAArC;AAgBA,AAAO,IAAM4a,gBAAgB,GAAuB;AAClDlX,EAAAA,KAAK,EAAE,EAD2C;AAElDD,EAAAA,IAAI,EAAE,EAF4C;AAGlD/B,EAAAA,QAAQ,EAAE,EAHwC;AAIlDC,EAAAA,MAAM,EAAE,EAJ0C;AAKlDgC,EAAAA,MAAM,EAAE,EAL0C;AAMlDC,EAAAA,SAAS,EAAE,EANuC;AAOlDhC,EAAAA,QAAQ,EAAE,EAPwC;AAQlDJ,EAAAA,OAAO,EAAE;AARyC,CAA7C;;AAWP,IAAMqZ,WAAW,GAAG,SAAdA,WAAc,CAClBnd,KADkB,EAElB2F,OAFkB;AAAA,SAIlB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,YAHS,CAJO;AAAA,CAApB;;ACtJA,IAAMzC,WAAS,GAAGkH,UAAU,CAAC6E,aAAX,CAAyB/L,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC6E,aAAX,CAAyBxE,WAA7C;;AAWA,IAAMwE,aAAa,GAA0C,SAAvDA,aAAuD,CAACjM,KAAD;MACnDJ,WAAgCI,MAAhCJ;MAAUuE,UAAsBnE,MAAtBmE;MAASI,WAAavE,MAAbuE;;oBACD0S,UAAU,CAACuG,WAAD,EAAcD,gBAAd;MAA7Bld;MAAO0C;;AACdgS,EAAAA,SAAS,CAAC;AACR,QAAI5Q,OAAJ,EAAa;AACXmZ,MAAAA,YAAY,CAACnZ,OAAD,EAAU;AAAEzD,QAAAA,IAAI,EAAE,YAAR;AAAsB+V,QAAAA,GAAG,EAAE;AAA3B,OAAV,EAAkD1T,QAAlD,CAAZ;AACD;;AACD,QAAIwB,QAAJ,EAAc;AACZ+Y,MAAAA,YAAY,CACV/Y,QADU,EAEV;AAAE7D,QAAAA,IAAI,EAAE,mBAAR;AAA6B+V,QAAAA,GAAG,EAAE;AAAlC,OAFU,EAGV1T,QAHU,CAAZ;AAKD;AACF,GAXQ,EAWN,EAXM,CAAT;;AAYA,MAAM0a,QAAQ,GAA+B,SAAvCA,QAAuC,CAACpX,KAAD;AAAA,WAC3CiX,YAAY,CAACjX,KAAD,EAAQ;AAAE3F,MAAAA,IAAI,EAAE,UAAR;AAAoB+V,MAAAA,GAAG,EAAE;AAAzB,KAAR,EAA4C1T,QAA5C,CAD+B;AAAA,GAA7C;;AAEA,MAAM2a,OAAO,GAA+B,SAAtCA,OAAsC,CAACtX,IAAD;AAAA,WAC1CkX,YAAY,CAAClX,IAAD,EAAO;AAAE1F,MAAAA,IAAI,EAAE,SAAR;AAAmB+V,MAAAA,GAAG,EAAE;AAAxB,KAAP,EAAyC1T,QAAzC,CAD8B;AAAA,GAA5C;;AAEA,MAAM4a,WAAW,GAAsC,SAAjDA,WAAiD,CAACvX,IAAD;AAAA,WACrDkX,YAAY,CAAClX,IAAD,EAAO;AAAE1F,MAAAA,IAAI,EAAE,aAAR;AAAuB+V,MAAAA,GAAG,EAAE;AAA5B,KAAP,EAAiD1T,QAAjD,CADyC;AAAA,GAAvD;;AAEA,MAAM6a,SAAS,GAAqC,SAA9CA,SAA8C,CAACxX,IAAD;AAAA,WAClDkX,YAAY,CAAClX,IAAD,EAAO;AAAE1F,MAAAA,IAAI,EAAE,WAAR;AAAqB+V,MAAAA,GAAG,EAAE;AAA1B,KAAP,EAA6C1T,QAA7C,CADsC;AAAA,GAApD;;AAEA,MAAM8a,SAAS,GAAoC,SAA7CA,SAA6C,CAACzX,IAAD;AAAA,WACjDkX,YAAY,CAAClX,IAAD,EAAO;AAAE1F,MAAAA,IAAI,EAAE,WAAR;AAAqB+V,MAAAA,GAAG,EAAE;AAA1B,KAAP,EAA6C1T,QAA7C,CADqC;AAAA,GAAnD;;AAEA,MAAM+a,kBAAkB,GAAyC,SAA3DA,kBAA2D,CAAC1X,IAAD;AAAA,WAC/DkX,YAAY,CACVlX,IADU,EAEV;AAAE1F,MAAAA,IAAI,EAAE,oBAAR;AAA8B+V,MAAAA,GAAG,EAAE;AAAnC,KAFU,EAGV1T,QAHU,CADmD;AAAA,GAAjE;;AAMA,MAAMgb,SAAS,gBACV5X,kBADU,EAEV9F,KAFU;AAGbod,IAAAA,QAAQ,EAARA,QAHa;AAIbC,IAAAA,OAAO,EAAPA,OAJa;AAKbC,IAAAA,WAAW,EAAXA,WALa;AAMbC,IAAAA,SAAS,EAATA,SANa;AAObC,IAAAA,SAAS,EAATA,SAPa;AAQbC,IAAAA,kBAAkB,EAAlBA;AARa,IAAf;;AAUA,sBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEC;AAA7B,KAAyCne,QAAzC,CADF;AAGD,CA5CD;;AA8CAqM,aAAa,CAAC/L,SAAd,GAA0BA,WAA1B;AACA+L,aAAa,CAACxE,WAAd,GAA4BA,aAA5B;;ACnEA,IAAMiK,SAAO,GAA2B;AACtCnL,EAAAA,SAAS,EAAE,EAD2B;AAEtCyX,EAAAA,eAAe,EAAE,EAFqB;AAGtCC,EAAAA,cAAc,EAAE;AAHsB,CAAxC;AAMA,IAAMC,uBAAuB,gBAAGhY,aAAa,CAAyBwL,SAAzB,CAA7C;;ACPA,IAAMxR,WAAS,GAAGkH,UAAU,CAACtC,QAAX,CAAoB5E,SAAtC;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACtC,QAAX,CAAoB2C,WAAxC;;AAOA,IAAM3C,QAAQ,GAAqC,SAA7CA,QAA6C,CAAC9E,KAAD;oBACbA,MAA5BU;MAAAA,gCAAO;MAAQd,WAAaI,MAAbJ;;oBACD8Q,UAAU,CAACkL,eAAD;MAAxBrV,wBAAAA;;qBACiCmK,UAAU,CAACwN,uBAAD;MAAhCC,iCAAX5X;;AACR,MAAMF,KAAK,GAAGpE,CAAC,CAAC+C,OAAF,CAAUmZ,iBAAV,IACT5X,SADS,GAET4X,iBAFL;AAGA,MAAM/W,UAAU,GACdf,KAAK,IACLA,KAAK,CACFmV,MADH,CACU,UAAC4C,CAAD;AAAA,WAAOA,CAAC,CAACC,QAAF,KAAe3d,IAAtB;AAAA,GADV,EAEGO,GAFH,CAEO,UAACsD,QAAD,EAAWyQ,CAAX;AACH,QAAMsJ,SAAS,GAAG;AAChB/Z,MAAAA,QAAQ,EAARA;AADgB,KAAlB;AAGA,wBACE,oBAAC,uBAAD,CAAyB,QAAzB;AAAkC,MAAA,GAAG,EAAEyQ,CAAvC;AAA0C,MAAA,KAAK,EAAEsJ;AAAjD,OACG1e,QADH,CADF;AAKD,GAXH,CAFF;AAcA,sBAAO,oBAAC,QAAD,QAAWwH,UAAX,CAAP;AACD,CAtBD;;AAwBAtC,QAAQ,CAAC5E,SAAT,GAAqBA,WAArB;AACA4E,QAAQ,CAAC2C,WAAT,GAAuBA,aAAvB;AACA3C,QAAQ,CAACkF,YAAT,GAAwB;AACtBtJ,EAAAA,IAAI,EAAE;AADgB,CAAxB;;ACpCA,IAAMR,WAAS,GAAGkH,UAAU,CAAC8E,cAAX,CAA0BhM,SAA5C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC8E,cAAX,CAClBlC,YADH;AAEA,IAAMvC,aAAW,GAAGL,UAAU,CAAC8E,cAAX,CAA0BzE,WAA9C;;AAMA,IAAMyE,cAAc,GAA2C,SAAzDA,cAAyD,CAAClM,KAAD;sBACNA,MAA/CuJ;MAAAA,oCAAS;oBAAsCvJ,MAAzBU;MAAAA,gCAAO;MAAY+P,kCAAMzQ;;oBAClC0Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;kBACkBsQ,QAAQ,CAAC,EAAD;MAA3BiF;MAAOC;;AACdhF,EAAAA,SAAS,CAAC;AACR,QAAMtE,CAAC,GAAG4I,SAAS,CACjB,QADiB,EAEjB3Y,IAFiB,EAGjB6I,MAHiB,EAIjBhF,QAJiB,CAAnB;AAMAwV,IAAAA,QAAQ,CAACtJ,CAAD,CAAR;AACA,WAAO;AACLsJ,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,KAFD;AAGD,GAXQ,EAWN,CAACxV,QAAD,CAXM,CAAT;;AAYA,MAAMkN,WAAW;AACfqI,IAAAA,KAAK,EAALA;AADe,KAEZrJ,CAFY,CAAjB;;AAIA,SAAOzQ,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,4BAAU6Q,CAAV,EAAcqJ,KAAd,CAHF;AAKD,CAzBD;;AA2BA5N,cAAc,CAAChM,SAAf,GAA2BA,WAA3B;AACAgM,cAAc,CAAClC,YAAf,GAA8BA,cAA9B;AACAkC,cAAc,CAACzE,WAAf,GAA6BA,aAA7B;;AC7CA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC+E,aAAX,CAAyBjM,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC+E,aAAX,CAAyB1E,WAA7C;;AAWA,IAAM0E,aAAa,GAA0C,SAAvDA,aAAuD,CAACnM,KAAD;oBACtC0Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;AACR,MAAMga,GAAG,GAAGha,QAAQ,CAAC,UAAD,CAApB;;AACA,MAAMia,UAAU;AACdD,IAAAA,GAAG,EAAHA;AADc,KAEXve,KAFW,CAAhB;;AAIA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY4e,UAAZ,EAAyBxe,KAAK,CAACJ,QAA/B,CADK,gBAGL;AAAK,IAAA,GAAG,EAAE2e;AAAV,KAAmBve,KAAnB,EAHF;AAKD,CAZD;;AAcAmM,aAAa,CAACjM,SAAd,GAA0BA,WAA1B;AACAiM,aAAa,CAAC1E,WAAd,GAA4BA,aAA5B;;AC3BA,IAAMvH,WAAS,GAAGkH,UAAU,CAACiF,YAAX,CAAwBnM,SAA1C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACiF,YAAX,CAAwB5E,WAA5C;;AAQA,IAAM4E,YAAY,GAAyC,SAArDA,YAAqD,CAACrM,KAAD;oBACpC0Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;AACR,MAAMka,SAAS,GAAGla,QAAQ,CAAC,MAAD,CAA1B;;AACA,MAAMkN,WAAW,gBACZzR,KADY,CAAjB;;AAGA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,yBAAOI,KAAP,EAAeye,SAAf,CAHF;AAKD,CAXD;;AAaApS,YAAY,CAACnM,SAAb,GAAyBA,WAAzB;AACAmM,YAAY,CAAC5E,WAAb,GAA2BA,aAA3B;;ACrBA,IAAMiK,SAAO,GAA2B;AACtCgN,EAAAA,cAAc,EAAE;AADsB,CAAxC;AAIA,IAAMC,6BAA6B,gBAAGzY,aAAa,CACjDwL,SADiD,CAAnD;;ACEA,IAAMxR,WAAS,GAAGkH,UAAU,CAAC9B,cAAX,CAA0BpF,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC9B,cAAX,CAA0BmC,WAA9C;;AAiBA,IAAMnC,cAAc,GAA2C,SAAzDA,cAAyD,CAACtF,KAAD;MAE3DyE,OASEzE,MATFyE;MACA7E,WAQEI,MARFJ;MACA2M,eAOEvM,MAPFuM;MACAC,QAMExM,MANFwM;MACAC,WAKEzM,MALFyM;MACAH,iBAIEtM,MAJFsM;MACAhK,KAGEtC,MAHFsC;MACA6F,QAEEnI,MAFFmI;MACGsI,kCACDzQ;;oBACuB0Q,UAAU,CAACiO,6BAAD;MAA7BD,6BAAAA;;AACR,MAAMjN,WAAW,gBACZzR,KADY;AAEf0e,IAAAA,cAAc,EAAdA;AAFe,IAAjB;;AAIA,SAAO9e,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADa,GAEXqC,CAAC,CAACC,GAAF,CAAMwc,cAAN,eAAiCja,IAAjC,iBACF,oBAAC,QAAD,qBACE;AAAM,IAAA,EAAE,EAAE+H,KAAV;AAAiB,IAAA,KAAK,EAAEC,QAAxB;AAAkC,IAAA,SAAS,EAAEF;AAA7C,KAA+DkE,CAA/D,GACMhM,IADN,OADF,eAIE;AAAM,IAAA,EAAE,EAAEnC,EAAV;AAAc,IAAA,KAAK,EAAE6F,KAArB;AAA4B,IAAA,SAAS,EAAEmE;AAAvC,KAA2DmE,CAA3D,QACMiO,cAAc,CAAC,SAAD,CAAd,CAA0Bja,IAA1B,CADN,CAJF,CADE,GASA,IAXJ;AAYD,CA7BD;;AA+BAa,cAAc,CAACpF,SAAf,GAA2BA,WAA3B;AACAoF,cAAc,CAACmC,WAAf,GAA6BA,aAA7B;;ACnDA,IAAMvH,WAAS,GAAGkH,UAAU,CAACsF,eAAX,CAA2BxM,SAA7C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACsF,eAAX,CAA2B1C,YAAhD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACsF,eAAX,CAA2BjF,WAA/C;;AASA,IAAMiF,eAAe,GAA4C,SAA3DA,eAA2D,CAAC1M,KAAD;MACvDmF,cAAwDnF,MAAxDmF;MAAawH,QAA2C3M,MAA3C2M;MAAO/M,WAAoCI,MAApCJ;wBAAoCI,MAA1B4M;MAAAA,wCAAW;MAAS6D,kCAAMzQ;;oBAC3C0Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;AACR,MAAMqa,eAAe,GAA+B,CAAC3c,CAAC,CAAC+C,OAAF,CAAUT,QAAV,CAAD,GAChDA,QAAQ,CAAC,iBAAD,CAAR,GAA8BnC,OAA9B,EADgD,GAEhD,EAFJ;AAGA,MAAM8C,OAAO,GAAG0Z,eAAe,CAC5BpD,MADa,CACN,UAAC9X,CAAD;AACN;AACA,WAAOA,CAAC,CAAC0B,SAAF,GAAc9C,EAAd,KAAqB6C,WAA5B;AACD,GAJa,EAKblE,GALa,CAKT,UAACyC,CAAD,EAAIsR,CAAJ;AACH,QAAM6J,SAAS,GAAGjS,QAAQ,gBAAG,4BAAU6D,CAAV,EAAc9D,KAAK,IAAIjJ,CAAC,CAACe,IAAzB,CAAH,GAA2C,IAArE;AACA,QAAMqa,UAAU,GAAG;AACjBJ,MAAAA,cAAc,EAAEhb;AADC,KAAnB;AAGA,wBACE,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEsR;AAAf,OACG6J,SADH,eAEE,oBAAC,6BAAD,CAA+B,QAA/B;AAAwC,MAAA,KAAK,EAAEC;AAA/C,OACGlf,QADH,CAFF,CADF;AAQD,GAlBa,CAAhB;AAmBA,sBAAO,oBAAC,QAAD,QAAWsF,OAAX,CAAP;AACD,CA1BD;;AA4BAwH,eAAe,CAACxM,SAAhB,GAA4BA,WAA5B;AACAwM,eAAe,CAAC1C,YAAhB,GAA+BA,cAA/B;AACA0C,eAAe,CAACjF,WAAhB,GAA8BA,aAA9B;;AC9CA,IAAMvH,WAAS,GAAGkH,UAAU,CAACyF,gBAAX,CAA4B3M,SAA9C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACyF,gBAAX,CAA4B7C,YAAjD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACyF,gBAAX,CAA4BpF,WAAhD;;AAgBA,IAAMoF,gBAAgB,GAA6C,SAA7DA,gBAA6D,CAAC7M,KAAD;mBACpBA,MAArC8M;MAAAA,8BAAM;wBAA+B9M,MAA3B+M;MAAAA,wCAAW;MAAU0D,kCAAMzQ;;oBACxB0Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;qBACmBmM,UAAU,CAACkL,eAAD;MAA7BmD,8BAAAA;;AACR,MAAM7Z,OAAO,GAAgB,EAA7B;;AACA,OAAK,IAAI8Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIlS,GAArB,EAA0BkS,CAAC,EAA3B,EAA+B;AAC7B9Z,IAAAA,OAAO,CAACtD,IAAR,eACE;AAAQ,MAAA,GAAG,EAAEod,CAAb;AAAgB,MAAA,KAAK,OAAKA;AAA1B,OACGA,CADH,CADF;AAKD;;AACD,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAChC,CAAD;AACnB,QAAM5Y,QAAQ,GAAG6a,MAAM,CAACjC,CAAC,CAAChE,MAAF,CAASrT,KAAV,CAAvB;AACAmZ,IAAAA,cAAc,IAAIA,cAAc,CAACxa,QAAQ,CAAC,IAAD,CAAT,EAAiBF,QAAjB,CAAhC;AACD,GAHD;;AAIA,MAAMA,QAAQ,GAAGE,QAAQ,CAAC,UAAD,CAAzB;;AACA,MAAMkN,WAAW;AACfwN,IAAAA,YAAY,EAAZA,YADe;AAEf5a,IAAAA,QAAQ,EAARA;AAFe,KAGZrE,KAHY,CAAjB;;AAKA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,GAEHmN,QAAQ,gBACV,4BAAU0D,CAAV,EAAcpM,QAAd,CADU,gBAGV;AAAQ,IAAA,KAAK,EAAEA,QAAf;AAAyB,IAAA,QAAQ,EAAE4a;AAAnC,KAAqDxO,CAArD,GACGvL,OADH,CALF;AASD,CA/BD;;AAiCA2H,gBAAgB,CAAC3M,SAAjB,GAA6BA,WAA7B;AACA2M,gBAAgB,CAAC7C,YAAjB,GAAgCA,cAAhC;AACA6C,gBAAgB,CAACpF,WAAjB,GAA+BA,aAA/B;;ACrDA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC4F,kBAAX,CAA8B9M,SAAhD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC4F,kBAAX,CAA8BhD,YAAnD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC4F,kBAAX,CAA8BvF,WAAlD;;AAYA,IAAMuF,kBAAkB,GAA+C,SAAjEA,kBAAiE,CACrEhN,KADqE;qBAGxCA,MAArB2I;MAAAA,kCAAQ;;oBACK+H,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;qBACmBmM,UAAU,CAACkL,eAAD;MAA7BuD,8BAAAA;;AACR,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACnC,CAAD;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACAiC,IAAAA,cAAc,IAAIA,cAAc,CAAC5a,QAAQ,CAAC,IAAD,CAAT,CAAhC;AACD,GAHD;;AAIA,MAAMkN,WAAW;AACf2N,IAAAA,YAAY,EAAZA;AADe,KAEZpf,KAFY,CAAjB;;AAIA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,sCAAOI,KAAP;AAAc,IAAA,IAAI,EAAC,GAAnB;AAAuB,IAAA,OAAO,EAAEof;AAAhC,MACGzW,KADH,CAHF;AAOD,CArBD;;AAuBAqE,kBAAkB,CAAC9M,SAAnB,GAA+BA,WAA/B;AACA8M,kBAAkB,CAAChD,YAAnB,GAAkCA,cAAlC;AACAgD,kBAAkB,CAACvF,WAAnB,GAAiCA,aAAjC;;ACeO,IAAM4X,YAAY,GAAiB,SAA7BA,YAA6B,CAACxc,MAAD;MAChCc,QAAqCd,OAArCc;MAAOZ,WAA8BF,OAA9BE;MAAUC,SAAoBH,OAApBG;MAAQkK,UAAYrK,OAAZqK;AACjC,MAAIoS,YAAY,GAAyB,EAAzC;AACA3b,EAAAA,KAAK;AAEHA,EAAAA,KAAK,CACFH,eADH,CACmBR,MADnB,EAEGuD,SAFH,GAGGgR,KAHH,CAGSrK,OAHT,EAIGnJ,QAJH,CAIY,2BAJZ,EAKGqO,GALH,GAMGf,IANH;AAAA,8DAMQ,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJvO,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,YADC;AAEPE,gBAAAA,OAAO,EAAE;AACPkF,kBAAAA,OAAO,EAAE;AADF;AAFF,eAAD,CAAR;AAMMO,cAAAA,KAPF,GAOUiL,GAAG,CAAClP,OAAJ,EAPV;AAQJkd,cAAAA,YAAY,aAAOA,YAAP,EAAwBjZ,KAAxB,CAAZ;AACAtD,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,cADC;AAEPE,gBAAAA,OAAO,EAAE;AACP2F,kBAAAA,SAAS,EAAE+Y;AADJ;AAFF,eAAD,CAAR;AAMIC,cAAAA,OAfA,GAeUjO,GAfV;AAgBEkO,cAAAA,SAhBF,GAgBclO,GAAG,CAACkO,SAAJ,EAhBd;;AAAA,oBAiBAD,OAAO,CAACE,WAAR,MAAyBD,SAjBzB;AAAA;AAAA;AAAA;;AAkBOE,cAAAA,KAlBP,GAkBe,CAlBf;;AAAA;AAAA,oBAkBkBA,KAAK,GAAGF,SAlB1B;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAmBgBD,OAAO,CAAC/b,eAAR,CAAwBR,MAAxB,EAAgC2c,QAAhC,EAnBhB;;AAAA;AAmBAJ,cAAAA,OAnBA;AAoBMK,cAAAA,SApBN,GAoBkBL,OAAO,CAACnd,OAAR,EApBlB;AAqBAkd,cAAAA,YAAY,aAAOA,YAAP,EAAwBM,SAAxB,CAAZ;AACA7c,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,cADC;AAEPE,gBAAAA,OAAO,EAAE;AACP2F,kBAAAA,SAAS,EAAE+Y;AADJ;AAFF,eAAD,CAAR;;AAtBA;AAkBqCI,cAAAA,KAAK,EAlB1C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KANR;;AAAA;AAAA;AAAA;AAAA,gBAqCS,UAACxe,CAAD;AACL,QAAMc,MAAM,GAAGH,qBAAqB,CAACX,CAAD,EAAI,UAAJ,CAApC;AACA6B,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,WADC;AAEPE,MAAAA,OAAO,EAAE;AACPoB,QAAAA,MAAM,EAANA;AADO;AAFF,KAAD,CAAR;AAMD,GA7CH,CAFF;AAgDD,CAnDM;AAqDP,AAAO,IAAM+c,cAAc;AAAA,0EAAmB,kBAAOlc,MAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAE1CG,YAAAA,MAF0C,GASxCH,MATwC,CAE1CG,MAF0C,EAG1C6c,UAH0C,GASxChd,MATwC,CAG1Cgd,UAH0C,EAI1Cxb,QAJ0C,GASxCxB,MATwC,CAI1CwB,QAJ0C,EAK1CsM,QAL0C,GASxC9N,MATwC,CAK1C8N,QAL0C,EAM1CtN,OAN0C,GASxCR,MATwC,CAM1CQ,OAN0C,EAO1CN,QAP0C,GASxCF,MATwC,CAO1CE,QAP0C,EAQ1Cf,MAR0C,GASxCa,MATwC,CAQ1Cb,MAR0C;AAAA;AAAA;AAAA,mBAWnBsB,MAAM,CAACwB,QAAP,CAAgBtB,eAAhB,CAAgCR,MAAhC,EAAwCgB,IAAxC,CACrB6b,UADqB,CAXmB;;AAAA;AAWpCtb,YAAAA,QAXoC;AAAA;AAAA,mBAcrBA,QAAQ,CAACf,eAAT,CAAyBR,MAAzB,EAAiC+O,MAAjC,CAAwC;AAAE1N,cAAAA,QAAQ,EAARA;AAAF,aAAxC,CAdqB;;AAAA;AAcpC0N,YAAAA,MAdoC;;AAAA,gBAerCA,MAAM,CAAC/P,MAAP,GAAgBG,KAAhB,EAfqC;AAAA;AAAA;AAAA;;AAAA,kBAgBlC4P,MAhBkC;;AAAA;AAAA,2BAkB1CpB,QAlB0C;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkBvBA,QAAQ,CAACtN,OAAD,CAlBe;;AAAA;AAmB1C,gBAAI,CAACpB,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtBe,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,WADC;AAEPE,gBAAAA,OAAO,EAAE;AACPoB,kBAAAA,MAAM,EAAE;AADD;AAFF,eAAD,CAAR;AAMD;;AA1ByC;AAAA;;AAAA;AAAA;AAAA;AA4BpCA,YAAAA,OA5BoC,GA4B3BH,qBAAqB,eAAwB,UAAxB,CA5BM;AA6B1CkB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,WADC;AAEPE,cAAAA,OAAO,EAAE;AACPoB,gBAAAA,MAAM,EAANA;AADO;AAFF,aAAD,CAAR;;AA7B0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA,kBAAd+c,cAAc;AAAA;AAAA;AAAA,GAApB;AAsCP,AAAO,IAAMI,cAAc;AAAA,0EAAmB,kBAAOtc,MAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACpCG,YAAAA,MADoC,GACwBH,MADxB,CACpCG,MADoC,EAC5B6c,UAD4B,GACwBhd,MADxB,CAC5Bgd,UAD4B,EAChBlP,QADgB,GACwB9N,MADxB,CAChB8N,QADgB,EACNtN,OADM,GACwBR,MADxB,CACNQ,OADM,EACGN,QADH,GACwBF,MADxB,CACGE,QADH,EACaf,MADb,GACwBa,MADxB,CACab,MADb;AAAA;AAAA;AAAA,mBAGnBsB,MAAM,CAACwB,QAAP,CAAgBtB,eAAhB,CAAgCR,MAAhC,EAAwCgB,IAAxC,CACrB6b,UADqB,CAHmB;;AAAA;AAGpCtb,YAAAA,QAHoC;AAAA;AAAA,mBAMZA,QAAQ,CAACf,eAAT,CAAyBR,MAAzB,EAAiC8c,OAAjC,EANY;;AAAA;AAMpCC,YAAAA,eANoC;;AAAA,gBAOrCA,eAAe,CAAC/d,MAAhB,GAAyBG,KAAzB,EAPqC;AAAA;AAAA;AAAA;;AAAA,kBAQlC4d,eARkC;;AAAA;AAAA,2BAU1CpP,QAV0C;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAUvBA,QAAQ,CAACtN,OAAD,CAVe;;AAAA;AAW1C,gBAAI,CAACpB,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtBe,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,WADC;AAEPE,gBAAAA,OAAO,EAAE;AACPoB,kBAAAA,MAAM,EAAE;AADD;AAFF,eAAD,CAAR;AAMD;;AAlByC;AAAA;;AAAA;AAAA;AAAA;AAoBpCA,YAAAA,QApBoC,GAoB3BH,qBAAqB,eAAI,UAAJ,CApBM;AAqB1CkB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,WADC;AAEPE,cAAAA,OAAO,EAAE;AACPoB,gBAAAA,MAAM,EAANA;AADO;AAFF,aAAD,CAAR;;AArB0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA,kBAAdmd,cAAc;AAAA;AAAA;AAAA,GAApB;AA8BP,AAAO,IAAMa,oBAAoB,GAAkB;AACjDla,EAAAA,OAAO,EAAE,KADwC;AAEjDS,EAAAA,SAAS,EAAE,EAFsC;AAGjDvE,EAAAA,MAAM,EAAE;AAHyC,CAA5C;AAQP,IAAMW,YAAU,GAAyB,CACvC,cADuC,EAEvC,WAFuC,EAGvC,YAHuC,CAAzC;;AAMA,IAAMsd,eAAe,GAAG,SAAlBA,eAAkB,CACtB5f,KADsB,EAEtB2F,OAFsB;AAAA,SAItB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,YAHS,CAJW;AAAA,CAAxB;;ACjLA,IAAMzC,WAAS,GAAGkH,UAAU,CAAC6F,kBAAX,CAA8B/M,SAAhD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC6F,kBAAX,CAA8BjD,YAAnD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC6F,kBAAX,CAA8BxF,WAAlD;;AAQA,IAAMwF,kBAAkB,GAA0C,SAA5DA,kBAA4D,CAACjN,KAAD;MACxDJ,WAAkDI,MAAlDJ;uBAAkDI,MAAxCkN;MAAAA,sCAAU;sBAA8BlN,MAA1BmN;MAAAA,oCAAS;;oBACJuD,UAAU,CAACzK,YAAD;MAAvCtC,oBAAAA;MAAOgN,uBAAAA;MAAUtN,sBAAAA;;AACzB,MAAML,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAC0BC,UAAU,CAACgJ,eAAD,EAAkBD,oBAAlB;MAA7B3f;MAAO0C;;AACdgS,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUrB,KAAV,CAAL,EAAuB;AACrBA,MAAAA,KAAK,IACH0b,YAAY,CAAC;AACX1b,QAAAA,KAAK,EAALA,KADW;AAEXZ,QAAAA,QAAQ,EAARA,QAFW;AAGXC,QAAAA,MAAM,EAANA,MAHW;AAIXkK,QAAAA,OAAO,EAAPA;AAJW,OAAD,CADd;AAOD;;AACD,WAAO;AACL,UAAIjL,CAAC,CAAC+C,OAAF,CAAUrB,KAAV,CAAJ,EAAsB;AACpBZ,QAAAA,QAAQ,CAAC;AACPrC,UAAAA,IAAI,EAAE,cADC;AAEPE,UAAAA,OAAO,EAAE;AAAE2F,YAAAA,SAAS,EAAE;AAAb;AAFF,SAAD,CAAR;AAID;AACF,KAPD;AAQD,GAlBQ,EAkBN,CAAC5C,KAAD,CAlBM,CAAT;;AAmBA,MAAMuc,aAAa,gBACd7f,KADc;AAEjB8M,IAAAA,MAAM,EAANA,MAFiB;AAGjB4R,IAAAA,cAAc,EAAE,0BAACc,UAAD,EAAaxb,QAAb;AAAA,UAAaA,QAAb;AAAaA,QAAAA,QAAb,GAAwB,CAAxB;AAAA;;AAAA,aACd0a,cAAc,CAAC;AACbc,QAAAA,UAAU,EAAVA,UADa;AAEbxb,QAAAA,QAAQ,EAARA,QAFa;AAGbtB,QAAAA,QAAQ,EAARA,QAHa;AAIbC,QAAAA,MAAM,EAANA,MAJa;AAKb2N,QAAAA,QAAQ,EAARA,QALa;AAMbtN,QAAAA,OAAO,EAAPA,OANa;AAObrB,QAAAA,MAAM,EAAE3B,KAAK,CAAC2B;AAPD,OAAD,CADA;AAAA,KAHC;AAajBmd,IAAAA,cAAc,EAAE,0BAACU,UAAD;AAAA,aACdV,cAAc,CAAC;AACbU,QAAAA,UAAU,EAAVA,UADa;AAEb9c,QAAAA,QAAQ,EAARA,QAFa;AAGbC,QAAAA,MAAM,EAANA,MAHa;AAIb2N,QAAAA,QAAQ,EAARA,QAJa;AAKbtN,QAAAA,OAAO,EAAPA,OALa;AAMbrB,QAAAA,MAAM,EAAE3B,KAAK,CAAC2B;AAND,OAAD,CADA;AAAA;AAbC,IAAnB;;AAuBA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEke;AAAjC,KACG7f,KAAK,CAACyF,OAAN,GAAgBqH,MAAhB,GAAyBvN,QAD5B,CADF;AAKD,CApDD;;AAsDAqN,kBAAkB,CAAC/M,SAAnB,GAA+BA,WAA/B;AACA+M,kBAAkB,CAACjD,YAAnB,GAAkCA,cAAlC;AACAiD,kBAAkB,CAACxF,WAAnB,GAAiCA,aAAjC;;AC/EA,IAAM0Y,iBAAiB,GAA+B,SAAhDA,iBAAgD,CACpD5Z,SADoD,EAEpDlC,QAFoD;MAEpDA;AAAAA,IAAAA,WAAW;;;AAEX,MAAM+b,UAAU,GAAG,CAAC,MAAD,EAAS,YAAT,CAAnB;AACA7Z,EAAAA,SAAS,CACNiV,MADH,CACU,UAAC4C,CAAD;AAAA,WAAOgC,UAAU,CAACrc,QAAX,CAAoBqa,CAAC,CAACC,QAAtB,CAAP;AAAA,GADV,EAEGpd,GAFH,CAEO,UAACmd,CAAD;AACH/Z,IAAAA,QAAQ,IAAI+Z,CAAC,CAAC/Z,QAAd;AACD,GAJH;AAKA,SAAOA,QAAP;AACD,CAXD;;ACOA,IAAMnE,WAAS,GAAGkH,UAAU,CAACgG,cAAX,CAA0BlN,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACgG,cAAX,CAA0B3F,WAA9C;;AAYA,IAAM2F,cAAc,GAA2C,SAAzDA,cAAyD,CAACpN,KAAD;MACrDJ,WAAmBI,MAAnBJ;MAAa6Q,kCAAMzQ;;oBACL0Q,UAAU,CAACkL,eAAD;MAAxBrV,wBAAAA;;kBACwBsO,QAAQ,CAAC,CAAD;MAAjCxQ;MAAUsZ;;AACjB5I,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUuB,SAAV,CAAL,EAA2B;AACzB,UAAMyK,GAAG,GAAGmP,iBAAiB,CAAC5Z,SAAS,IAAI,EAAd,CAA7B;AACAoX,MAAAA,WAAW,CAAC3M,GAAD,CAAX;AACD;;AACD,WAAO;AACL2M,MAAAA,WAAW,CAAC,CAAD,CAAX;AACD,KAFD;AAGD,GARQ,EAQN,CAACpX,SAAD,CARM,CAAT;;AASA,MAAMkL,WAAW;AACfpN,IAAAA,QAAQ,EAARA;AADe,KAEZoM,CAFY,CAAjB;;AAIA,SAAO7Q,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb,4BAAU6Q,CAAV,EAAcpM,QAAd,CAHF;AAKD,CAtBD;;AAwBA+I,cAAc,CAAClN,SAAf,GAA2BA,WAA3B;AACAkN,cAAc,CAAC3F,WAAf,GAA6BA,aAA7B;;AC9CA,IAAMvH,WAAS,GAAGkH,UAAU,CAACiG,aAAX,CAAyBnN,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACiG,aAAX,CAAyB5F,WAA7C;;AAMA,IAAM4F,aAAa,GAA0C,SAAvDA,aAAuD,CAACrN,KAAD;AAC3D,sBAAO,oBAAC6W,WAAD;AAAW;AAAX,KAA6B7W,KAA7B,EAAP;AACD,CAFD;;AAIAqN,aAAa,CAACnN,SAAd,GAA0BA,WAA1B;AACAmN,aAAa,CAAC5F,WAAd,GAA4BA,aAA5B;;ACbO,IAAM4Y,aAAa,GAAkB,SAA/BA,aAA+B,CAAC5J,GAAD;AAC1C,SAAO6J,YAAY,CAACC,OAAb,CAAqB9J,GAArB,CAAP;AACD,CAFM;AAQP,AAAO,IAAMrT,aAAa,GAAkB,SAA/BA,aAA+B,CAACqT,GAAD,EAAM7Q,KAAN;AAC1C0a,EAAAA,YAAY,CAAC5C,OAAb,CAAqBjH,GAArB,EAA0B7Q,KAA1B;AACD,CAFM;AAQP,AAAO,IAAM9B,gBAAgB,GAAqB,SAArCA,gBAAqC,CAAC2S,GAAD;AAChD6J,EAAAA,YAAY,CAACE,UAAb,CAAwB/J,GAAxB;AACD,CAFM;;ACLP,IAAM/E,SAAO,GAAuB;AAClC5O,EAAAA,UAAU,EAAE,EADsB;AAElCe,EAAAA,eAAe,EAAE,IAFiB;AAGlCwc,EAAAA,aAAa,EAAbA,aAHkC;AAIlCjd,EAAAA,aAAa,EAAbA,aAJkC;AAKlCU,EAAAA,gBAAgB,EAAhBA;AALkC,CAApC;AAQA,IAAM2c,mBAAmB,gBAAGva,aAAa,CAAqBwL,SAArB,CAAzC;;ACGA,IAAMxR,WAAS,GAAGkH,UAAU,CAACkG,cAAX,CAA0BpN,SAA5C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACkG,cAAX,CAA0BtD,YAA/C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACkG,cAAX,CAA0B7F,WAA9C;;AASA,IAAM6F,cAAc,GAA2C,SAAzDA,cAAyD,CAACtN,KAAD;MACrDqD,UAA4CrD,MAA5CqD;MAASzD,WAAmCI,MAAnCJ;MAAUqD,WAAyBjD,MAAzBiD;MAAUsK,aAAevN,MAAfuN;;oBACX0J,UAAU,CAAClR,YAAD,EAAeF,iBAAf;MAA7BxF;MAAO0C;;AACd,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAOItG,UAAU,CAAC+P,mBAAD;MALZ3d,yBAAAA;MACAe,8BAAAA;MACAwc,4BAAAA;MACAjd,4BAAAA;MACAU,+BAAAA;;AAEFiR,EAAAA,SAAS,CAAC;AACR,QAAI/R,MAAM,CAAC+H,WAAX,EAAwB;AACtB,UAAM2V,UAAU,GAAG5d,UAAU,GAAGud,aAAa,CAACvd,UAAD,CAAhB,GAA+BO,OAA5D;;AACA,UAAIqd,UAAJ,EAAgB;AACd3d,QAAAA,QAAQ,CAAC;AACPrC,UAAAA,IAAI,EAAE,YADC;AAEPE,UAAAA,OAAO,EAAE;AACPyC,YAAAA,OAAO,EAAEqd;AADF;AAFF,SAAD,CAAR;;AAMA,YAAI,CAACrgB,KAAK,CAACsD,KAAX,EAAkB;AAChBC,UAAAA,WAAW,CAAC;AACVtB,YAAAA,EAAE,EAAEoe,UADM;AAEV3d,YAAAA,QAAQ,EAARA,QAFU;AAGVC,YAAAA,MAAM,EAANA,MAHU;AAIVF,YAAAA,UAAU,EAAVA,UAJU;AAKVe,YAAAA,eAAe,EAAfA,eALU;AAMVC,YAAAA,gBAAgB,EAAhBA;AANU,WAAD,CAAX;AAQD;AACF;AACF;;AACD,WAAO;AAAA,aAAY2B,eAAe,CAAC1C,QAAD,CAA3B;AAAA,KAAP;AACD,GAvBQ,EAuBN,CAACC,MAAM,CAAC+H,WAAR,CAvBM,CAAT;;AAwBA,MAAM4V,UAAU,gBACXtgB,KADW;AAEdsQ,IAAAA,QAAQ,EAAE,kBAACrO,EAAD;AAAA,aAAsBsB,WAAW,CAAC;AAAEtB,QAAAA,EAAE,EAAFA,EAAF;AAAMS,QAAAA,QAAQ,EAARA,QAAN;AAAgBC,QAAAA,MAAM,EAANA;AAAhB,OAAD,CAAjC;AAAA,KAFI;AAGd0C,IAAAA,cAAc,EAAE,0BAAC5D,UAAD;AAAA,aACd4D,cAAc,CAAC;AAAE3C,QAAAA,QAAQ,EAARA,QAAF;AAAYjB,QAAAA,UAAU,EAAVA;AAAZ,OAAD,CADA;AAAA,KAHF;AAKdc,IAAAA,WAAW;AAAA,yEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACLA,WAAW,CAAC;AAChBE,kBAAAA,UAAU,EAAVA,UADgB;AAEhBC,kBAAAA,QAAQ,EAARA,QAFgB;AAGhBC,kBAAAA,MAAM,EAANA,MAHgB;AAIhB3C,kBAAAA,KAAK,EAALA,KAJgB;AAKhB6C,kBAAAA,aAAa,EAAED,QALC;AAMhBE,kBAAAA,eAAe,EAAEoK;AAND,iBAAD,CADN;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,OALG;AAcdrJ,IAAAA,SAAS,EAAE,qBAACmP,MAAD;AAAA,aACTnP,SAAS,cACJmP,MADI;AAEPvQ,QAAAA,UAAU,EAAVA,UAFO;AAGPC,QAAAA,QAAQ,EAARA,QAHO;AAIP1C,QAAAA,KAAK,EAALA,KAJO;AAKP2C,QAAAA,MAAM,EAANA,MALO;AAMPhB,QAAAA,MAAM,EAAE3B,KAAK,CAAC2B,MANP;AAOPkB,QAAAA,aAAa,EAAED,QAAQ,IAAI,EAPpB;AAQPE,QAAAA,eAAe,EAAEoK,UARV;AASPnK,QAAAA,aAAa,EAAbA;AATO,SADA;AAAA,KAdG;AA0BduC,IAAAA,yBAAyB,EAAE,qCACzBjF,IADyB,EAEzBkF,KAFyB;AAAA,aAGtBD,yBAAyB,CAAC;AAAEjF,QAAAA,IAAI,EAAJA,IAAF;AAAQkF,QAAAA,KAAK,EAALA,KAAR;AAAe7C,QAAAA,QAAQ,EAARA;AAAf,OAAD,CAHH;AAAA;AA1Bb,IAAhB;;AA+BA,sBACE,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAE4d;AAA9B,KACG/gB,QADH,CADF;AAKD,CAvED;;AAyEA0N,cAAc,CAACpN,SAAf,GAA2BA,WAA3B;AACAoN,cAAc,CAACtD,YAAf,GAA8BA,cAA9B;AACAsD,cAAc,CAAC7F,WAAf,GAA6BA,aAA7B;;ACvGA,IAAMvH,WAAS,GAAGkH,UAAU,CAACoG,YAAX,CAAwBtN,SAA1C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACoG,YAAX,CAAwB/F,WAA5C;;AAQA,IAAM+F,YAAY,GAAyC,SAArDA,YAAqD,CAACxN,KAAD;MACjDJ,WAA2CI,MAA3CJ;8BAA2CI,MAAjC6D;MAAAA,qDAAkB;MAAS4M,kCAAMzQ;;AACnD,sBACE,oBAAC,mBAAD,CAAqB,QAArB;AACE,IAAA,KAAK,eACAyQ,CADA;AAEHrN,MAAAA,aAAa,EAAbA,aAFG;AAGHid,MAAAA,aAAa,EAAbA,aAHG;AAIHvc,MAAAA,gBAAgB,EAAhBA,gBAJG;AAKHD,MAAAA,eAAe,EAAfA;AALG;AADP,KASGjE,QATH,CADF;AAaD,CAfD;;AAiBA4N,YAAY,CAACtN,SAAb,GAAyBA,WAAzB;AACAsN,YAAY,CAAC/F,WAAb,GAA2BA,aAA3B;;AChCA,IAAMvH,WAAS,GAAG;AAChB0gB,EAAAA,eAAe,EAAE/gB,SAAS,CAACoI,MADX;AAEhB4Y,EAAAA,gBAAgB,EAAEhhB,SAAS,CAACoI;AAFZ,CAAlB;AAIA,IAAM+B,cAAY,GAAG;AACnB4W,EAAAA,eAAe,EAAE,EADE;AAEnBC,EAAAA,gBAAgB,EAAE;AAFC,CAArB;;AAUA,IAAMC,aAAa,GAAsC,SAAnDA,aAAmD,CAAC9gB,KAAD;AACvD,sBACE,oBAAC,QAAD,qBACE;AAAM,IAAA,SAAS,EAAEA,KAAK,CAACkI;AAAvB,KAAmClI,KAAK,CAAC4gB,eAAzC,CADF,EAEG5gB,KAAK,CAAC2N,WAAN,iBACC;AAAM,IAAA,SAAS,EAAE3N,KAAK,CAAC0N,gBAAN,IAA0B;AAA3C,KACG1N,KAAK,CAAC6gB,gBADT,CAHJ,CADF;AAUD,CAXD;;AAaAC,aAAa,CAAC5gB,SAAd,GAA0BA,WAA1B;AACA4gB,aAAa,CAAC9W,YAAd,GAA6BA,cAA7B;;ACXO,IAAM+W,kBAAkB,GAAuB,SAAzCA,kBAAyC,CAACC,SAAD,EAAYhhB,KAAZ;AACpD,MAAIiC,CAAC,CAAC+C,OAAF,CAAUgc,SAAV,CAAJ,EAA0B;AACxB,wBAAO,oBAAC,aAAD,EAAmBhhB,KAAnB,CAAP;AACD;;AACD,SAAOghB,SAAS,CAAC/f,GAAV,CAAc,UAACwP,CAAD,EAAIuE,CAAJ;AACnB,QAAMrH,WAAW,GACd,OAAO3N,KAAK,CAAC2N,WAAb,KAA6B,WAA7B,IACC8C,CAAC,CAACwQ,oBAAF,GAAyBxQ,CAAC,CAACyQ,WAD7B,IAEAlhB,KAAK,CAAC2N,WAHR;AAIA,wBACE,oBAAC,aAAD;AACE,MAAA,GAAG,EAAEqH;AADP,OAEMhV,KAFN;AAGE,MAAA,WAAW,EAAE2N,WAHf;AAIE,MAAA,eAAe,EAAE8C,CAAC,CAACmQ,eAJrB;AAKE,MAAA,gBAAgB,EAAEnQ,CAAC,CAAC0Q;AALtB,OADF;AASD,GAdM,CAAP;AAeD,CAnBM;;AAyBP,IAAMC,SAAS,GAAc,SAAvBA,SAAuB,CAAC9a,MAAD;AAC3B,MAAMgT,GAAG,GAAwB,EAAjC;;AACA,MAAIrX,CAAC,CAACS,OAAF,CAAU4D,MAAV,CAAJ,EAAuB;AACrBA,IAAAA,MAAM,CAACrF,GAAP,CAAW,UAACwP,CAAD;AACT,UAAIxO,CAAC,CAACC,GAAF,CAAMoX,GAAN,EAAW7I,CAAC,CAACtM,OAAb,CAAJ,EAA2B;AACzBmV,QAAAA,GAAG,CAAC7I,CAAC,CAACtM,OAAH,CAAH,CAAevC,IAAf,CAAoB6O,CAApB;AACD,OAFD,MAEO;AACL6I,QAAAA,GAAG,CAAC7I,CAAC,CAACtM,OAAH,CAAH,GAAiB,CAACsM,CAAD,CAAjB;AACD;AACF,KAND;AAOD,GARD,MAQO;AACLxO,IAAAA,CAAC,CAACof,OAAF,CAAU/a,MAAV,EAAkB,UAACF,IAAD;;;AAChB,UAAME,MAAM,mBAAGF,IAAI,CAACE,MAAL,EAAH,qBAAG,aAAelE,OAAf,EAAf;AACAkX,MAAAA,GAAG,CAAClT,IAAI,CAACrF,IAAN,CAAH,GAAiBuF,MAAjB;AACD,KAHD;AAID;;AACD,SAAOgT,GAAP;AACD,CAjBD;;ACVO,IAAMgI,iBAAiB,GAAe;AAC3Cxb,EAAAA,OAAO,EAAE,IADkC;AAE3CQ,EAAAA,MAAM,EAAE,EAFmC;AAG3CyJ,EAAAA,QAAQ,EAAE,EAHiC;AAI3C/N,EAAAA,MAAM,EAAE;AAJmC,CAAtC;AAqBP,AAAO,IAAMuf,YAAY,GAAiB,SAA7BA,YAA6B,CACxCxR,QADwC;MAEtC/M,cAAAA;MAAQD,gBAAAA;MAAU8a,iBAAAA;MAAWvX,cAAAA;MAAQuH,eAAAA;MAASX,eAAAA;AAEhD,MAAIsU,SAAS,GAAG,EAAhB;AACAle,EAAAA,MAAM,CAACmK,KAAP,CAAajK,eAAb,CAA6BR,MAA7B,EACGuU,KADH;AACWkK,IAAAA,SAAS,EAAE1R,QAAQ,CAACxI,IAAT,CAAc,GAAd;AADtB,KAC6C2F,OAD7C,GAEGW,OAFH,CAEWA,OAFX,EAGGuE,GAHH,GAIGf,IAJH;AAAA,+DAIQ,iBAAOqQ,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEC,cAAAA,SADF,GACcP,SAAS,CAACM,CAAC,CAACtf,OAAF,EAAD,CADvB;AAEJof,cAAAA,SAAS,gBAAQA,SAAR,EAAsBlb,MAAtB,EAAiCqb,SAAjC,CAAT;;AACA,kBAAI9D,SAAJ,EAAe;AACbA,gBAAAA,SAAS,CAAC2D,SAAD,CAAT;AACD;;AACDze,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,WADC;AAEPE,gBAAAA,OAAO,EAAE;AAAE0F,kBAAAA,MAAM,EAAEkb;AAAV;AAFF,eAAD,CAAR;AAIAze,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,YADC;AAEPE,gBAAAA,OAAO,EAAE;AAAEkF,kBAAAA,OAAO,EAAE;AAAX;AAFF,eAAD,CAAR;AAIM8b,cAAAA,IAdF,GAcSF,CAAC,CAACG,WAAF,EAdT;AAeAC,cAAAA,GAfA,GAeMJ,CAfN;;AAAA,oBAgBAI,GAAG,CAACrC,WAAJ,MAAqBmC,IAAI,CAACpC,SAhB1B;AAAA;AAAA;AAAA;;AAiBO/I,cAAAA,GAjBP,GAiBa,CAjBb;;AAAA;AAAA,oBAiBgBA,GAAG,GAAGmL,IAAI,CAACpC,SAjB3B;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAkBYsC,GAAG,CAACte,eAAJ,CAAoBR,MAApB,EAA4B2c,QAA5B,EAlBZ;;AAAA;AAkBAmC,cAAAA,GAlBA;AAmBMH,cAAAA,UAnBN,GAmBkBP,SAAS,CAACU,GAAG,CAAC1f,OAAJ,EAAD,CAnB3B;AAoBAof,cAAAA,SAAS,gBAAQA,SAAR,EAAsBG,UAAtB,CAAT;;AACA,kBAAI9D,SAAJ,EAAe;AACbA,gBAAAA,SAAS,CAAC2D,SAAD,CAAT;AACD;;AACDze,cAAAA,QAAQ,CAAC;AACPrC,gBAAAA,IAAI,EAAE,WADC;AAEPE,gBAAAA,OAAO,EAAE;AAAE0F,kBAAAA,MAAM,EAAEkb;AAAV;AAFF,eAAD,CAAR;;AAxBA;AAiBsC/K,cAAAA,GAAG,EAjBzC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAJR;;AAAA;AAAA;AAAA;AAAA,gBAmCS,UAACvV,CAAD;AACL,QAAMc,MAAM,GAAGH,qBAAqB,CAACX,CAAD,EAAI,OAAJ,CAApC;AACA6B,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,WADC;AAEPE,MAAAA,OAAO,EAAE;AACPoB,QAAAA,MAAM,EAANA;AADO;AAFF,KAAD,CAAR;AAMD,GA3CH;AA4CD,CAjDM;AAuDP,AAAO,IAAM+f,eAAe,GAAoB,SAAnCA,eAAmC,CAAChf,QAAD;AAC9CA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,WADC;AAEPE,IAAAA,OAAO,EAAE;AACP0F,MAAAA,MAAM,EAAE;AADD;AAFF,GAAD,CAAR;AAMAvD,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,YADC;AAEPE,IAAAA,OAAO,EAAE;AAAEkF,MAAAA,OAAO,EAAE;AAAX;AAFF,GAAD,CAAR;AAID,CAXM;AAmBP,IAAMiS,YAAU,GAAsB,CACpC,YADoC,EAEpC,WAFoC,EAGpC,aAHoC,EAIpC,WAJoC,CAAtC;;AAOA,IAAMiK,YAAY,GAAG,SAAfA,YAAe,CAAC3hB,KAAD,EAAoB2F,OAApB;AAAA,SACnB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGT+R,YAHS,CADQ;AAAA,CAArB;;ACnIA,IAAMkK,aAAa,gBAAG/b,aAAa,CAACob,iBAAD,CAAnC;;ACQA,IAAMphB,WAAS,GAAGkH,UAAU,CAACqG,KAAX,CAAiBvN,SAAnC;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACqG,KAAX,CAAiBzD,YAAtC;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACqG,KAAX,CAAiBhG,WAArC;;AAgBA,IAAMgG,KAAK,GAAkC,SAAvCA,KAAuC,CAACzN,KAAD;MACnCJ,WAA2BI,MAA3BJ;uBAA2BI,MAAjBmE;MAAAA,sCAAU;;oBAQxBuM,UAAU,CAACuR,aAAD;MANZ3b,qBAAAA;MACS4b,4BAAT/d;MACA2B,sBAAAA;MACAiK,uBAAAA;MACAoS,0BAAAA;MACAhV,qBAAAA;;kBAEgC0H,QAAQ,CAAoB,EAApB;MAAnCmM;MAAWoB;;AAClB,MAAMtR,KAAK,GAAGoR,aAAa,IAAI/d,OAA/B;AACA4Q,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUsB,MAAV,CAAD,IAAsBrE,CAAC,CAACC,GAAF,CAAMoE,MAAN,OAAiBwK,KAAjB,CAA1B,EAAqD;AACnDsR,MAAAA,YAAY,CAAC9b,MAAM,CAACwK,KAAD,CAAP,CAAZ;AACD,KAFD,MAEO;AACL,UAAIA,KAAK,IAAI7O,CAAC,CAACxB,OAAF,CAAUsP,QAAV,EAAoBe,KAApB,MAA+B,CAAC,CAA7C,EAAgD;AAC9Cf,QAAAA,QAAQ,CAACnO,IAAT,CAAckP,KAAd;AACAqR,QAAAA,WAAW,IAAIA,WAAW,CAACpS,QAAD,CAA1B;AACD;AACF;;AACD,WAAO;AACLqS,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACD,KAFD;AAGD,GAZQ,EAYN,CAAC9b,MAAD,EAASwK,KAAT,CAZM,CAAT;;AAaA,MAAMW,WAAW;AACf3L,IAAAA,OAAO,EAAPA,OADe;AAEfqH,IAAAA,MAAM,EAANA;AAFe,KAGZnN,KAHY,CAAjB;;AAKA,MAAMqiB,eAAe,GACnBpgB,CAAC,CAAC+C,OAAF,CAAUsB,MAAV,KAAqBrE,CAAC,CAAC+C,OAAF,CAAUgc,SAAV,CAArB,GACI,IADJ,GAEID,kBAAkB,CAACC,SAAD,EAAYhhB,KAAZ,CAHxB;AAIA,SAAOJ,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb,oBAAC,QAAD,QACGkG,OAAO,IAAI7D,CAAC,CAAC+C,OAAF,CAAUqd,eAAV,CAAX,GAAwClV,MAAxC,GAAiDkV,eADpD,CAHF;AAOD,CAzCD;;AA2CA5U,KAAK,CAACvN,SAAN,GAAkBA,WAAlB;AACAuN,KAAK,CAACzD,YAAN,GAAqBA,cAArB;AACAyD,KAAK,CAAChG,WAAN,GAAoBA,aAApB;;ACzDA,IAAMvH,WAAS,GAAGkH,UAAU,CAACwG,eAAX,CAA2B1N,SAA7C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACwG,eAAX,CAA2B5D,YAAhD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACwG,eAAX,CAA2BnG,WAA/C;;AAUA,IAAMmG,eAAe,GAA4C,SAA3DA,eAA2D,CAAC5N,KAAD;MAE7DJ,WAKEI,MALFJ;uBAKEI,MAJFmE;MAAAA,sCAAU;sBAIRnE,MAHFmN;MAAAA,oCAAS;uBAGPnN,MAFF6N;MAAAA,sCAAU;uBAER7N,MADFkN;MAAAA,sCAAU;;oBAEc+J,UAAU,CAAC+K,YAAD,EAAeV,iBAAf;MAA7BjhB;MAAO0C;;AACd,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAOItG,UAAU,CAAClK,WAAD;MALZqX,wBAAAA;MACAvX,qBAAAA;MACAD,oBAAAA;MACMic,0BAANlc;MACSyK,0BAAT1M;;AAEF,MAAIlC,CAAC,CAACxB,OAAF,CAAUJ,KAAK,CAAC0P,QAAhB,EAA0B5L,OAA1B,MAAuC,CAAC,CAAxC,IAA6CA,OAAjD,EACE9D,KAAK,CAAC0P,QAAN,CAAenO,IAAf,CAAoBuC,OAApB;AACF,MAAM2M,KAAK,GAAGrK,iBAAiB,CAAC6b,WAAD,CAAjB,IAAkCne,OAAlC,IAA6C0M,WAA7C,IAA4D,EAA1E;;AACA,MAAMsR,WAAW,GAAqB,SAAhCA,WAAgC,CAACpS,QAAD;AACpChN,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,aADC;AAEPE,MAAAA,OAAO,EAAE;AAAEmP,QAAAA,QAAQ,EAARA;AAAF;AAFF,KAAD,CAAR;AAID,GALD;;AAMAgF,EAAAA,SAAS,CAAC;AACR,QAAIuN,WAAW,IAAIrgB,CAAC,CAACC,GAAF,CAAMoE,MAAN,EAAcwK,KAAd,CAAnB,EAAyC;AACvC/N,MAAAA,QAAQ,CAAC;AACPrC,QAAAA,IAAI,EAAE,WADC;AAEPE,QAAAA,OAAO,EAAE;AAAE0F,UAAAA,MAAM,EAAEA;AAAV;AAFF,OAAD,CAAR;AAID;;AACD,QAAI,CAACrE,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqBpE,CAAC,CAAC+C,OAAF,CAAUsd,WAAV,CAAzB,EAAiD;AAC/C,UAAM7R,CAAC,GAAG2Q,SAAS,CAAC/a,KAAD,CAAnB;AACAtD,MAAAA,QAAQ,CAAC;AACPrC,QAAAA,IAAI,EAAE,WADC;AAEPE,QAAAA,OAAO,EAAE;AAAE0F,UAAAA,MAAM,EAAEmK;AAAV;AAFF,OAAD,CAAR;AAID;;AACD,QACGzN,MAAM,CAAC+H,WAAP,IAAsB9I,CAAC,CAAC+C,OAAF,CAAUsd,WAAV,CAAvB,IACCtf,MAAM,CAAC+H,WAAP,IAAsB,CAAC9I,CAAC,CAACC,GAAF,CAAMoE,MAAN,EAAcwK,KAAd,CAF1B,EAGE;AACA,UAAIzQ,KAAK,CAAC0P,QAAN,CAAepO,MAAf,GAAwB,CAAxB,IAA6BwC,OAAjC,EAA0C;AACxCod,QAAAA,YAAY,CAAEzQ,KAAK,IAAI,CAACA,KAAD,CAAV,IAAsBzQ,KAAK,CAAC0P,QAA7B,EAAuC;AACjD/M,UAAAA,MAAM,EAANA,MADiD;AAEjDD,UAAAA,QAAQ,EAARA,QAFiD;AAGjD8a,UAAAA,SAAS,EAATA,SAHiD;AAIjDvX,UAAAA,MAAM,EAANA,MAJiD;AAKjDuH,UAAAA,OAAO,EAAPA,OALiD;AAMjDX,UAAAA,OAAO,EAAPA;AANiD,SAAvC,CAAZ;AAQD;AACF;;AACD,WAAO;AACL,UAAIjL,CAAC,CAAC+C,OAAF,CAAUsd,WAAV,CAAJ,EAA4B;AAC1BP,QAAAA,eAAe,CAAChf,QAAD,CAAf;AACD;AACF,KAJD;AAKD,GAlCQ,EAkCN,CAACC,MAAM,CAAC+H,WAAR,EAAqBuX,WAArB,EAAkCxR,KAAlC,CAlCM,CAAT;;AAmCA,MAAMyR,UAAU,gBACXliB,KADW;AAEd8D,IAAAA,OAAO,EAAE2M,KAFK;AAGd3D,IAAAA,MAAM,EAANA,MAHc;AAIdgV,IAAAA,WAAW,EAAXA;AAJc,IAAhB;;AAMA,sBACE,oBAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAEI;AAA/B,KACG3iB,QADH,CADF;AAKD,CAxED;;AA0EAgO,eAAe,CAAC1N,SAAhB,GAA4BA,WAA5B;AACA0N,eAAe,CAAC5D,YAAhB,GAA+BA,cAA/B;AACA4D,eAAe,CAACnG,WAAhB,GAA8BA,aAA9B;;AC/FA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC0G,gBAAX,CAA4B5N,SAA9C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC0G,gBAAX,CAA4B9D,YAAjD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC0G,gBAAX,CAA4BrG,WAAhD;;AAmBA,IAAMqG,gBAAgB,GAA6C,SAA7DA,gBAA6D,CAAC9N,KAAD;;;MACzDmE,UAAqDnE,MAArDmE;MAASqM,YAA4CxQ,MAA5CwQ;MAAW5Q,WAAiCI,MAAjCJ;mBAAiCI,MAAvB+N;MAAAA,8BAAM;MAAGjB,MAAc9M,MAAd8M;MAAQ2D,kCAAMzQ;;oBAQzD0Q,UAAU,CAAClK,WAAD;MANZJ,mBAAAA;MACAuX,0BAAAA;MACAtX,oBAAAA;MACAhC,uBAAAA;MACAiC,qBAAAA;MACSuK,0BAAT1M;;qBAE4BuM,UAAU,CAACP,eAAD;MAAhCT,wBAAAA;MAAUD,uBAAAA;;kBACQoF,QAAQ,CAAC9G,GAAD;MAA3BnI;MAAO0Q;;mBACkBzB,QAAQ,CAAC,CAAC,CAACpE,CAAC,CAACtG,QAAL;MAAjCA;MAAUqY;;AACjB,MAAM1R,KAAK,GACT,CAAC7O,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqBlC,OAArB,qBACIkC,KAAK,CAAClC,OAAD,CADT,qBACI,eAAgBpD,IADpB,GAEIoD,OAAO,IAAIsC,iBAAiB,CAACL,IAAD,CAA5B,IAAuCyK,WAH7C;AAKA,MAAM8G,SAAS,GAAG1V,CAAC,CAAC+C,OAAF,CAAUoB,IAAV,IAAkB,EAAlB,kBAAuBA,IAAI,CAAC0K,KAAD,CAA3B,8CAAuB,YAAa6G,SAApC,qBAAuB,sBAAwBtT,QAAjE;AACA,MAAMoe,MAAM,GAAG3V,GAAG,IAAI6K,SAAtB;AACA5C,EAAAA,SAAS,CAAC;AACRuB,IAAAA,QAAQ,CAACvI,GAAD,CAAR;;AACA,QAAI,CAACzH,MAAM,CAACwK,KAAD,CAAP,IAAkB,CAACA,KAAvB,EAA8B;AAC5B0R,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD;;AACDhS,IAAAA,SAAS,IAAIgS,WAAW,CAAC,KAAD,CAAxB;;AACA,QAAI1R,KAAJ,EAAW;AAAA;;AACT,UAAME,GAAG,GAAGkO,MAAM,CAACnR,GAAD,CAAlB;AACA4P,MAAAA,WAAW,IAAIA,WAAW,cAAMtZ,QAAN,kCAAoByM,KAApB,IAA8BE,GAA9B,cAA1B;AACA,UAAI,CAAC/O,CAAC,CAAC+C,OAAF,CAAUsB,MAAV,CAAD,IAAsBrE,CAAC,CAACC,GAAF,CAAMoE,MAAN,EAAcwK,KAAd,CAA1B,EAAgD0R,WAAW,CAAC,KAAD,CAAX;AACjD;;AACD,WAAO;AACLlM,MAAAA,QAAQ,CAACvI,GAAD,CAAR;AACD,KAFD;AAGD,GAdQ,EAcN,CAAC3H,IAAD,EAAOqJ,OAAP,EAAgBnJ,MAAhB,CAdM,CAAT;;AAeA,MAAM2Y,YAAY,GAAG,SAAfA,YAAe,CAAChC,CAAD;AACnB,QAAMjM,GAAG,GAAGkO,MAAM,CAACjC,CAAC,CAAChE,MAAF,CAASrT,KAAV,CAAlB;AACA,QAAM8c,KAAK,GAAGxD,MAAM,CAAClO,GAAD,CAAN,IAAekO,MAAM,CAACnR,GAAD,CAArB,IAA8BmR,MAAM,CAAClO,GAAD,CAAN,IAAekO,MAAM,CAACuD,MAAD,CAAjE;AACAnM,IAAAA,QAAQ,CAACtF,GAAD,CAAR;;AACA,QAAI,CAAC/O,CAAC,CAAC+C,OAAF,CAAU0K,QAAV,CAAD,IAAwBc,SAAxB,IAAqCkS,KAAzC,EAAgD;AAAA;;AAC9C/E,MAAAA,WAAW,IAAIA,WAAW,cAAMtZ,QAAN,kCAAoBmM,SAApB,IAAkC0O,MAAM,CAAClO,GAAD,CAAxC,cAA1B;AACD,KAFD,MAEO,IAAIF,KAAK,IAAI4R,KAAb,EAAoB;AAAA;;AACzB/E,MAAAA,WAAW,IAAIA,WAAW,cAAMtZ,QAAN,kCAAoByM,KAApB,IAA8BoO,MAAM,CAAClO,GAAD,CAApC,cAA1B;AACD;AACF,GATD;;AAUA,MAAM2R,UAAU,GAAG,SAAbA,UAAa,CAAC1F,CAAD;AACjB,QAAMjM,GAAG,GAAGiM,CAAC,CAAChE,MAAF,CAASrT,KAArB;AACA,QAAM8c,KAAK,GAAGxD,MAAM,CAAClO,GAAD,CAAN,IAAekO,MAAM,CAACnR,GAAD,CAArB,IAA8BmR,MAAM,CAAClO,GAAD,CAAN,IAAekO,MAAM,CAACuD,MAAD,CAAjE;;AACA,QAAI,CAACC,KAAL,EAAY;AACV,UAAME,QAAQ,GAAG1D,MAAM,CAAClO,GAAD,CAAN,GAAckO,MAAM,CAACnR,GAAD,CAApB,GAA4BA,GAA5B,GAAkC0U,MAAnD;AACAnM,MAAAA,QAAQ,CAACsM,QAAD,CAAR;;AACA,UAAI,CAAC3gB,CAAC,CAAC+C,OAAF,CAAU0K,QAAV,CAAD,IAAwBc,SAA5B,EAAuC;AAAA;;AACrCmN,QAAAA,WAAW,IACTA,WAAW,cAAMtZ,QAAN,kCAAoBmM,SAApB,IAAkC0O,MAAM,CAAC0D,QAAD,CAAxC,cADb;AAED,OAHD,MAGO;AAAA;;AACLjF,QAAAA,WAAW,IACTA,WAAW,cAAMtZ,QAAN,kCAAoByM,KAApB,IAA8BoO,MAAM,CAAC0D,QAAD,CAApC,cADb;AAED;AACF;AACF,GAdD;;AAeA,MAAMnR,WAAW;AACf1D,IAAAA,GAAG,EAAHA,GADe;AAEfjB,IAAAA,GAAG,EAAE2V,MAFU;AAGftY,IAAAA,QAAQ,EAARA,QAHe;AAIf8U,IAAAA,YAAY,EAAZA,YAJe;AAKf0D,IAAAA,UAAU,EAAVA,UALe;AAMf/c,IAAAA,KAAK,EAALA;AANe,KAOZ5F,KAPY,CAAjB;;AASA,SAAOJ,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,GAAG,EAAE6iB,MAFP;AAGE,IAAA,GAAG,EAAE1U,GAHP;AAIE,IAAA,KAAK,EAAEnI,KAAK,IAAI,EAJlB;AAKE,IAAA,QAAQ,EAAEuE,QALZ;AAME,IAAA,QAAQ,EAAE8U,YANZ;AAOE,IAAA,MAAM,EAAE0D;AAPV,KAQMlS,CARN,EAHF;AAcD,CAnFD;;AAqFA3C,gBAAgB,CAAC5N,SAAjB,GAA6BA,WAA7B;AACA4N,gBAAgB,CAAC9D,YAAjB,GAAgCA,cAAhC;AACA8D,gBAAgB,CAACrG,WAAjB,GAA+BA,aAA/B;;AChHO,IAAMob,wBAAwB,GAA6B,SAArDA,wBAAqD;MAChErP,sBAAAA;MACAE,wBAAAA;MACA1R,cAAAA;;AAEA,MAAI8gB,cAAc,GAAG,CAAC7gB,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAD,IAAsBC,CAAC,CAAC+C,OAAF,CAAUwO,cAAV,CAA3C;;AACA,MAAIvR,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,KAAqB,CAACC,CAAC,CAAC+C,OAAF,CAAUwO,cAAV,CAA1B,EAAqD;AACnDsP,IAAAA,cAAc,GAAG,CAAC,EAAEtP,cAAc,IAAIqJ,WAAW,CAACrJ,cAAD,CAA/B,CAAlB;AACD;;AACD,MACEsP,cAAc,IACd,CAAC7gB,CAAC,CAAC+C,OAAF,CAAU0O,gBAAV,CADD,IAEAzR,CAAC,CAAC+C,OAAF,CAAUwO,cAAV,CAHF,EAIE;AACAsP,IAAAA,cAAc,GAAG,KAAjB;AACD;;AACD,SAAOA,cAAP;AACD,CAjBM;AA2BP,AAAO,IAAMC,yBAAyB,GAA8B,SAAvDA,yBAAuD;MAClED,uBAAAA;MACA9gB,eAAAA;MACAsI,+BAAAA;MACAmJ,wBAAAA;MACAE,0BAAAA;AAEA,MAAIqP,eAAe,GAAG,CAAC,EAAE,CAACF,cAAD,IAAmBxY,sBAArB,CAAvB;;AACA,MAAI0Y,eAAe,IAAI/gB,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAnB,IAAwC,CAACC,CAAC,CAAC+C,OAAF,CAAUyO,eAAV,CAA7C,EAAyE;AACvEuP,IAAAA,eAAe,GAAG,CAAC,EAAEvP,eAAe,IAAIoJ,WAAW,CAACpJ,eAAD,CAAhC,CAAnB;AACD;;AACD,MACEuP,eAAe,IACf,CAAC/gB,CAAC,CAAC+C,OAAF,CAAU2O,iBAAV,CADD,IAEA1R,CAAC,CAAC+C,OAAF,CAAUyO,eAAV,CAHF,EAIE;AACAuP,IAAAA,eAAe,GAAG,KAAlB;AACD;;AACD,SAAOA,eAAP;AACD,CAnBM;AA+BP,AAAO,IAAMC,qBAAqB,GAA0B,SAA/CA,qBAA+C;MAC1D3Q,kBAAAA;MACAkB,uBAAAA;MACAE,yBAAAA;MACAwP,wBAAAA;MACA5Y,+BAAAA;MACAmJ,wBAAAA;MACAE,0BAAAA;;AAEA,MACEuP,eAAe,IACf,CAACjhB,CAAC,CAAC+C,OAAF,CAAUsN,SAAV,CADD,IAEAoB,gBAFA,IAGA,CAACpJ,sBAJH,EAKE;AACA,QAAM6Y,aAAa,GAAG7Q,SAAH,oBAAGA,SAAS,CAAEtO,IAAX,CACpB,UAACof,CAAD;AAAA,aACE,CAACA,CAAC,CAAC9gB,EAAF,KAASoR,gBAAT,IAA6B0P,CAAC,CAACvP,SAAF,KAAgBH,gBAA9C,KACA0P,CAAC,CAAC3N,WAAF,KAAkByN,eAFpB;AAAA,KADoB,CAAtB;AAKA,QAAI,CAACjhB,CAAC,CAAC+C,OAAF,CAAUme,aAAV,CAAL,EAA+B,OAAO,IAAP;AAChC;;AACD,MACED,eAAe,IACf,CAACjhB,CAAC,CAAC+C,OAAF,CAAUwO,cAAV,CADD,IAEA,CAAClJ,sBAHH,EAIE;AACA,WAAO,CAAAkJ,cAAc,QAAd,YAAAA,cAAc,CAAG,cAAH,CAAd,MAAqC0P,eAA5C;AACD;;AACD,MACEA,eAAe,IACf,CAACjhB,CAAC,CAAC+C,OAAF,CAAUyO,eAAV,CADD,IAEAnJ,sBAHF,EAIE;AACA,WAAO,CAAAmJ,eAAe,QAAf,YAAAA,eAAe,CAAG,cAAH,CAAf,MAAsCyP,eAA7C;AACD;;AACD,MACEA,eAAe,IACf,CAACjhB,CAAC,CAAC+C,OAAF,CAAUsN,SAAV,CADD,IAEAqB,iBAFA,IAGArJ,sBAJF,EAKE;AACA,QAAM6Y,cAAa,GAAG7Q,SAAH,oBAAGA,SAAS,CAAEtO,IAAX,CACpB,UAACof,CAAD;AAAA,aACE,CAACA,CAAC,CAAC9gB,EAAF,KAASqR,iBAAT,IAA8ByP,CAAC,CAACvP,SAAF,KAAgBF,iBAA/C,KACAyP,CAAC,CAAC3N,WAAF,KAAkByN,eAFpB;AAAA,KADoB,CAAtB;;AAKA,QAAI,CAACjhB,CAAC,CAAC+C,OAAF,CAAUme,cAAV,CAAL,EAA+B,OAAO,IAAP;AAChC;;AACD,SAAO,KAAP;AACD,CAlDM;;ACtDP,IAAMjjB,WAAS,GAAGkH,UAAU,CAAC4G,mBAAX,CAA+B9N,SAAjD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC4G,mBAAX,CAA+BhE,YAApD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC4G,mBAAX,CAA+BvG,WAAnD;;AAYA,IAAMuG,mBAAmB,GAAgD,SAAnEA,mBAAmE,CACvEhO,KADuE;MAIrEJ,WAMEI,MANFJ;qBAMEI,MALF2I;MAAAA,kCAAQ;MACRnG,WAIExC,MAJFwC;wBAIExC,MAHFmK;MAAAA,wCAAW;MACX8D,UAEEjO,MAFFiO;MACGwC,kCACDzQ;;oBASA0Q,UAAU,CAACkE,gBAAD;MAPZ5S,qBAAAA;MACAwR,6BAAAA;MACAlJ,qCAAAA;MACAmJ,8BAAAA;MACAF,4BAAAA;MACAG,+BAAAA;MACAC,gCAAAA;;qBAEgBjD,UAAU,CAACzK,YAAD;MAApBtC,qBAAAA;;qBACc+M,UAAU,CAACiC,eAAD;MAAxBL,yBAAAA;;AACR,MAAMwQ,cAAc,GAAGD,wBAAwB,CAAC;AAC9CrP,IAAAA,cAAc,EAAdA,cAD8C;AAE9CxR,IAAAA,MAAM,EAANA,MAF8C;AAG9C0R,IAAAA,gBAAgB,EAAhBA;AAH8C,GAAD,CAA/C;AAKA,MAAMsP,eAAe,GAAGD,yBAAyB,CAAC;AAChDD,IAAAA,cAAc,EAAdA,cADgD;AAEhD9gB,IAAAA,MAAM,EAANA,MAFgD;AAGhDsI,IAAAA,sBAAsB,EAAtBA,sBAHgD;AAIhDmJ,IAAAA,eAAe,EAAfA,eAJgD;AAKhDE,IAAAA,iBAAiB,EAAjBA;AALgD,GAAD,CAAjD;AAOA,MAAM0P,kBAAkB,GAAGJ,qBAAqB,CAAC;AAC/CC,IAAAA,eAAe,EAAEvf,KAAF,oBAAEA,KAAK,CAAE6R,uBADuB;AAE/ClD,IAAAA,SAAS,EAATA,SAF+C;AAG/ChI,IAAAA,sBAAsB,EAAtBA,sBAH+C;AAI/CoJ,IAAAA,gBAAgB,EAAhBA,gBAJ+C;AAK/CF,IAAAA,cAAc,EAAdA,cAL+C;AAM/CC,IAAAA,eAAe,EAAfA,eAN+C;AAO/CE,IAAAA,iBAAiB,EAAjBA;AAP+C,GAAD,CAAhD;AASA,MAAM2P,OAAO,GACXnZ,QAAQ,IAAI2Y,cAAZ,IAA8BE,eAA9B,IAAiDK,kBADnD;;AAEA,MAAMtS,WAAW;AAAA,8DAAG;AAAA;AAAA;AAAA;AAAA;AAAA,oBACd9O,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,KAAqB,CAACshB,OADR;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEV/P,aAAa,EAFH;;AAAA;AAGhBtF,cAAAA,OAAO,IAAIA,OAAO,EAAlB;;AAHgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAX8C,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAMA,MAAMU,WAAW,gBACZhB,CADY;AAEf9H,IAAAA,KAAK,EAALA,KAFe;AAGfnG,IAAAA,QAAQ,EAARA,QAHe;AAIfuO,IAAAA,WAAW,EAAXA,WAJe;AAKf5G,IAAAA,QAAQ,EAAEmZ;AALK,IAAjB;;AAOA,SAAO1jB,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAE0jB,OAAhC;AAAyC,IAAA,OAAO,EAAEvS;AAAlD,KAAmEN,CAAnE,GACG9H,KADH,CAHF;AAOD,CAjED;;AAmEAqF,mBAAmB,CAAC9N,SAApB,GAAgCA,WAAhC;AACA8N,mBAAmB,CAAChE,YAApB,GAAmCA,cAAnC;AACAgE,mBAAmB,CAACvG,WAApB,GAAkCA,aAAlC;;AC1FA,IAAMvH,WAAS,GAAGkH,UAAU,CAACiH,kBAAX,CAA8BnO,SAAhD;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACiH,kBAAX,CAA8BrE,YAAnD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACiH,kBAAX,CAA8B5G,WAAlD;;AAYA,IAAM4G,kBAAkB,GAA+C,SAAjEA,kBAAiE,CACrErO,KADqE;MAG7DJ,WAAgEI,MAAhEJ;qBAAgEI,MAAtD2I;MAAAA,kCAAQ;MAAQnG,WAAsCxC,MAAtCwC;MAAU2H,WAA4BnK,MAA5BmK;MAAU8D,UAAkBjO,MAAlBiO;MAAYwC,kCAAMzQ;;oBACpB0Q,UAAU,CAC5DiC,eAD4D;MAAtD3Q,qBAAAA;MAAQ6P,+BAAAA;MAAkBC,4BAAAA;;AAGlC,MAAMwR,OAAO,GAAGnZ,QAAQ,IAAI,CAAClI,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAb,IAAkCC,CAAC,CAAC+C,OAAF,CAAU8M,aAAV,CAAlD;;AACA,MAAMf,WAAW;AAAA,8DAAG;AAAA;AAAA;AAAA;AAAA;AAAA,oBACd9O,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,KAAqB,CAACshB,OADR;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEVzR,gBAAgB,CAACC,aAAD,CAFN;;AAAA;AAGhB7D,cAAAA,OAAO,IAAIA,OAAO,EAAlB;;AAHgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAX8C,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAMA,MAAMU,WAAW,gBACZhB,CADY;AAEf9H,IAAAA,KAAK,EAALA,KAFe;AAGfnG,IAAAA,QAAQ,EAARA,QAHe;AAIfuO,IAAAA,WAAW,EAAXA,WAJe;AAKf5G,IAAAA,QAAQ,EAAEmZ;AALK,IAAjB;;AAOA,SAAO1jB,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAE0jB,OAAhC;AAAyC,IAAA,OAAO,EAAEvS;AAAlD,KAAmEN,CAAnE,GACG9H,KADH,CAHF;AAOD,CA5BD;;AA8BA0F,kBAAkB,CAACnO,SAAnB,GAA+BA,WAA/B;AACAmO,kBAAkB,CAACrE,YAAnB,GAAkCA,cAAlC;AACAqE,kBAAkB,CAAC5G,WAAnB,GAAiCA,aAAjC;;AC/BO,IAAM8b,2BAA2B,GAAyB;AAC/DxP,EAAAA,uBAAuB,EAAE;AADsC,CAA1D;AAeP,AAAO,IAAMW,kBAAkB;AAAA,yEAAuB,iBAAOpS,EAAP,EAAW4C,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,kBAE9CA,OAF8C,YAE9CA,OAAO,CAAEvB,KAFqC;AAAA;AAAA;AAAA;;AAAA,iBAG5CuB,OAAO,CAACgQ,iBAHoC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIxBrL,SAAO,CAACrG,eAAR,CAAwB0B,OAAO,CAAClC,MAAhC,EAAwCgB,IAAxC,CAA6C1B,EAA7C,CAJwB;;AAAA;AAIxCqP,YAAAA,OAJwC;;AAAA,kBAK1CA,OAAO,CAACkC,SAAR,KAAsB3O,OAAO,CAACgQ,iBALY;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMtCvD,OAAO,CAACnO,eAAR,CAAwB0B,OAAO,CAAClC,MAAhC,EAAwC+O,MAAxC,CAA+C;AACnD8B,cAAAA,SAAS,EAAE3O,OAAO,CAACgQ;AADgC,aAA/C,CANsC;;AAAA;AAWhDhQ,YAAAA,OAAO,CAACnC,QAAR,CAAiB;AACfrC,cAAAA,IAAI,EAAE,oBADS;AAEfE,cAAAA,OAAO,EAAE;AACPmT,gBAAAA,uBAAuB,EAAEzR;AADlB;AAFM,aAAjB;;AAXgD;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmBlD2N,YAAAA,OAAO,CAAC5N,KAAR;;AAnBkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA,kBAAlBqS,kBAAkB;AAAA;AAAA;AAAA,GAAxB;AA4BP,AAAO,IAAM8O,4BAA4B,GAAiC,SAA7DA,4BAA6D;MACxEtO,0BAAAA;MACAnS,iBAAAA;AAEAA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,8BADC;AAEPE,IAAAA,OAAO,EAAE;AAAE+T,MAAAA,yBAAyB,EAAEO;AAA7B;AAFF,GAAD,CAAR;AAID,CARM;AAUP,IAAMxU,MAAI,GAAgC,CACxC,oBADwC,EAExC,8BAFwC,CAA1C;;AAKA,IAAM+iB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAC7BpjB,KAD6B,EAE7B2F,OAF6B;AAAA,SAI7B5F,WAAW,CAITC,KAJS,EAIF2F,OAJE,EAIOtF,MAJP,CAJkB;AAAA,CAA/B;;AC9DA,IAAMR,WAAS,GAAGkH,UAAU,CAACgH,wBAAX,CAAoClO,SAAtD;;AAKA,IAAMkO,wBAAwB,GAA6B,SAArDA,wBAAqD,CAACpO,KAAD;MACjDJ,WAAaI,MAAbJ;;oBACkBqX,UAAU,CAClCwM,sBADkC,EAElCF,2BAFkC;MAA7BljB;MAAO0C;;AAId,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAC4BtG,UAAU,CAACzK,YAAD;MAA9BtC,oBAAAA;MAAOgN,uBAAAA;;qBACaD,UAAU,CAACkE,gBAAD;MAA9BtB,+BAAAA;;AACRyB,EAAAA,SAAS,CAAC;AACR,QAAIpR,KAAJ,EAAW;AAAA;;AACT,UAAMuR,iBAAiB,GAAG,0BAAAvR,KAAK,CAAC8P,eAAN,6CAAyBI,SAAzB,KAAsC,EAAhE;AACA2P,MAAAA,4BAA4B,CAAC;AAC3BtO,QAAAA,iBAAiB,EAAjBA,iBAD2B;AAE3BnS,QAAAA,QAAQ,EAARA;AAF2B,OAAD,CAA5B;AAIAuQ,MAAAA,eAAe,CAAC4B,iBAAD,EAAoB,iBAApB,CAAf;AACD;AACF,GATQ,EASN,CAACvR,KAAD,CATM,CAAT;;AAUA,MAAMuT,YAAY,gBACb7W,KADa;AAEhBqU,IAAAA,kBAAkB;AAAA,gFAAE,iBAClBpS,EADkB,EAElB4C,OAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIZwP,kBAAkB,CAACpS,EAAD,EAAK;AAC3BU,kBAAAA,MAAM,EAANA,MAD2B;AAE3BD,kBAAAA,QAAQ,EAARA,QAF2B;AAG3BY,kBAAAA,KAAK,EAALA,KAH2B;AAI3BgN,kBAAAA,QAAQ,EAARA,QAJ2B;AAK3BuE,kBAAAA,iBAAiB,EAAEhQ,OAAF,oBAAEA,OAAO,CAAEgQ;AALD,iBAAL,CAJN;;AAAA;AAWlB5B,gBAAAA,eAAe,CAAChR,EAAD,EAAK,iBAAL,CAAf;;AAXkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAFF,IAAlB;;AAgBA,sBACE,oBAAC,sBAAD,CAAwB,QAAxB;AAAiC,IAAA,KAAK,EAAE4U;AAAxC,KACGtX,QADH,CADF;AAKD,CAxCD;;AA0CAwO,wBAAwB,CAAClO,SAAzB,GAAqCA,WAArC;;AChDA,IAAMA,WAAS,GAAGkH,UAAU,CAACkH,mBAAX,CAA+BpO,SAAjD;;AAOA,IAAMoO,mBAAmB,GAAgD,SAAnEA,mBAAmE,CACvEtO,KADuE;MAG/DJ,WAAuDI,MAAvDJ;4BAAuDI,MAA7CwY;MAAAA,gDAAe;qBAA8BxY,MAAxByY;MAAAA,kCAAQ;MAAUhI,kCAAMzQ;;sBACN0Y,YAAY;MAA7DnC,2BAAAA;MAAYlD,uBAAAA;MAAQrR,uBAAAA;MAAe2W,0BAAPF;;oBAC6B/H,UAAU,CACzEyD,gBADyE;MAAnEhB,+BAAAA;MAAkBC,yBAAAA;MAAY9I,qCAAAA;;qBAGAoG,UAAU,CAACzK,YAAD;MAAxCN,yCAAAA;;AACR,MAAMmQ,GAAG,GAAG8C,MAAM,CAAkB,IAAlB,CAAlB;AACA7D,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAAL,EAAwB;AACtB,UAAM6W,UAAU,GAAgB,EAAhC;;AACA,WAAK,IAAMC,SAAX,IAAwB9W,MAAxB,EAAgC;AAAA,gCACJA,MAAM,CAAC8W,SAAD,CADF;AAAA,YACtB/X,IADsB,qBACtBA,IADsB;AAAA,YAChB0B,OADgB,qBAChBA,OADgB;AAE9BoW,QAAAA,UAAU,CAACjX,IAAX,CAAgB;AACdb,UAAAA,IAAI,EAAEA,IADQ;AAEd0B,UAAAA,OAAO,EAAPA,OAFc;AAGdD,UAAAA,QAAQ,EAAE,iBAHI;AAIdD,UAAAA,KAAK,EAAEuW;AAJO,SAAhB;AAMD;;AACD,OAAC7W,CAAC,CAAC+C,OAAF,CAAU6T,UAAV,CAAD,IACEvO,sBADF,IAEE6I,gBAAgB,CAAC0F,UAAD,CAFlB;AAGD,KAdD,MAcO,IAAI,CAAC5W,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CAAD,IAAsB/I,sBAA1B,EAAkD;AACvD6I,MAAAA,gBAAgB,CAAC,EAAD,CAAhB;;AACA,WAAK,IAAM1O,IAAX,IAAmB4O,MAAnB,EAA2B;AACzB,YAAM9Q,KAAK,GAAG8Q,MAAM,CAAC5O,IAAD,CAApB;;AACA,YAAIlC,KAAJ,YAAIA,KAAK,CAAEqD,KAAX,EAAkB;AAChByN,UAAAA,MAAM,CAAC5O,IAAI,CAACuC,OAAL,CAAa,mBAAb,EAAkC,EAAlC,CAAD,CAAN,GAAgDzE,KAAK,CAACqD,KAAtD;AACA,iBAAOyN,MAAM,CAAC5O,IAAD,CAAb;AACD;;AACD,YAAI,CAAAlC,KAAK,QAAL,YAAAA,KAAK,CAAE7B,IAAP,MAAgB,UAApB,EAAgC;AAC9B,iBAAO2S,MAAM,CAAC5O,IAAD,CAAb;AACAkB,UAAAA,yBAAyB,CAAC,iBAAD,EAAoBpD,KAAK,CAACwW,OAA1B,CAAzB;AACD;AACF;;AACD3F,MAAAA,UAAU,CAAC;AAAEC,QAAAA,MAAM,EAANA,MAAF;AAAU7Q,QAAAA,QAAQ,EAAE;AAApB,OAAD,CAAV;AACD;;AACD,QAAIiW,KAAK,KAAK,CAACxW,CAAC,CAAC+C,OAAF,CAAUqO,MAAV,CAAD,IAAsB,CAACpR,CAAC,CAAC+C,OAAF,CAAUhD,MAAV,CAA5B,CAAT,EAAyD;AACvD2D,MAAAA,yBAAyB,IACvBA,yBAAyB,CAAC,iBAAD,EAAoB,KAApB,CAD3B;;AAEA,UAAImQ,GAAJ,EAAS;AAAA;;AACP,wBAAAA,GAAG,CAACkD,OAAJ,kCAAaP,KAAb;AACAE,QAAAA,SAAS,CAAC;AAAEM,UAAAA,MAAM,EAAEnD,GAAG,CAACkD;AAAd,SAAD,CAAT;AACA7F,QAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAC,QAAAA,UAAU,CAAC;AAAEC,UAAAA,MAAM,EAAE,EAAV;AAAc7Q,UAAAA,QAAQ,EAAE;AAAxB,SAAD,CAAV;AACD;AACF;AACF,GAxCQ,EAwCN,CAAC6Q,MAAD,EAASrR,MAAT,EAAiBsI,sBAAjB,EAAyCmO,KAAzC,CAxCM,CAAT;;AAyCA,MAAMnC,QAAQ,GAAG,SAAXA,QAAW,CACf7R,IADe,EAEfmB,KAFe;;;AAIf,QAAMrD,KAAK,wBACRkC,IAAI,CAACuC,OAAL,CAAa,mBAAb,EAAkC,EAAlC,CADQ,IACgCpB,KADhC,SAAX;AAGAwN,IAAAA,UAAU,CAAC;AAAEC,MAAAA,MAAM,eAAOA,MAAP,EAAkB9Q,KAAlB,CAAR;AAAmCC,MAAAA,QAAQ,EAAE;AAA7C,KAAD,CAAV;AACD,GARD;;AASA,sBACE,oBAAC,0BAAD,CAA4B,QAA5B;AAAqC,IAAA,KAAK,EAAE;AAAE+T,MAAAA,UAAU,EAAVA,UAAF;AAAcD,MAAAA,QAAQ,EAARA;AAAd;AAA5C,kBACE;AAAM,IAAA,GAAG,EAAER,GAAX;AAAgB,IAAA,YAAY,EAAE0C;AAA9B,KAAgD/H,CAAhD,GACG7Q,QADH,CADF,CADF;AAOD,CAnED;;AAqEA0O,mBAAmB,CAACpO,SAApB,GAAgCA,WAAhC;;ACxFA,IAAMA,WAAS,GAAGkH,UAAU,CAACmH,cAAX,CAA0BrO,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACmH,cAAX,CAA0B9G,WAA9C;;AAEA,IAAM8G,cAAc,GAA2C,SAAzDA,cAAyD,CAACvO,KAAD;AAC7D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,QAArB;AAA8B,IAAA,IAAI,EAAC;AAAnC,KAAkDA,KAAlD,EAAP;AACD,CAFD;;AAIAuO,cAAc,CAACrO,SAAf,GAA2BA,WAA3B;AACAqO,cAAc,CAAC9G,WAAf,GAA6BA,aAA7B;;ACHA,IAAMvH,WAAS,GAAGkH,UAAU,CAACwH,OAAX,CAAmB1O,SAArC;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACwH,OAAX,CAAmBnH,WAAvC;;AAOA,IAAMmH,OAAO,GAAmC,SAA1CA,OAA0C,CAAC5O,KAAD;MACtCsC,KAAiBtC,MAAjBsC;MAAI1C,WAAaI,MAAbJ;;oBACQ8Q,UAAU,CAACP,eAAD;MAAtBV,sBAAAA;;AACRsF,EAAAA,SAAS,CAAC;AACR,QAAI,CAACtF,OAAO,CAAC1L,QAAR,CAAiBzB,EAAjB,CAAL,EAA2B;AACzBmN,MAAAA,OAAO,CAAC7N,IAAR,CAAaU,EAAb;AACD;AACF,GAJQ,EAIN,EAJM,CAAT;AAKA,sBAAO,oBAAC,QAAD,QAAW1C,QAAX,CAAP;AACD,CATD;;AAWAgP,OAAO,CAAC1O,SAAR,GAAoBA,WAApB;AACA0O,OAAO,CAACnH,WAAR,GAAsBA,aAAtB;;ACdA,IAAMvH,WAAS,GAAGkH,UAAU,CAACyH,iBAAX,CAA6B3O,SAA/C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACyH,iBAAX,CAA6BpH,WAAjD;;AAMA,IAAMoH,iBAAiB,GAA6C,SAA9DA,iBAA8D,CAAC7O,KAAD;MAC1DJ,WAAaI,MAAbJ;;oBACkBqX,UAAU,CAAC/G,eAAD,EAAkBV,oBAAlB;MAA7BnP;MAAO0C;;AACd,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;AACAjC,EAAAA,SAAS,CAAC;AACR,QAAI1U,KAAK,CAACoP,OAAN,CAAc9N,MAAd,GAAuB,CAAvB,IAA4BqB,MAAM,CAAC+H,WAAvC,EAAoD;AAClD4E,MAAAA,UAAU,CAAC;AAAEF,QAAAA,OAAO,EAAEpP,KAAK,CAACoP,OAAjB;AAA0B1M,QAAAA,QAAQ,EAARA,QAA1B;AAAoCC,QAAAA,MAAM,EAANA,MAApC;AAA4C3C,QAAAA,KAAK,EAALA;AAA5C,OAAD,CAAV;AACD;AACF,GAJQ,EAIN,CAAC2C,MAAM,CAAC+H,WAAR,CAJM,CAAT;AAKA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAE1K;AAAjC,KACGT,QADH,CADF;AAKD,CAdD;;AAgBAiP,iBAAiB,CAAC3O,SAAlB,GAA8BA,WAA9B;AACA2O,iBAAiB,CAACpH,WAAlB,GAAgCA,aAAhC;;AChCA,IAAMiK,SAAO,GAAiC;AAC5CvN,EAAAA,OAAO,EAAE;AADmC,CAA9C;AAIA,IAAMuf,wBAAwB,gBAAGxd,aAAa,CAC5CwL,SAD4C,CAA9C;;ACSO,IAAMiS,aAAa;AAAA,yEAAkB,iBAAO9gB,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAClC+gB,YAAAA,UADkC,GACT/gB,MADS,CAClC+gB,UADkC,EACtB7gB,QADsB,GACTF,MADS,CACtBE,QADsB;AAE1CA,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,eADC;AAEPE,cAAAA,OAAO,EAAE;AACPgjB,gBAAAA,UAAU,EAAVA;AADO;AAFF,aAAD,CAAR;;AAF0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA,kBAAbD,aAAa;AAAA;AAAA;AAAA,GAAnB;AAUP,AAmBA,IAAMhhB,YAAU,GAA2B,CAAC,eAAD,EAAkB,WAAlB,CAA3C;AAOA,AAAO,IAAMkhB,sBAAsB,GAAoB;AACrD1f,EAAAA,OAAO,EAAE,EAD4C;AAErDyf,EAAAA,UAAU,EAAE;AAFyC,CAAhD;;AAKP,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CACxBzjB,KADwB,EAExB2F,OAFwB;AAAA,SAIxB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,YAHS,CAJa;AAAA,CAA1B;;AC3DA,IAAMohB,iBAAiB,gBAAG7d,aAAa,CAAC2d,sBAAD,CAAvC;;ACOA,IAAM3jB,WAAS,GAAGkH,UAAU,CAAC/B,SAAX,CAAqBnF,SAAvC;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC/B,SAAX,CAAqBoC,WAAzC;;AAOA,IAAMpC,SAAS,GAAsC,SAA/CA,SAA+C,CAACrF,KAAD;MAC3CsC,KAAOtC,MAAPsC;;oBACwBoO,UAAU,CAACqT,iBAAD;MAAlCH,yBAAAA;MAAYzf,sBAAAA;;AACpB,MAAMkC,KAAK,GACTud,UAAU,IACVA,UAAU,CACPpI,MADH,CACU,UAAC4C,CAAD;AAAA,WAAOA,CAAC,CAAC9b,EAAF,KAASA,EAAhB;AAAA,GADV,EAEGrB,GAFH,CAEO,UAACmE,SAAD,EAAY4P,CAAZ;AACH,wBACE,oBAAC,wBAAD,CAA0B,QAA1B;AACE,MAAA,GAAG,EAAEA,CADP;AAEE,MAAA,KAAK,EAAE;AAAE5P,QAAAA,SAAS,EAATA,SAAF;AAAajB,QAAAA,OAAO,EAAEA;AAAtB;AAFT,OAIGnE,KAAK,CAACJ,QAJT,CADF;AAQD,GAXH,CAFF;AAcA,sBAAO,oBAAC,QAAD,QAAWyG,KAAX,CAAP;AACD,CAlBD;;AAoBAhB,SAAS,CAACnF,SAAV,GAAsBA,WAAtB;AACAmF,SAAS,CAACoC,WAAV,GAAwBA,aAAxB;;AC9BA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC0H,cAAX,CAA0B5O,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC0H,cAAX,CAA0BrH,WAA9C;;AAMA,IAAMqH,cAAc,GAA2C,SAAzDA,cAAyD,CAAC9O,KAAD;MACrDyE,OAASzE,MAATyE;;oBACsBiM,UAAU,CAAClK,WAAD;MAAhClC,qBAAAA;MAAQsZ,wBAAAA;;qBACelN,UAAU,CAACgT,wBAAD;MAAjCte,yBAAAA;MAAWjB,uBAAAA;;AACnB,MAAM8a,YAAY,GAAwC,SAApDA,YAAoD,CAAC+E,KAAD;;;AACxD,QAAMjJ,GAAG,GAAGiJ,KAAK,CAAC/K,MAAN,CAAarT,KAAzB;AACA,QAAMV,OAAO,GAAGjD,CAAC,CAACC,GAAF,CAAMoC,MAAN,EAAiBH,OAAjB,UAA4BiB,SAA5B,oBAA4BA,SAAS,CAAE9C,EAAvC,KACZgC,MAAM,CAACH,OAAD,CAAN,OAAmBiB,SAAnB,oBAAmBA,SAAS,CAAE9C,EAA9B,GAAoC,SAApC,CADY,GAEZ,EAFJ;AAGA,QAAMoB,CAAC,gBACJS,OADI,iBAEAG,MAAM,CAACH,OAAD,CAFN,mCAGCiB,SAHD,oBAGCA,SAAS,CAAE9C,EAHZ,KAGmB;AACpB6C,MAAAA,WAAW,EAAEC,SAAF,oBAAEA,SAAS,CAAE9C,EADJ;AAEpB4C,MAAAA,OAAO,eACFA,OADE,6BAEJT,IAFI,IAEGsW,GAFH;AAFa,KAHnB,kBAAP;AAYA6C,IAAAA,SAAS,IAAIA,SAAS,CAACla,CAAD,CAAtB;AACD,GAlBD;;AAmBA,sBAAO,oBAACmT,WAAD;AAAW,IAAA,QAAQ,EAAEoI;AAArB,KAAuCjf,KAAvC,EAAP;AACD,CAxBD;;AA0BA8O,cAAc,CAAC5O,SAAf,GAA2BA,WAA3B;AACA4O,cAAc,CAACrH,WAAf,GAA6BA,aAA7B;;ACzBA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC2H,mBAAX,CAA+B7O,SAAjD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC2H,mBAAX,CAA+BtH,WAAnD;;AAOA,IAAMsH,mBAAmB,GAA+C,SAAlEA,mBAAkE,CACtE/O,KADsE;;;MAG9DmE,UAAsBnE,MAAtBmE;MAASvE,WAAaI,MAAbJ;;oBACSqX,UAAU,CAClC6M,iBADkC,EAElCD,sBAFkC;MAA7BxjB;MAAO0C;;AAId,MAAMC,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBACwBtG,UAAU,CAAClK,WAAD;MAA1BJ,mBAAAA;MAAMC,oBAAAA;;AACd,MAAMyK,KAAK,GACT,CAAC7O,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqBlC,OAArB,qBACIkC,KAAK,CAAClC,OAAD,CADT,qBACI,eAAgBpD,IADpB,GAEIoD,OAAO,IAAIsC,iBAAiB,CAACL,IAAD,CAHlC;;AAIA,MAAM6d,eAAe,gBAAQ5jB,KAAR;AAAe8D,IAAAA,OAAO,EAAE2M;AAAxB,IAArB;;AACAiE,EAAAA,SAAS,CAAC;AACR,QAAIjE,KAAK,IAAI1K,IAAI,CAAC0K,KAAD,CAAJ,CAAY8S,UAAzB,EAAqC;AAAA;;AACnCD,MAAAA,aAAa,CAAC;AACZC,QAAAA,UAAU,2BAAExd,IAAI,CAAC0K,KAAD,CAAJ,CAAY8S,UAAZ,EAAF,qBAAE,sBAA0BxhB,OAA1B,EADA;AAEZW,QAAAA,QAAQ,EAARA;AAFY,OAAD,CAAb;AAID;;AACD,WAAO;AACL,UAAId,CAAC,CAAC+C,OAAF,CAAU8L,KAAV,CAAJ,EAAsB;AACpB/N,QAAAA,QAAQ,CAAC;AACPrC,UAAAA,IAAI,EAAE,eADC;AAEPE,UAAAA,OAAO,EAAE;AACPgjB,YAAAA,UAAU,EAAE;AADL;AAFF,SAAD,CAAR;AAMD;AACF,KATD;AAUD,GAjBQ,EAiBN,CAAC5gB,MAAD,EAAS8N,KAAT,CAjBM,CAAT;AAkBA,sBACE,oBAAC,iBAAD,CAAmB,QAAnB;AAA4B,IAAA,KAAK,EAAEmT;AAAnC,KACGrkB,QADH,CADF;AAKD,CAtCD;;AAwCAmP,mBAAmB,CAAC7O,SAApB,GAAgCA,WAAhC;AACA6O,mBAAmB,CAACtH,WAApB,GAAkCA,aAAlC;;AC9DA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC+H,cAAX,CAA0BjP,SAA5C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC+H,cAAX,CAA0BnF,YAA/C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC+H,cAAX,CAA0B1H,WAA9C;;AAEA,IAAM0H,cAAc,GAA2C,SAAzDA,cAAyD,CAACnP,KAAD;AAC7D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,QAArB;AAA8B,IAAA,IAAI,EAAC;AAAnC,KAAkDA,KAAlD,EAAP;AACD,CAFD;;AAIAmP,cAAc,CAACjP,SAAf,GAA2BA,WAA3B;AACAiP,cAAc,CAACnF,YAAf,GAA8BA,cAA9B;AACAmF,cAAc,CAAC1H,WAAf,GAA6BA,aAA7B;;ACVA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC8H,YAAX,CAAwBhP,SAA1C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAAC8H,YAAX,CAAwBlF,YAA7C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAAC8H,YAAX,CAAwBzH,WAA5C;;AAWA,IAAMyH,YAAY,GAAyC,SAArDA,YAAqD,CAAClP,KAAD;MACjDJ,WAAqCI,MAArCJ;qBAAqCI,MAA3B2I;MAAAA,kCAAQ;MAAa8H,kCAAMzQ;;AAC7C,MAAMyR,WAAW,gBACZhB,CADY;AAEf9H,IAAAA,KAAK,EAALA;AAFe,IAAjB;;AAIA,SAAO/I,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb;AAAQ,IAAA,IAAI,EAAC;AAAb,KAA0B6Q,CAA1B,GACG9H,KADH,CAHF;AAOD,CAbD;;AAeAuG,YAAY,CAAChP,SAAb,GAAyBA,WAAzB;AACAgP,YAAY,CAAClF,YAAb,GAA4BA,cAA5B;AACAkF,YAAY,CAACzH,WAAb,GAA2BA,aAA3B;;AC9BA,IAAMvH,WAAS,GAAGkH,UAAU,CAACgI,WAAX,CAAuBlP,SAAzC;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACgI,WAAX,CAAuBpF,YAA5C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACgI,WAAX,CAAuB3H,WAA3C;;AAEA,IAAM2H,WAAW,GAA2C,SAAtDA,WAAsD,CAACpP,KAAD;AAC1D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,QAArB;AAA8B,IAAA,IAAI,EAAC;AAAnC,KAAkDA,KAAlD,EAAP;AACD,CAFD;;AAIAoP,WAAW,CAAClP,SAAZ,GAAwBA,WAAxB;AACAkP,WAAW,CAACpF,YAAZ,GAA2BA,cAA3B;AACAoF,WAAW,CAAC3H,WAAZ,GAA0BA,aAA1B;;ACVA,IAAMvH,WAAS,GAAGkH,UAAU,CAACiI,WAAX,CAAuBnP,SAAzC;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACiI,WAAX,CAAuBrF,YAA5C;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACiI,WAAX,CAAuB5H,WAA3C;;AAEA,IAAM4H,WAAW,GAA2C,SAAtDA,WAAsD,CAACrP,KAAD;AAC1D,sBAAO,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,aAArB;AAAmC,IAAA,IAAI,EAAC;AAAxC,KAAwDA,KAAxD,EAAP;AACD,CAFD;;AAIAqP,WAAW,CAACnP,SAAZ,GAAwBA,WAAxB;AACAmP,WAAW,CAACrF,YAAZ,GAA2BA,cAA3B;AACAqF,WAAW,CAAC5H,WAAZ,GAA0BA,aAA1B;;ACRO,IAAMvH,WAAS,GAAG;AACvBgkB,EAAAA,QAAQ,EAAErkB,SAAS,CAACskB,GAAV,CAAcpc,UADD;AAEvBmB,EAAAA,QAAQ,EAAErJ,SAAS,CAACC,IAFG;AAGvBoF,EAAAA,OAAO,eAAErF,SAAS,CAAC4I,OAAV,eACP5I,SAAS,CAAC6I,KAAV,CAAgB;AACdC,IAAAA,KAAK,EAAE9I,SAAS,CAACoI,MAAV,CAAiBF,UADV;AAEdhH,IAAAA,IAAI,EAAElB,SAAS,CAACoI,MAAV,CAAiBF,UAFT;AAGdxD,IAAAA,QAAQ,eAAE1E,SAAS,CAAC6I,KAAV,CAAgB;AACxBjE,MAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAAV,CAAiBF,UADC;AAExBrD,MAAAA,QAAQ,EAAE7E,SAAS,CAACoI;AAFI,KAAhB;AAHI,GAAhB,EAOGF,UARI,EASPA,UAZqB;AAavBtD,EAAAA,IAAI,EAAE5E,SAAS,CAACoI,MAbO;AAcvBrI,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IAdG;AAevBY,EAAAA,IAAI,eAAEb,SAAS,CAACoJ,KAAV,CAAkC,CAAC,QAAD,EAAW,OAAX,CAAlC,CAfiB;AAgBvBkE,EAAAA,MAAM,EAAEtN,SAAS,CAAC0I,OAhBK;AAiBvBQ,EAAAA,WAAW,EAAElJ,SAAS,CAACoI,MAjBA;AAkBvB9D,EAAAA,OAAO,EAAEtE,SAAS,CAACoI;AAlBI,CAAlB;;AAgCP,IAAMmc,eAAe,GAA4C,SAA3DA,eAA2D,CAACpkB,KAAD;MAE7DsC,KAQEtC,MARFsC;MACA4hB,WAOElkB,MAPFkkB;MACAxjB,OAMEV,MANFU;MACAqI,cAKE/I,MALF+I;MACA7D,UAIElF,MAJFkF;MACAf,UAGEnE,MAHFmE;MACA8a,eAEEjf,MAFFif;MACGoF,oCACDrkB;;AACJ,MAAMskB,IAAI,GAAGriB,CAAC,CAAC0E,IAAF,CAAOud,QAAP,EAAiBjjB,GAAjB,CAAqB,UAACsY,CAAD,EAAIvE,CAAJ;AAChC,QAAM+D,OAAO,GAAG5U,OAAO,KAAKoV,CAA5B;AACA,WAAO7Y,IAAI,KAAK,QAAT,gBACL;AACE,MAAA,GAAG,EAAEwjB,QAAQ,CAAC3K,CAAD,CAAR,CAAYjX,EADnB;AAEE,qBAAa4hB,QAAQ,CAAC3K,CAAD,CAAR,CAAYjX,EAF3B;AAGE,MAAA,KAAK,EAAE4hB,QAAQ,CAAC3K,CAAD,CAAR,CAAYxY;AAHrB,OAKGmE,OAAO,CAACvD,MAAR,GAAiB,CAAjB,GAAqBuD,OAAO,CAAC8P,CAAD,CAAP,CAAWrM,KAAhC,GAAwCub,QAAQ,CAAC3K,CAAD,CAAR,CAAY9U,IALvD,CADK,gBASL,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEyf,QAAQ,CAAC3K,CAAD,CAAR,CAAYjX;AAA3B,oBACE;AACE,MAAA,EAAE,EAAEA,EAAE,IAAOA,EAAP,SAAa0S,CADrB;AAEE,MAAA,cAAc,EAAE+D,OAFlB;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,KAAK,EAAEmL,QAAQ,CAAC3K,CAAD,CAAR,CAAYxY,IAJrB;AAKE,MAAA,QAAQ,EAAE,kBAACkc,CAAD;AAAA,eACRgC,YAAY,IAAIA,YAAY,CAAChC,CAAC,CAAChE,MAAF,CAASrT,KAAV,EAAiBse,QAAQ,CAAC3K,CAAD,CAAR,CAAYjX,EAA7B,CADpB;AAAA;AALZ,OAQM+hB,GARN,EADF,EAWGnf,OAAO,CAACvD,MAAR,GAAiB,CAAjB,GAAqBuD,OAAO,CAAC8P,CAAD,CAAP,CAAWrM,KAAhC,GAAwCub,QAAQ,CAAC3K,CAAD,CAAR,CAAY9U,IAXvD,CATF;AAuBD,GAzBY,CAAb;;AA0BA,MAAI/D,IAAI,KAAK,QAAb,EAAuB;AACrB,wBACE;AACE,MAAA,EAAE,EAAE4B,EADN;AAEE,MAAA,QAAQ,EAAE,kBAAC2a,CAAD;AACR,YAAM1D,CAAC,GAAG0D,CAAC,CAAChE,MAAF,CAASrT,KAAnB;AACA,YAAMoZ,CAAC,GAAG/B,CAAC,CAAChE,MAAF,CAASsL,aAAnB;AACA,YAAMjiB,EAAE,GAAG2a,CAAC,CAAChE,MAAF,CAAS+F,CAAT,EAAYwF,OAAZ,CAAoBpgB,KAA/B;AACA6a,QAAAA,YAAY,IAAIA,YAAY,CAAC1F,CAAD,EAAIjX,EAAJ,CAA5B;AACD,OAPH;AAQE,MAAA,KAAK,EAAE6B,OAAO,IAAI;AARpB,OASMkgB,GATN,gBAWE;AAAQ,MAAA,QAAQ,EAAE,CAAC,CAAClgB;AAApB,OAA8B4E,WAA9B,CAXF,EAYGub,IAZH,CADF;AAgBD;;AACD,sBAAO,oBAAC,QAAD,QAAWA,IAAX,CAAP;AACD,CAxDD;;AA0DAF,eAAe,CAAClkB,SAAhB,GAA4BA,WAA5B;;AC/FA,IAAMukB,OAAO,GAAG,SAAVA,OAAU,CAACne,MAAD;AACd,MAAMgT,GAAG,GAAwB,EAAjC;AACAhT,EAAAA,MAAM,CAACrF,GAAP,CAAW,UAAC+O,GAAD;AACTsJ,IAAAA,GAAG,CAACtJ,GAAG,CAACjP,IAAL,CAAH,GAAgBiP,GAAhB;AACD,GAFD;AAGA,SAAOsJ,GAAP;AACD,CAND;;ACiEO,IAAMoL,kBAAkB,GAAuB,SAAzCA,kBAAyC;MACpD3U,gBAAAA;MACAhN,gBAAAA;MACA+a,0BAAAA;AAEA,MAAMvX,SAAS,GAAQ,EAAvB;AACA,MAAMoe,MAAM,GAAG5U,QAAQ,CAAC9O,GAAT,CAAa,UAAC2jB,CAAD;AAC1B,QAAI3iB,CAAC,CAACC,GAAF,CAAM0iB,CAAN,EAAS,UAAT,CAAJ,EAA0B;AACxBre,MAAAA,SAAS,CAACqe,CAAC,CAAC7jB,IAAH,CAAT,GAAoB6jB,CAAC,CAACrgB,QAAtB;AACD;;AACD,WAAOqgB,CAAC,CAAC7jB,IAAT;AACD,GALc,CAAf;;AAMA,MAAI,CAACkB,CAAC,CAAC+C,OAAF,CAAUuB,SAAV,CAAL,EAA2B;AACzBuX,IAAAA,kBAAkB,IAAIA,kBAAkB,CAACvX,SAAD,CAAxC;AACD;;AACDxD,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,aADC;AAEPE,IAAAA,OAAO,EAAE;AAAEmP,MAAAA,QAAQ,EAAE4U;AAAZ;AAFF,GAAD,CAAR;AAID,CAnBM;AAyBP,AAAO,IAAME,UAAU,GAAsB,SAAhCA,UAAgC,CAAChiB,MAAD;MACnCP,KAAwCO,OAAxCP;MAAIvB,OAAoC8B,OAApC9B;MAAMiC,SAA8BH,OAA9BG;MAAQ0a,UAAsB7a,OAAtB6a;MAAS3a,WAAaF,OAAbE;;AACnC,MAAIT,EAAJ,EAAQ;AACNgB,IAAAA,MAAM,CAACuB,GAAP,CAAWrB,eAAX,CAA2BR,MAA3B,EACGe,QADH,CACY,YADZ,EAEGC,IAFH,CAEQ1B,EAFR,EAGG+O,IAHH,CAGQ,UAACuT,CAAD;;;AACJlH,MAAAA,OAAO,IACLA,OAAO,+BACD3c,IADC,IACQ6jB,CADR,YADT;AAID,KARH,WASS,UAAC1jB,CAAD;AACL,UAAMc,MAAM,GAAGH,qBAAqB,CAACX,CAAD,EAAI,SAAJ,CAApC;AACA6B,MAAAA,QAAQ,CAAC;AACPrC,QAAAA,IAAI,EAAE,WADC;AAEPE,QAAAA,OAAO,EAAE;AACPoB,UAAAA,MAAM,EAANA;AADO;AAFF,OAAD,CAAR;AAMD,KAjBH;AAkBD;AACF,CAtBM;AAqCP,AAAO,IAAM8iB,WAAW,GAAgB,SAA3BA,WAA2B,CAACjiB,MAAD;MAC9BG,SAAuDH,OAAvDG;MAAQ3C,QAA+CwC,OAA/CxC;MAAO8D,UAAwCtB,OAAxCsB;MAASpB,WAA+BF,OAA/BE;MAAU2a,UAAqB7a,OAArB6a;MAASxQ,UAAYrK,OAAZqK;AACnD5J,EAAAA,MAAM,CAACuB,GAAP,CAAWrB,eAAX,CAA2BR,MAA3B,EACGuU,KADH;AACWC,IAAAA,MAAM,EAAEnX,KAAK,CAAC0P,QAAN,CAAexI,IAAf,CAAoB,GAApB;AADnB,KACgD2F,OADhD,GAEGkF,GAFH,GAGGf,IAHH,CAGQ,UAACqQ,CAAD;AACJ,QAAMqD,OAAO,GAAGN,OAAO,CAAC/C,CAAC,CAACtf,OAAF,EAAD,CAAvB;;AACA,QAAI+B,OAAJ,EAAa;AACX0gB,MAAAA,UAAU,CAAC;AACT9jB,QAAAA,IAAI,EAAEgkB,OAAO,CAAC5gB,OAAD,CAAP,CAAiBpD,IADd;AAETuB,QAAAA,EAAE,EAAEyiB,OAAO,CAAC5gB,OAAD,CAAP,CAAiB7B,EAFZ;AAGTU,QAAAA,MAAM,EAANA,MAHS;AAITD,QAAAA,QAAQ,EAARA,QAJS;AAKT2a,QAAAA,OAAO,EAAPA;AALS,OAAD,CAAV;AAOD;;AACD3a,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,aADC;AAEPE,MAAAA,OAAO,EAAE;AACPsjB,QAAAA,QAAQ,EAAEa;AADH;AAFF,KAAD,CAAR;AAMAhiB,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,YADC;AAEPE,MAAAA,OAAO,EAAE;AACPkF,QAAAA,OAAO,EAAE;AADF;AAFF,KAAD,CAAR;AAMD,GA1BH,WA2BS,UAAC5E,CAAD;AACL,QAAMc,MAAM,GAAGH,qBAAqB,CAACX,CAAD,EAAI,SAAJ,CAApC;AACA6B,IAAAA,QAAQ,CAAC;AACPrC,MAAAA,IAAI,EAAE,WADC;AAEPE,MAAAA,OAAO,EAAE;AACPoB,QAAAA,MAAM,EAANA;AADO;AAFF,KAAD,CAAR;AAMD,GAnCH;AAoCD,CAtCM;AAwCP,AAAO,IAAMgjB,iBAAiB,GAAsB,SAAvCA,iBAAuC,CAACjiB,QAAD;AAClDA,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,YADC;AAEPE,IAAAA,OAAO,EAAE;AAAEuD,MAAAA,OAAO,EAAE;AAAX;AAFF,GAAD,CAAR;AAIApB,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,aADC;AAEPE,IAAAA,OAAO,EAAE;AAAEsjB,MAAAA,QAAQ,EAAE;AAAZ;AAFF,GAAD,CAAR;AAIAnhB,EAAAA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,YADC;AAEPE,IAAAA,OAAO,EAAE;AAAEkF,MAAAA,OAAO,EAAE;AAAX;AAFF,GAAD,CAAR;AAID,CAbM;AAeP,AAAO,IAAMmf,mBAAmB,GAAiB;AAC/Cnf,EAAAA,OAAO,EAAE,KADsC;AAE/Coe,EAAAA,QAAQ,EAAE,EAFqC;AAG/CnU,EAAAA,QAAQ,EAAE,EAHqC;AAI/C5L,EAAAA,OAAO,EAAE,EAJsC;AAK/CnC,EAAAA,MAAM,EAAE,EALuC;AAM/CkjB,EAAAA,YAAY,EAAE,EANiC;AAO/CC,EAAAA,mBAAmB,EAAE;AACnBC,IAAAA,SAAS,EAAE,KADQ;AAEnB/gB,IAAAA,QAAQ,EAAE,CAFS;AAGnBuT,IAAAA,MAAM,EAAE;AAHW,GAP0B;AAY/CyN,EAAAA,eAAe,EAAE,CAZ8B;AAa/CC,EAAAA,aAAa,EAAE;AAbgC,CAA1C;AA0BP,IAAM3iB,YAAU,GAAwB,CACtC,YADsC,EAEtC,aAFsC,EAGtC,aAHsC,EAItC,YAJsC,EAKtC,iBALsC,EAMtC,wBANsC,EAOtC,kBAPsC,EAQtC,WARsC,CAAxC;;AAWA,IAAM4iB,cAAc,GAAG,SAAjBA,cAAiB,CACrBllB,KADqB,EAErB2F,OAFqB;AAAA,SAIrB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTrD,YAHS,CAJU;AAAA,CAAvB;;AC1NA,IAAM6iB,eAAe,gBAAGtf,aAAa,CAAC+e,mBAAD,CAArC;;ACaA,IAAM/kB,WAAS,GAAGkH,UAAU,CAACmI,eAAX,CAA2BrP,SAA7C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACmI,eAAX,CAA2BvF,YAAhD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACmI,eAAX,CAA2B9H,WAA/C;;AA4BA,IAAM8H,eAAe,GAA4C,SAA3DA,eAA2D,CAACvP,KAAD;MACvDJ,WAAgEI,MAAhEJ;MAAUc,OAAsDV,MAAtDU;MAAMqI,cAAgD/I,MAAhD+I;MAAa5E,UAAmCnE,MAAnCmE;MAASM,OAA0BzE,MAA1ByE;MAAMS,UAAoBlF,MAApBkF;MAAYmf,oCAAQrkB;;oBAOpE0Q,UAAU,CAAC8U,eAAD;MALZX,yBAAAA;MACSY,6BAATthB;MACA2B,sBAAAA;MACAoe,uBAAAA;MACA/B,0BAAAA;;AAEFpN,EAAAA,SAAS,CAAC;AACRoN,IAAAA,WAAW,IAAIA,WAAW,CAACjd,OAAD,CAA1B;AACA,WAAO;AACLid,MAAAA,WAAW,IAAIA,WAAW,CAAC,EAAD,CAA1B;AACD,KAFD;AAGD,GALQ,EAKN,CAACjd,OAAD,CALM,CAAT;AAMA,MAAM4L,KAAK,GAAG2U,cAAc,IAAIthB,OAAlB,IAA6B,EAA3C;;AACA,MAAMuhB,eAAe,GAAG,SAAlBA,eAAkB;AAAA,WACtB5f,OAAO,gBACL,oBAAC,QAAD,QAAW9F,KAAK,CAACmN,MAAN,IAAgB,YAA3B,CADK,gBAGL,oBAAC,eAAD;AACE,MAAA,QAAQ,EAAE+W,QADZ;AAEE,MAAA,IAAI,EAAExjB,IAFR;AAGE,MAAA,WAAW,EAAEqI,WAHf;AAIE,MAAA,OAAO,EAAE+H,KAJX;AAKE,MAAA,OAAO,EAAE5L,OALX;AAME,MAAA,YAAY,EAAE2f,UANhB;AAOE,MAAA,IAAI,EAAEpgB;AAPR,OAQM4f,GARN,EAJoB;AAAA,GAAxB;;AAeA,MAAM5S,WAAW;AACfyS,IAAAA,QAAQ,EAARA,QADe;AAEfpe,IAAAA,OAAO,EAAPA,OAFe;AAGfsP,IAAAA,YAAY,EAAEyP,UAHC;AAIf1gB,IAAAA,OAAO,EAAE2M;AAJM,KAKZ9Q,KALY,CAAjB;;AAOA,SAAOJ,QAAQ,gBACb,oBAAC,MAAD,EAAY6R,WAAZ,EAA0B7R,QAA1B,CADa,gBAGb,oBAAC,QAAD,qBACE,oBAAC,eAAD,OADF,CAHF;AAOD,CA7CD;;AA+CA2P,eAAe,CAACrP,SAAhB,GAA4BA,WAA5B;AACAqP,eAAe,CAACvF,YAAhB,GAA+BA,cAA/B;AACAuF,eAAe,CAAC9H,WAAhB,GAA8BA,aAA9B;;ACzEA,IAAMvH,WAAS,GAAGkH,UAAU,CAACkI,iBAAX,CAA6BpP,SAA/C;AACA,IAAM8J,cAAY,GAAG5C,UAAU,CAACkI,iBAAX,CAA6BtF,YAAlD;AACA,IAAMvC,aAAW,GAAGL,UAAU,CAACkI,iBAAX,CAA6B7H,WAAjD;;AAQA,IAAM6H,iBAAiB,GAA8C,SAA/DA,iBAA+D,CACnEtP,KADmE;MAG3DJ,WAAyCI,MAAzCJ;uBAAyCI,MAA/BmE;MAAAA,sCAAU;uBAAqBnE,MAAjBkN;MAAAA,sCAAU;AAC1C,MAAMlK,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;;oBAQItG,UAAU,CAAClK,WAAD;MANZkX,sBAAAA;MACAD,uBAAAA;MACApX,oBAAAA;MACMic,0BAANlc;MACA0X,iCAAAA;MACSjN,0BAAT1M;;oBAEwB8S,UAAU,CAACsO,cAAD,EAAiBN,mBAAjB;MAA7B5kB;MAAO0C;;AACd,MAAM+N,KAAK,GACTrK,iBAAiB,CAAC6b,WAAD,CAAjB,IACAne,OADA,IAEA9D,KAAK,CAAC8D,OAFN,IAGA0M,WAHA,IAIA,EALF;AAMAkE,EAAAA,SAAS,CAAC;AACR,QAAI,CAAC9S,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqB,CAACpE,CAAC,CAAC+C,OAAF,CAAU3E,KAAK,CAAC6jB,QAAhB,CAA1B,EAAqD;AACnD,UAAI,CAACjiB,CAAC,CAAC0jB,OAAF,CAAUtf,KAAV,EAAiBhG,KAAK,CAAC6jB,QAAvB,CAAL,EAAuC;AACrC,YAAM0B,UAAU,gBAAQvf,KAAR,EAAkBhG,KAAK,CAAC6jB,QAAxB,CAAhB;;AACAzG,QAAAA,QAAQ,IAAIA,QAAQ,CAACmI,UAAD,CAApB;AACD;AACF;;AACD,QAAIvlB,KAAK,CAAC0P,QAAN,CAAepO,MAAf,IAAyB,CAAzB,IAA8BqB,MAAM,CAAC+H,WAAzC,EAAsD;AACpDhI,MAAAA,QAAQ,CAAC;AACPrC,QAAAA,IAAI,EAAE,YADC;AAEPE,QAAAA,OAAO,EAAE;AAAEkF,UAAAA,OAAO,EAAE;AAAX;AAFF,OAAD,CAAR;AAIAgf,MAAAA,WAAW,CAAC;AACV9hB,QAAAA,MAAM,EAANA,MADU;AAEV3C,QAAAA,KAAK,EAALA,KAFU;AAGV0C,QAAAA,QAAQ,EAARA,QAHU;AAIV2a,QAAAA,OAAO,EAAPA,OAJU;AAKVvZ,QAAAA,OAAO,EAAE2M,KALC;AAMV5D,QAAAA,OAAO,EAAPA;AANU,OAAD,CAAX;AAQD;;AACD,WAAO;AAAA,aAAY8X,iBAAiB,CAACjiB,QAAD,CAA7B;AAAA,KAAP;AACD,GAtBQ,EAsBN,CAACC,MAAD,CAtBM,CAAT;;AAuBA,MAAM6iB,YAAY,gBACbxlB,KADa;AAEhB8D,IAAAA,OAAO,EAAE2M,KAFO;AAGhB+T,IAAAA,UAAU,EAAE,sBAAC9jB,IAAD,EAAOuB,EAAP,EAAWiC,QAAX;UAAWA;AAAAA,QAAAA,WAAW;;;AAChC,UAAI,CAACtC,CAAC,CAAC+C,OAAF,CAAUT,QAAV,CAAL,EAA0B;AAAA;;AACxBuZ,QAAAA,kBAAkB,IAAIA,kBAAkB,gDAAI/c,IAAJ,IAAWwD,QAAX,uBAAxC;AACD;;AACDsgB,MAAAA,UAAU,CAAC;AACT9jB,QAAAA,IAAI,EAAJA,IADS;AAETuB,QAAAA,EAAE,EAAFA,EAFS;AAGTU,QAAAA,MAAM,EAANA,MAHS;AAIT0a,QAAAA,OAAO,EAAPA,OAJS;AAKT3a,QAAAA,QAAQ,EAARA;AALS,OAAD,CAAV;AAOD,KAde;AAehBof,IAAAA,WAAW,EAAE,qBAACpS,QAAD;AAAA,aACX2U,kBAAkB,CAAC;AAAE3U,QAAAA,QAAQ,EAARA,QAAF;AAAYhN,QAAAA,QAAQ,EAARA,QAAZ;AAAsB+a,QAAAA,kBAAkB,EAAlBA;AAAtB,OAAD,CADP;AAAA;AAfG,IAAlB;;AAkBA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAE+H;AAAjC,KACGjmB,QADH,CADF;AAKD,CAlED;;AAoEA0P,iBAAiB,CAACpP,SAAlB,GAA8BA,WAA9B;AACAoP,iBAAiB,CAACtF,YAAlB,GAAiCA,cAAjC;AACAsF,iBAAiB,CAAC7H,WAAlB,GAAgCA,aAAhC;;ACzEO,IAAMqe,oBAAoB,GAAkB;AACjD9jB,EAAAA,MAAM,EAAE;AADyC,CAA5C;AAQP,AAAO,IAAM+jB,iBAAiB,GAAsB,SAAvCA,iBAAuC,CAAC/jB,MAAD,EAASe,QAAT;AAClDA,EAAAA,QAAQ,IACNA,QAAQ,CAAC;AACPrC,IAAAA,IAAI,EAAE,WADC;AAEPE,IAAAA,OAAO,EAAE;AACPoB,MAAAA,MAAM,EAANA;AADO;AAFF,GAAD,CADV;AAOD,CARM;AAgBP,AAAO,IAAMgkB,YAAY;AAAA,0EAAiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACxCriB,YAAAA,KADwC,QACxCA,KADwC,EAExCZ,QAFwC,QAExCA,QAFwC,EAGxCC,MAHwC,QAGxCA,MAHwC;AAAA;AAAA;AAAA,4CAMdW,KAAK,CAC1BH,eADqB,CACLR,MADK,EAErBijB,SAFqB,EANc,qBAMd,sBAGpBliB,QAHoB,CAIpB,0BAJoB,EAKpB,sDALoB,EAMpB,mBANoB,EAOpB,4BAPoB,EAQpB,gBARoB,EASpB,gBAToB,EAWrBmiB,IAXqB,EANc;;AAAA;AAMhCD,YAAAA,SANgC;AAkBtChW,YAAAA,OAAO,CAACkW,GAAR,CAAY,WAAZ,EAAyBF,SAAzB;AACAljB,YAAAA,QAAQ,CAAC;AACPrC,cAAAA,IAAI,EAAE,cADC;AAEPE,cAAAA,OAAO,EAAE;AAAEqlB,gBAAAA,SAAS,EAAEA,SAAF,oBAAEA,SAAS,CAAE7jB,OAAX;AAAb;AAFF,aAAD,CAAR;AAnBsC;AAAA;;AAAA;AAAA;AAAA;AAwBtC6N,YAAAA,OAAO,CAAC5N,KAAR;;AAxBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA,kBAAZ2jB,YAAY;AAAA;AAAA;AAAA,GAAlB;AAoCP,AAAO,IAAMI,iBAAiB;AAAA,0EAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAClDpjB,YAAAA,MADkD,SAClDA,MADkD,EAElDqjB,UAFkD,SAElDA,UAFkD,EAGlDC,gBAHkD,SAGlDA,gBAHkD,EAIlD3V,QAJkD,SAIlDA,QAJkD,EAKlDhN,KALkD,SAKlDA,KALkD;AAAA;;AAAA,iBAQ5C2iB,gBAR4C;AAAA;AAAA;AAAA;;AAAA;AAAA,mBASvBpY,UAAQ,CAAC1K,eAAT,CAAyBR,MAAzB,EACpBe,QADoB,CAEnB,0BAFmB,EAGnB,sDAHmB,EAInB,mBAJmB,EAKnB,4BALmB,EAMnB,gBANmB,EAOnB,gBAPmB,EASpBC,IAToB,CASfqiB,UATe,CATuB;;AAAA;AASxCE,YAAAA,QATwC;AAmBxCrO,YAAAA,cAnBwC,GAmBvB1J,gBAAc,CAAChK,KAAf,CAAqB;AAAElC,cAAAA,EAAE,EAAEgkB;AAAN,aAArB,CAnBuB;AAAA;AAAA,mBAoBxCC,QAAQ,CAAC/iB,eAAT,CAAyBR,MAAzB,EAAiC+O,MAAjC,CAAwC;AAAEmG,cAAAA,cAAc,EAAdA;AAAF,aAAxC,CApBwC;;AAAA;AAqB9CvH,YAAAA,QAAQ,IAAIhN,KAAZ,IAAqBgN,QAAQ,CAAChN,KAAK,CAACrB,EAAP,CAA7B;;AArB8C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAwBhD2N,YAAAA,OAAO,CAAC5N,KAAR;;AAxBgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAAA,kBAAjB+jB,iBAAiB;AAAA;AAAA;AAAA,GAAvB;AA4BP,IAAM1lB,MAAI,GAAyB,CACjC,WADiC,EAEjC,cAFiC,EAGjC,mBAHiC,CAAnC;;AAMA,IAAM8lB,eAAe,GAAG,SAAlBA,eAAkB,CACtBnmB,KADsB,EAEtB2F,OAFsB;AAAA,SAItB5F,WAAW,CACTC,KADS,EAET2F,OAFS,EAGTtF,MAHS,CAJW;AAAA,CAAxB;;AC5GO,IAAM+lB,sBAAsB,GAAG;AACpCV,EAAAA,iBAAiB,EAAjBA,iBADoC;AAEpCK,EAAAA,iBAAiB;AAAA,yFAAE;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAFmB,CAA/B;AAOP,IAAMM,eAAe,gBAAGxgB,aAAa,CAAiBugB,sBAAjB,CAArC;;ACFA,IAAMvmB,WAAS,GAAGkH,UAAU,CAAC+G,kBAAX,CAA8BjO,SAAhD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC+G,kBAAX,CAA8B1G,WAAlD;;AAKA,IAAM0G,kBAAkB,GAA0C,SAA5DA,kBAA4D,CAACnO,KAAD;MACxDJ,WAAaI,MAAbJ;;oBACkBqX,UAAU,CAACuP,eAAD,EAAkBV,oBAAlB;MAA7BzlB;MAAO0C;;oBACc2N,UAAU,CAACzK,YAAD;MAA9BtC,oBAAAA;MAAOgN,uBAAAA;;AACf,MAAM3N,MAAM,GAAG0N,UAAU,CAACsG,oBAAD,CAAzB;AACAjC,EAAAA,SAAS,CAAC;AACR;AACA,QAAIpR,KAAJ,EAAW;AACTqiB,MAAAA,YAAY,CAAC;AAAEriB,QAAAA,KAAK,EAALA,KAAF;AAASZ,QAAAA,QAAQ,EAARA,QAAT;AAAmBC,QAAAA,MAAM,EAANA;AAAnB,OAAD,CAAZ;AACD;AACF,GALQ,EAKN,CAACW,KAAD,CALM,CAAT;;AAMA,MAAMuT,YAAY,gBACb7W,KADa;AAEhB0lB,IAAAA,iBAAiB,EAAE,2BAAC/jB,MAAD;AAAA,aACjBykB,sBAAsB,CAAC,mBAAD,CAAtB,CAA4CzkB,MAA5C,EAAoDe,QAApD,CADiB;AAAA,KAFH;AAIhBqjB,IAAAA,iBAAiB;AAAA,+EAAE,iBAAOC,UAAP,EAA2BC,gBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACXF,iBAAiB,CAAC;AACtBE,kBAAAA,gBAAgB,EAAhBA,gBADsB;AAEtBD,kBAAAA,UAAU,EAAVA,UAFsB;AAGtBrjB,kBAAAA,MAAM,EAANA,MAHsB;AAItB2N,kBAAAA,QAAQ,EAARA,QAJsB;AAKtBhN,kBAAAA,KAAK,EAALA;AALsB,iBAAD,CADN;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAJD,IAAlB;;AAaA,sBACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEuT;AAAjC,KACGtX,QADH,CADF;AAKD,CA7BD;;AA+BAuO,kBAAkB,CAACjO,SAAnB,GAA+BA,WAA/B;AACAiO,kBAAkB,CAAC1G,WAAnB,GAAiCA,aAAjC;;AChDA,IAAMvH,WAAS,GAAGkH,UAAU,CAAC8G,QAAX,CAAoBhO,SAAtC;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC8G,QAAX,CAAoBzG,WAAxC;;AAMA,IAAMyG,QAAQ,GAAqC,SAA7CA,QAA6C;MAAGtO,gBAAAA;;oBAC9B8Q,UAAU,CAACgW,eAAD;MAAxBT,wBAAAA;;AACR,MAAM7e,UAAU,GACd6e,SAAS,IACTA,SAAS,CAAChlB,GAAV,CAAc,UAACslB,QAAD,EAAWvR,CAAX;;;AACZ,QAAMmJ,iBAAiB,4BAAGoI,QAAQ,CAACpI,iBAAT,EAAH,qBAAG,sBAA8B/b,OAA9B,EAA1B;AACA,QAAMmE,SAAS,GAAG4X,iBAAH,oBAAGA,iBAAiB,CAAEld,GAAnB,CAAuB,UAAC0lB,gBAAD;AAAA,aACvCA,gBAAgB,CAACpiB,QAAjB,EADuC;AAAA,KAAvB,CAAlB;AAGA,QAAMyZ,eAAe,4BAAGuI,QAAQ,CAACK,wBAAT,EAAH,qBAAG,sBAAqCxkB,OAArC,EAAxB;AACA,QAAMykB,uBAAuB,4BAAGN,QAAQ,CAACrO,cAAT,EAAH,qBAAG,sBAA2B5V,EAA3D;AACA,QAAM2b,cAAc,4BAAGsI,QAAQ,CAACtI,cAAT,EAAH,qBAAG,sBAA2B7b,OAA3B,EAAvB;AACA,QAAM0kB,aAAa,GAAG;AACpBvgB,MAAAA,SAAS,EAATA,SADoB;AAEpByX,MAAAA,eAAe,EAAfA,eAFoB;AAGpB6I,MAAAA,uBAAuB,EAAvBA,uBAHoB;AAIpB5I,MAAAA,cAAc,EAAdA;AAJoB,KAAtB;AAMA,wBACE,oBAAC,uBAAD,CAAyB,QAAzB;AAAkC,MAAA,GAAG,EAAEjJ,CAAvC;AAA0C,MAAA,KAAK,EAAE8R;AAAjD,OACGlnB,QADH,CADF;AAKD,GAnBD,CAFF;AAsBA,sBAAO,oBAAC,QAAD,QAAWwH,UAAX,CAAP;AACD,CAzBD;;AA2BA8G,QAAQ,CAAChO,SAAT,GAAqBA,WAArB;AACAgO,QAAQ,CAACzG,WAAT,GAAuBA,aAAvB;;AC9BA,IAAMiK,SAAO,GAAiC;AAC5CwG,EAAAA,cAAc,EAAE,EAD4B;AAE5C6O,EAAAA,2BAA2B,EAAE;AAFe,CAA9C;AAKA,IAAMC,6BAA6B,gBAAG9gB,aAAa,CACjDwL,SADiD,CAAnD;;ACPA,IAAMxR,WAAS,GAAGkH,UAAU,CAACoH,cAAX,CAA0BtO,SAA5C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACoH,cAAX,CAA0B/G,WAA9C;;AAQA,IAAM+G,cAAc,GAA2C,SAAzDA,cAAyD,CAACxO,KAAD;MAE3DJ,WAGEI,MAHFJ;MACAmN,WAEE/M,MAFF+M;yBAEE/M,MADFinB;MAAAA;;oBAEmDvW,UAAU,CAC7DwN,uBAD6D;MAAvDF,8BAAAA;MAAiB6I,sCAAAA;;kBAGChS,QAAQ,CAAgB,EAAhB;MAA3BxO;MAAOoX;;AACd1I,EAAAA,SAAS,CAAC;AACR,QAAMmS,OAAO,GACXlJ,eAAe,IACfA,eAAe,CACZxC,MADH,CACU,UAACoJ,CAAD;AACN,UAAI7X,QAAJ,EAAc,OAAO6X,CAAC,CAACtiB,EAAF,KAASukB,uBAAhB;AACd,aAAO,IAAP;AACD,KAJH,EAKG5lB,GALH,CAKO,UAACiX,cAAD,EAAiBlD,CAAjB;AACH;AACA;AACA,UAAM+R,2BAA2B,GAAG7O,cAAc,CAAC6O,2BAAf,EAApC;AACA,UAAMI,aAAa,GAAG;AACpBjP,QAAAA,cAAc,EAAdA,cADoB;AAEpB2O,QAAAA,uBAAuB,EAAvBA,uBAFoB;AAGpBE,QAAAA,2BAA2B,EAA3BA;AAHoB,OAAtB;AAKA,0BACE,oBAAC,6BAAD,CAA+B,QAA/B;AACE,QAAA,GAAG,EAAE/R,CADP;AAEE,QAAA,KAAK,EAAEmS;AAFT,SAIGvnB,QAJH,CADF;AAQD,KAtBH,CAFF;AAyBA,QAAIsnB,OAAJ,EAAazJ,QAAQ,CAACyJ,OAAD,CAAR;AACd,GA3BQ,EA2BN,CAACL,uBAAD,CA3BM,CAAT;AA4BA,MAAMzf,UAAU,GAAI,CAACnF,CAAC,CAAC+C,OAAF,CAAUqB,KAAV,CAAD,IAAqBA,KAAtB,IAAgC4gB,SAAnD;AACA,sBAAO,oBAAC,QAAD,QAAW7f,UAAX,CAAP;AACD,CAxCD;;AA0CAoH,cAAc,CAACtO,SAAf,GAA2BA,WAA3B;AACAsO,cAAc,CAAC/G,WAAf,GAA6BA,aAA7B;;AC5DA,IAAMvH,WAAS,GAAGkH,UAAU,CAACqH,kBAAX,CAA8BvO,SAAhD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACqH,kBAAX,CAA8BhH,WAAlD;;AAQA,IAAMgH,kBAAkB,GAAyC,SAA3DA,kBAA2D,CAACzO,KAAD;oBACpC0Q,UAAU,CAACsW,6BAAD;MAA7B9O,6BAAAA;;AACR,MAAMuG,SAAS,GAAGvG,cAAc,CAAC,MAAD,CAAhC;;AACA,MAAMzG,WAAW,gBACZzR,KADY,CAAjB;;AAGA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,yBAAOI,KAAP,EAAeye,SAAf,CAHF;AAKD,CAXD;;AAaAhQ,kBAAkB,CAACvO,SAAnB,GAA+BA,WAA/B;AACAuO,kBAAkB,CAAChH,WAAnB,GAAiCA,aAAjC;;ACrBA,IAAMvH,WAAS,GAAGkH,UAAU,CAACsH,yBAAX,CAAqCxO,SAAvD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACsH,yBAAX,CAAqCjH,WAAzD;;AAcA,IAAMiH,yBAAyB,GAAsD,SAA/EA,yBAA+E,CACnF1O,KADmF;MAG3EkJ,WAAmBlJ,MAAnBkJ;MAAauH,kCAAMzQ;;oBACyB0Q,UAAU,CAC5DsW,6BAD4D;MAAtD9O,6BAAAA;MAAgB2O,sCAAAA;;qBAGMnW,UAAU,CAACgW,eAAD;MAAhCN,iCAAAA;;AACR,MAAMC,UAAU,GAAGnO,cAAc,CAACmO,UAAf,IAA6B,EAAhD;AACA,MAAMC,gBAAgB,GAAGpO,cAAc,CAAC5V,EAAxC;AACA,MAAMmC,IAAI,iBAAe4hB,UAAzB;AACA,MAAMtN,OAAO,GAAGb,cAAc,CAAC5V,EAAf,KAAsBukB,uBAAtC;;AACA,MAAMO,cAAc;AAAA,8DAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACfhB,iBAAiB,CAACC,UAAD,EAAaC,gBAAb,CADF;;AAAA;AAErBpd,cAAAA,QAAQ,IAAIA,QAAQ,CAACgP,cAAD,CAApB;;AAFqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdkP,cAAc;AAAA;AAAA;AAAA,KAApB;;AAIA,MAAM3V,WAAW;AACf2V,IAAAA,cAAc,EAAdA;AADe,KAEZpnB,KAFY,CAAjB;;AAIA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,IAAI,EAAE6E,IAFR;AAGE,IAAA,QAAQ,EAAE2iB,cAHZ;AAIE,IAAA,cAAc,EAAErO;AAJlB,KAKMtI,CALN,EAHF;AAWD,CA/BD;;AAiCA/B,yBAAyB,CAACxO,SAA1B,GAAsCA,WAAtC;AACAwO,yBAAyB,CAACjH,WAA1B,GAAwCA,aAAxC;;AC5CA,IAAMvH,WAAS,GAAGkH,UAAU,CAACuH,mBAAX,CAA+BzO,SAAjD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACuH,mBAAX,CAA+BlH,WAAnD;;AAeA,IAAMkH,mBAAmB,GAAgD,SAAnEA,mBAAmE,CACvE3O,KADuE;sBASnEA,MALFuJ;MAAAA,oCAAS;oBAKPvJ,MAJFU;MAAAA,gCAAO;oBAILV,MAHFsJ;MAAAA,gCAAO;6BAGLtJ,MAFFqnB;MAAAA,kDAAgB;MACb5W,kCACDzQ;;oBACuB0Q,UAAU,CAACsW,6BAAD;MAA7B9O,6BAAAA;;kBACkBrD,QAAQ,CAAC,EAAD;MAA3BiF;MAAOC;;mBACoBlF,QAAQ,CAAC,CAAD;MAAnCyS;MAAWC;;AAClBxS,EAAAA,SAAS,CAAC;AACR,QAAMtE,CAAC,GAAG4I,SAAS,CACjB/P,IADiB,EAEjB5I,IAFiB,EAGjB6I,MAHiB,EAIjB2O,cAJiB,CAAnB;AAMA6B,IAAAA,QAAQ,CAACtJ,CAAD,CAAR;AACA,QAAMvP,CAAC,GAAGmY,SAAS,CACjB/P,IADiB,EAEjB5I,IAFiB,EAGjB,OAHiB,EAIjBwX,cAJiB,CAAnB;AAMAqP,IAAAA,YAAY,CAACrmB,CAAD,CAAZ;AACA,WAAO;AACL6Y,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAwN,MAAAA,YAAY,CAAC,CAAD,CAAZ;AACD,KAHD;AAID,GAnBQ,EAmBN,CAACrP,cAAD,CAnBM,CAAT;;AAoBA,MAAMzG,WAAW;AACfqI,IAAAA,KAAK,EAALA;AADe,KAEZrJ,CAFY,CAAjB;;AAIA,SAAOzQ,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,4BAAU6Q,CAAV,EAAc6W,SAAS,KAAK,CAAd,GAAkBD,aAAlB,GAAkCvN,KAAhD,CAHF;AAKD,CA1CD;;AA4CAnL,mBAAmB,CAACzO,SAApB,GAAgCA,WAAhC;AACAyO,mBAAmB,CAAClH,WAApB,GAAkCA,aAAlC;;AClEA,IAAMiK,SAAO,GAAgC;AAC3C8V,EAAAA,aAAa,EAAE;AAD4B,CAA7C;AAIA,IAAMC,4BAA4B,gBAAGvhB,aAAa,CAChDwL,SADgD,CAAlD;;ACAA,IAAMxR,WAAS,GAAGkH,UAAU,CAAC4H,aAAX,CAAyB9O,SAA3C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC4H,aAAX,CAAyBvH,WAA7C;;AAMA,IAAMuH,aAAa,GAA0C,SAAvDA,aAAuD,CAAChP,KAAD;MACnDJ,WAAaI,MAAbJ;;oBACa8Q,UAAU,CAACmL,uBAAD;MAAvBtX,uBAAAA;;qBACmBmM,UAAU,CAACwN,uBAAD;MAA7BD,8BAAAA;;AACR,MAAM7W,UAAU,GAAG6W,cAAH,oBAAGA,cAAc,CAC7BzC,MADe,CACR,UAACkM,KAAD;AAAA,WAAWA,KAAK,CAACvjB,OAAN,KAAkBI,QAAQ,CAACJ,OAAtC;AAAA,GADQ,EAEhBlD,GAFgB,CAEZ,UAACumB,aAAD,EAAgBxS,CAAhB;AACH,QAAM2S,kBAAkB,GAAG;AACzBH,MAAAA,aAAa,EAAbA;AADyB,KAA3B;AAGA,wBACE,oBAAC,4BAAD,CAA8B,QAA9B;AACE,MAAA,GAAG,EAAExS,CADP;AAEE,MAAA,KAAK,EAAE2S;AAFT,OAIG/nB,QAJH,CADF;AAQD,GAdgB,CAAnB;AAeA,sBAAO,oBAAC,QAAD,QAAWwH,UAAX,CAAP;AACD,CApBD;;AAsBA4H,aAAa,CAAC9O,SAAd,GAA0BA,WAA1B;AACA8O,aAAa,CAACvH,WAAd,GAA4BA,aAA5B;;ACpCA,IAAMvH,YAAS,GAAGkH,UAAU,CAAC6H,kBAAX,CAA8B/O,SAAhD;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAAC6H,kBAAX,CAA8BxH,WAAlD;;AAWA,IAAMwH,kBAAkB,GAA+C,SAAjEA,kBAAiE,CACrEjP,KADqE;MAG7DU,OAASV,MAATU;;oBACkBgQ,UAAU,CAAC+W,4BAAD;MAA5BD,4BAAAA;;AACR,MAAM7Q,IAAI,GAAG6Q,aAAa,GAAGA,aAAa,CAAC9mB,IAAD,CAAhB,GAAyB,EAAnD;;AACA,MAAM+Q,WAAW,gBACZzR,KADY,CAAjB;;AAGA,SAAOA,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,yBAAOI,KAAP,EAAe2W,IAAf,CAHF;AAKD,CAdD;;AAgBA1H,kBAAkB,CAAC/O,SAAnB,GAA+BA,YAA/B;AACA+O,kBAAkB,CAACxH,WAAnB,GAAiCA,aAAjC;;AC7BA,IAAMvH,YAAS,GAAGkH,UAAU,CAACiE,gBAAX,CAA4BnL,SAA9C;AACA,IAAMuH,aAAW,GAAGL,UAAU,CAACiE,gBAAX,CAA4B5D,WAAhD;;AAoBA,IAAM4D,gBAAgB,GAAgD,SAAhEA,gBAAgE,CACpErL,KADoE;MAG5DU,OAAeV,MAAfU;MAAS+P,kCAAMzQ;;oBACiB0Q,UAAU,CAChDsW,6BADgD;MAA1CD,0CAAAA;;AAGR,MAAMpQ,IAAI,GAAGoQ,2BAA2B,IAAIA,2BAA2B,CAACrmB,IAAD,CAAvE;;AACA,MAAM+Q,WAAW;AACfkF,IAAAA,IAAI,EAAJA;AADe,KAEZlG,CAFY,CAAjB;;AAIA,SAAOzQ,KAAK,CAACJ,QAAN,gBACL,oBAAC,MAAD,EAAY6R,WAAZ,EAA0BzR,KAAK,CAACJ,QAAhC,CADK,gBAGL,4BAAU6Q,CAAV,EAAckG,IAAd,CAHF;AAKD,CAjBD;;AAmBAtL,gBAAgB,CAACnL,SAAjB,GAA6BA,YAA7B;AACAmL,gBAAgB,CAAC5D,WAAjB,GAA+BA,aAA/B;;;;"}