{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/bolajiayodeji/Tunnel/CL/sanity-commercelayer-starter/pages/[countryCode]/[lang]/[product].tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext } from 'react';\nimport _ from 'lodash';\nimport Layout from '@components/Layout';\nimport { CommerceLayer, Price, PricesContainer, VariantsContainer, VariantSelector, OrderContainer, ItemContainer, AddToCartButton, OrderStorage } from '@commercelayer/react-components';\nimport LayoutContext from '@context/LayoutContext';\nimport { useGetToken } from '@hooks/GetToken';\nimport { useRouter } from 'next/router';\nimport locale from '@locale/index';\nimport { parseImg, parseLanguageCode } from '@utils/parser';\n\nvar AddToCartCustom = function AddToCartCustom(props) {\n  _s();\n\n  var className = props.className,\n      label = props.label,\n      disabled = props.disabled,\n      handleClick = props.handleClick;\n\n  var _useContext = useContext(LayoutContext),\n      handleAnimation = _useContext.handleAnimation;\n\n  var customHandleClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _yield$handleClick, success;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return handleClick(e);\n\n            case 2:\n              _yield$handleClick = _context.sent;\n              success = _yield$handleClick.success;\n              if (success && handleAnimation) handleAnimation(e);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function customHandleClick(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    disabled: disabled,\n    className: className,\n    onClick: customHandleClick,\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(AddToCartCustom, \"Gx5W5zwf3glTnA+jamG9ElGTxQs=\");\n\n_c = AddToCartCustom;\n\nvar ProductPage = function ProductPage(_ref2) {\n  _s2();\n\n  var _router$query, _$first, _$first2, _product$variants;\n\n  var product = _ref2.product,\n      clientId = _ref2.clientId,\n      endpoint = _ref2.endpoint,\n      countryCode = _ref2.countryCode,\n      _ref2$lang = _ref2.lang,\n      lang = _ref2$lang === void 0 ? 'en-US' : _ref2$lang,\n      marketId = _ref2.marketId,\n      buildLanguages = _ref2.buildLanguages,\n      cms = _ref2.cms,\n      countries = _ref2.countries;\n  var router = useRouter();\n  var token = useGetToken({\n    clientId: clientId,\n    endpoint: endpoint,\n    scope: marketId,\n    countryCode: (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.countryCode\n  });\n  var imgUrl = parseImg((_$first = _.first(product === null || product === void 0 ? void 0 : product.images)) === null || _$first === void 0 ? void 0 : _$first.url, cms);\n  var firstVariantCode = (_$first2 = _.first(product === null || product === void 0 ? void 0 : product.variants)) === null || _$first2 === void 0 ? void 0 : _$first2.code;\n  var variantOptions = product === null || product === void 0 ? void 0 : (_product$variants = product.variants) === null || _product$variants === void 0 ? void 0 : _product$variants.map(function (variant) {\n    var _$first3;\n\n    return {\n      label: variant.size.name,\n      code: variant.code,\n      lineItem: {\n        name: product.name,\n        imageUrl: (_$first3 = _.first(variant.images)) === null || _$first3 === void 0 ? void 0 : _$first3.url\n      }\n    };\n  });\n\n  var handleBackTo = function handleBackTo(e) {\n    e.preventDefault();\n    router.back();\n  };\n\n  var languageCode = parseLanguageCode(lang, 'toLowerCase', true);\n  return !product ? null : /*#__PURE__*/_jsxDEV(CommerceLayer, {\n    accessToken: token,\n    endpoint: endpoint,\n    children: /*#__PURE__*/_jsxDEV(OrderStorage, {\n      persistKey: \"order-\".concat(countryCode),\n      children: /*#__PURE__*/_jsxDEV(OrderContainer, {\n        attributes: {\n          languageCode: languageCode\n        },\n        children: /*#__PURE__*/_jsxDEV(Layout, {\n          cms: cms,\n          title: product.name,\n          lang: lang,\n          buildLanguages: buildLanguages,\n          countries: countries,\n          children: /*#__PURE__*/_jsxDEV(ItemContainer, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container mx-auto max-w-screen-lg px-5 lg:px-0 text-sm text-gray-700\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                onClick: handleBackTo,\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/back.svg\",\n                  className: \"w-5 h-5 inline-block\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"ml-2 hover:underline inline-block align-middle\",\n                  children: locale[lang].backToAllProducts\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container mx-auto max-w-screen-lg py-10 lg:py-16 flex flex-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap sm:flex-nowrap sm:space-x-5 px-5 lg:px-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full pb-5 lg:pb-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    alt: product.name,\n                    className: \"w-full object-center rounded border border-gray-200\",\n                    src: imgUrl\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-sm title-font text-gray-500 tracking-widest\",\n                    children: \"BRAND\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"text-gray-900 text-3xl title-font font-medium my-3\",\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"leading-relaxed\",\n                    children: product.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center border-b-2 border-gray-200 py-5\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"relative\",\n                        \"data-children-count\": \"1\",\n                        children: [/*#__PURE__*/_jsxDEV(VariantsContainer, {\n                          children: /*#__PURE__*/_jsxDEV(VariantSelector, {\n                            placeholder: locale[lang].selectSize,\n                            options: _.sortBy(variantOptions, 'label'),\n                            className: \"rounded border appearance-none border-gray-400 py-2 focus:outline-none focus:border-blue-500 text-base pl-3 pr-10\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 130,\n                            columnNumber: 29\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 129,\n                          columnNumber: 27\n                        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"absolute right-0 top-0 h-full w-10 text-center text-gray-600 pointer-events-none flex items-center justify-center\",\n                          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: \"2\",\n                            className: \"w-4 h-4\",\n                            viewBox: \"0 0 24 24\",\n                            children: /*#__PURE__*/_jsxDEV(\"path\", {\n                              d: \"M6 9l6 6 6-6\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 146,\n                              columnNumber: 31\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 137,\n                            columnNumber: 29\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 136,\n                          columnNumber: 27\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 128,\n                        columnNumber: 25\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 23\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between items-center pt-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"title-font font-medium text-2xl text-gray-900\",\n                      children: /*#__PURE__*/_jsxDEV(PricesContainer, {\n                        children: /*#__PURE__*/_jsxDEV(Price, {\n                          skuCode: firstVariantCode,\n                          className: \"text-green-600 mr-1\",\n                          compareClassName: \"text-gray-500 line-through text-lg\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 155,\n                          columnNumber: 27\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 25\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 23\n                    }, _this), /*#__PURE__*/_jsxDEV(AddToCartButton, {\n                      label: locale[lang].addToCart,\n                      className: \"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm md:text-base font-medium rounded-md text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",\n                      children: AddToCartCustom\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 23\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 21\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(ProductPage, \"aTgom5Og7csT/Yi+rhrsrH/n4vk=\", false, function () {\n  return [useRouter, useGetToken];\n});\n\n_c2 = ProductPage;\nexport var __N_SSG = true;\nexport default ProductPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddToCartCustom\");\n$RefreshReg$(_c2, \"ProductPage\");","map":{"version":3,"sources":["/Users/bolajiayodeji/Tunnel/CL/sanity-commercelayer-starter/pages/[countryCode]/[lang]/[product].tsx"],"names":["React","useContext","_","Layout","CommerceLayer","Price","PricesContainer","VariantsContainer","VariantSelector","OrderContainer","ItemContainer","AddToCartButton","OrderStorage","LayoutContext","useGetToken","useRouter","locale","parseImg","parseLanguageCode","AddToCartCustom","props","className","label","disabled","handleClick","handleAnimation","customHandleClick","e","success","ProductPage","product","clientId","endpoint","countryCode","lang","marketId","buildLanguages","cms","countries","router","token","scope","query","imgUrl","first","images","url","firstVariantCode","variants","code","variantOptions","map","variant","size","name","lineItem","imageUrl","handleBackTo","preventDefault","back","languageCode","backToAllProducts","description","selectSize","sortBy","addToCart"],"mappings":"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","sourcesContent":["import React, { useContext, FunctionComponent } from 'react'\nimport { GetStaticPaths, GetStaticProps } from 'next'\nimport _ from 'lodash'\nimport Layout from '@components/Layout'\nimport {\n  CommerceLayer,\n  Price,\n  PricesContainer,\n  VariantsContainer,\n  VariantSelector,\n  OrderContainer,\n  ItemContainer,\n  AddToCartButton,\n  OrderStorage,\n} from '@commercelayer/react-components'\nimport LayoutContext from '@context/LayoutContext'\nimport { useGetToken } from '@hooks/GetToken'\nimport { useRouter } from 'next/router'\nimport locale from '@locale/index'\nimport { parseImg, parseLanguageCode } from '@utils/parser'\nimport { cmsFunctions } from '@utils/cms'\nimport { Product, Country } from '@typings/models'\n\nconst AddToCartCustom = (props: any) => {\n  const { className, label, disabled, handleClick } = props\n  const { handleAnimation } = useContext(LayoutContext)\n  const customHandleClick = async (e: any) => {\n    const { success } = await handleClick(e)\n    if (success && handleAnimation) handleAnimation(e)\n  }\n  return (\n    <button\n      disabled={disabled}\n      className={className}\n      onClick={customHandleClick}\n    >\n      {label}\n    </button>\n  )\n}\n\ntype Props = {\n  product: Product\n  clientId: string\n  endpoint: string\n  countryCode: string\n  lang: string\n  marketId: string\n  buildLanguages?: Country[]\n  cms: string\n  countries: Country[]\n}\n\nconst ProductPage: FunctionComponent<Props> = ({\n  product,\n  clientId,\n  endpoint,\n  countryCode,\n  lang = 'en-US',\n  marketId,\n  buildLanguages,\n  cms,\n  countries,\n}) => {\n  const router = useRouter()\n  const token = useGetToken({\n    clientId,\n    endpoint,\n    scope: marketId,\n    countryCode: router.query?.countryCode as string,\n  })\n  const imgUrl = parseImg(_.first(product?.images)?.url as string, cms)\n  const firstVariantCode = _.first(product?.variants)?.code\n  const variantOptions = product?.variants?.map((variant) => {\n    return {\n      label: variant.size.name,\n      code: variant.code,\n      lineItem: {\n        name: product.name,\n        imageUrl: _.first(variant.images)?.url,\n      },\n    }\n  })\n  const handleBackTo = (e: any) => {\n    e.preventDefault()\n    router.back()\n  }\n  const languageCode = parseLanguageCode(lang, 'toLowerCase', true)\n  return !product ? null : (\n    <CommerceLayer accessToken={token} endpoint={endpoint}>\n      <OrderStorage persistKey={`order-${countryCode}`}>\n        <OrderContainer attributes={{ languageCode }}>\n          <Layout\n            cms={cms}\n            title={product.name}\n            lang={lang}\n            buildLanguages={buildLanguages}\n            countries={countries}\n          >\n            <ItemContainer>\n              <div className=\"container mx-auto max-w-screen-lg px-5 lg:px-0 text-sm text-gray-700\">\n                <a href=\"#\" onClick={handleBackTo}>\n                  <img src=\"/back.svg\" className=\"w-5 h-5 inline-block\" />\n                  <p className=\"ml-2 hover:underline inline-block align-middle\">\n                    {locale[lang].backToAllProducts}\n                  </p>\n                </a>\n              </div>\n              <div className=\"container mx-auto max-w-screen-lg py-10 lg:py-16 flex flex-row\">\n                <div className=\"flex flex-wrap sm:flex-nowrap sm:space-x-5 px-5 lg:px-0\">\n                  <div className=\"w-full pb-5 lg:pb-0\">\n                    <img\n                      alt={product.name}\n                      className=\"w-full object-center rounded border border-gray-200\"\n                      src={imgUrl}\n                    />\n                  </div>\n                  <div className=\"w-full\">\n                    <h2 className=\"text-sm title-font text-gray-500 tracking-widest\">\n                      BRAND\n                    </h2>\n                    <h1 className=\"text-gray-900 text-3xl title-font font-medium my-3\">\n                      {product.name}\n                    </h1>\n                    <p className=\"leading-relaxed\">{product.description}</p>\n                    <div className=\"flex items-center border-b-2 border-gray-200 py-5\">\n                      <div className=\"flex items-center\">\n                        <div className=\"relative\" data-children-count=\"1\">\n                          <VariantsContainer>\n                            <VariantSelector\n                              placeholder={locale[lang].selectSize as string}\n                              options={_.sortBy(variantOptions, 'label')}\n                              className=\"rounded border appearance-none border-gray-400 py-2 focus:outline-none focus:border-blue-500 text-base pl-3 pr-10\"\n                            />\n                          </VariantsContainer>\n                          <span className=\"absolute right-0 top-0 h-full w-10 text-center text-gray-600 pointer-events-none flex items-center justify-center\">\n                            <svg\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              className=\"w-4 h-4\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <path d=\"M6 9l6 6 6-6\"></path>\n                            </svg>\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between items-center pt-5\">\n                      <span className=\"title-font font-medium text-2xl text-gray-900\">\n                        <PricesContainer>\n                          <Price\n                            skuCode={firstVariantCode}\n                            className=\"text-green-600 mr-1\"\n                            compareClassName=\"text-gray-500 line-through text-lg\"\n                          />\n                        </PricesContainer>\n                      </span>\n                      <AddToCartButton\n                        label={locale[lang].addToCart as string}\n                        className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm md:text-base font-medium rounded-md text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {AddToCartCustom}\n                      </AddToCartButton>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ItemContainer>\n          </Layout>\n        </OrderContainer>\n      </OrderStorage>\n    </CommerceLayer>\n  )\n}\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  return {\n    paths: [],\n    fallback: true,\n  }\n}\n\nexport const getStaticProps: GetStaticProps = async ({ params }: any) => {\n  const {\n    CL_CLIENT_ID,\n    CL_ENDPOINT,\n    BUILD_COUNTRY,\n    BUILD_LANGUAGES,\n    BUILD_CMS,\n  } = process.env\n  const lang = params?.lang as string\n  const cms = BUILD_CMS\n  const countryCode = params?.countryCode || BUILD_COUNTRY?.toLowerCase()\n  const slug = params?.product\n  const countries = _.has(cmsFunctions, `${cms}AllCountries`)\n    ? await cmsFunctions[`${cms}AllCountries`](lang)\n    : {}\n  const buildLanguages = _.compact(\n    BUILD_LANGUAGES?.split(',').map((l) => {\n      const country = countries.find(\n        (country: Country) => country.code === parseLanguageCode(l)\n      )\n      return !_.isEmpty(country) ? country : null\n    })\n  )\n  const country = countries.find(\n    (country: Country) => country.code.toLowerCase() === countryCode\n  )\n  const product = _.has(cmsFunctions, `${cms}GetProduct`)\n    ? await cmsFunctions[`${cms}GetProduct`](slug, lang)\n    : {}\n  return {\n    props: {\n      product,\n      clientId: CL_CLIENT_ID,\n      endpoint: CL_ENDPOINT,\n      lang,\n      countryCode,\n      marketId: `market:${country?.marketId}`,\n      buildLanguages,\n      cms: BUILD_CMS,\n      countries,\n    },\n    revalidate: 60,\n  }\n}\n\nexport default ProductPage\n"]},"metadata":{},"sourceType":"module"}